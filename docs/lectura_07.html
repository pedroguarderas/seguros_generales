<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Leonardo Vélez y Pedro Guarderas">

<title>8&nbsp; Tarificación – Matemáticas Actuariales para Seguros Generales</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./lectura_08.html" rel="next">
<link href="./lectura_06.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-257450a62f84a916ff723c9590a8c97c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script>
window.MathJax = {
  tex: {
    macros: {
      R: "\\mathbb{R}",
      C: "\\mathbb{C}",
      N: "\\mathbb{N}",
      Z: "\\mathbb{Z}",
      Fo: "\\mathscr{F}",
      E: "\\mathbb{E}",
      V: "\\mathbb{V}",
      D: "\\partial",
      F: "\\mathcal{F}",
      arginf: "\\operatorname{arginf}",
      argsup: "\\operatorname{argsup}",
      DFT: "\\operatorname{DFT}",
      VaR: "\\operatorname{VaR}",
      CVaR: "\\operatorname{CVaR}",
      TVaR: "\\operatorname{TVaR}",
      EVaR: "\\operatorname{EVaR}",
      CTE: "\\operatorname{CTE}",
      ES: "\\operatorname{ES}",
      Re: "\\operatorname{Re}",
      Dif: "\\operatorname{Dif}",
      VC: "\\operatorname{VC}"
    }
  }
};
</script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="style.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./lectura_07.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Tarificación</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Matemáticas Actuariales para Seguros Generales</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/pedroguarderas/seguros_generales" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="./Matemáticas-Actuariales-para-Seguros-Generales.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">index.html</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lectura_01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Materia</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lectura_02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Preliminares</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lectura_03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introducción a las operaciones de seguros</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lectura_04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Probabilidad y Estadística</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lectura_05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Distribuciones</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lectura_06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Modelos de pérdida agregada</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lectura_07.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Tarificación</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lectura_08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Modelos lineales generalizados (GLM)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lectura_09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Reservas técnicas</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lectura_10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Estimación de valores extremos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lectura_11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Bibliografía</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#medidas_riesgo" id="toc-medidas_riesgo" class="nav-link active" data-scroll-target="#medidas_riesgo"><span class="header-section-number">8.1</span> Medidas de riesgo</a></li>
  <li><a href="#tarificacion_grandes_terminos" id="toc-tarificacion_grandes_terminos" class="nav-link" data-scroll-target="#tarificacion_grandes_terminos"><span class="header-section-number">8.2</span> Tarificación en grandes términos</a></li>
  <li><a href="#prima" id="toc-prima" class="nav-link" data-scroll-target="#prima"><span class="header-section-number">8.3</span> Prima</a></li>
  <li><a href="#segmentación" id="toc-segmentación" class="nav-link" data-scroll-target="#segmentación"><span class="header-section-number">8.4</span> Segmentación</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/pedroguarderas/seguros_generales/edit/main/lectura_07.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/pedroguarderas/seguros_generales/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span id="tarificacion" class="quarto-section-identifier"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Tarificación</span></span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!------------------------------------------------------------------------------------------------->
<p>Una vez estimado los reclamos totales se trata de establecer una forma optima para estimar el valor que deberá pagar el asegurado, la <strong>prima</strong>, para que la compañia de seguros se haga cargo de riesgo. En esto debe incluirse algunas consideraciones adicionales, además de la estimación de la frecuencia y severidad de los reclamos, es también relevante tener en consideración otros valores asociados a diferentes costo, el retorno esperado por el inversionista y finalmente el rendimiento de inversiones. Todo lo anterior debe ser conjugado para obtener una adecuada estimación de la prima.</p>
<p>Adicionalmente, se debe tener en cuenta que el riesgo cubierto está sujeto a variaciones propias de la aleatoriedad del fenómeno y que puede presentar variaciones significativas respecto de la media, es decir, que la volatilidad del riesgo cubierto puede influenciar significativamente el pago total de los reclamos. Ante ello surge un concepto de vital importancia, el cual lo desarrollamos a continuación y se lo conoce como medidas de riesgo.</p>
<!------------------------------------------------------------------------------------------------->
<section id="medidas_riesgo" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="medidas_riesgo"><span class="header-section-number">8.1</span> Medidas de riesgo</h2>
<div class="thmbox">
<div id="dmedriskcohe" class="definition" name="Medida de riesgo coherente">
<p>Una <strong>medida de riesgo coeherente</strong> es una función <span class="math inline">\(\rho: \R \longrightarrow \R\)</span>, que satisface la siguientes propiedades:</p>
<ol type="1">
<li><p><strong>Normalización</strong>, el riesgo de nada es nada <span class="math display">\[
\rho( 0 ) = 0
\]</span></p></li>
<li><p><strong>Homogenidad positiva</strong>, el riesgo crece con la escala, así para cualquier <span class="math inline">\(a &gt; 0\)</span> <span class="math display">\[
\rho( a X ) = a \rho( X )
\]</span></p></li>
<li><p><strong>Invarianza ante las traslaciones</strong>, para cualquier <span class="math inline">\(a &gt; 0\)</span> <span class="math display">\[
\rho( \alpha X + a ) = \rho( \alpha X ) + a
\]</span></p></li>
<li><p><strong>Monotonicidad</strong>, Si <span class="math inline">\(X \leq Y\)</span> <span class="math display">\[
\rho( X ) \leq \rho( Y )
\]</span></p></li>
<li><p><strong>Sub-aditividad</strong>, el diversificar el riesgo es menor a la suma de los riesgos independientes <span class="math display">\[
\rho( X + Y ) \leq \rho( X ) + \rho( Y )
\]</span></p></li>
</ol>
</div>
</div>
<p>En lo que continúa citamos algunas de las medidas de riesgo usualmente utilizadas.</p>
<div class="thmbox">
<div id="dVaR" class="definition" name="Valor en riesgo">
<p>Dada una variable aleatoria a valores reales <span class="math inline">\(X\)</span>, el <strong>valor en riesgo</strong> (value at risk) de <span class="math inline">\(X\)</span> al nivel de probabilidad <span class="math inline">\(\alpha \in (0,1)\)</span> está dado por <span class="math display">\[
\VaR_{\alpha}( X ) = \inf\left\{ x \in \R \middle| F_X( x ) &gt; \alpha \right\}
\]</span></p>
</div>
</div>
<div class="thmbox">
<div id="varinv" class="proposition">
<p>Si la función de distribución acumulada <span class="math inline">\(F_X\)</span> es continua, entonces <span class="math inline">\(\VaR_{\alpha}( X ) = F_X^{-1}( \alpha )\)</span>.</p>
</div>
</div>
<p>Por otra parte, <span class="math inline">\(\VaR_{\alpha}\)</span> para cualquier <span class="math inline">\(\alpha\)</span> no es una medida de riesgo sub-aditiva.</p>
<p>El método directo para el calcular el <span class="math inline">\(\VaR_\alpha\)</span> es directamente atacando el problema de encontrar el ínfimo, esto es un problema de optimización que puede tener sus complicaciones, ya que muchas de las veces la distribución acumulada <span class="math inline">\(F\)</span> no es conocida o fácilmente computable. Incluso en el caso cuando la función de distribución <span class="math inline">\(F\)</span> es continua, resta el problema de poder invertir esta función.</p>
<p>Otra forma es acudir a los métodos de simulación estocástica, partiendo de una muestra <span class="math inline">\(X_1, \ldots, X_n\)</span> y calculando de forma aproximada <span class="math display">\[
\VaR_{\alpha}( X ) \approx F_n^{-1}( \alpha )
\]</span> En principio no sabemos si esta aproximación será consistente conforme se aumenta el tamaño de la muestra, sin embargo para ello tenemos la siguiente proposición, la cual nos da una certeza al respecto.</p>
<div class="thmbox">
<div id="appoxvar" class="proposition">
<p>Si consideramos una familia de variables aleatorias <span class="math inline">\(\{X_n\}_{n\in \N}\)</span> i.i.d con distribución común <span class="math inline">\(F\)</span> no necesariamente continua, entonces el percentil empírico de orden <span class="math inline">\(\alpha\)</span>, <span class="math inline">\(\xi_{n,\alpha} = F_n^{-1}( \alpha )\)</span>, que se puede extraer a partir de las <span class="math inline">\(n\)</span> primeras variables en la muestra converge en probabilidad al valor <span class="math inline">\(\xi_{\alpha} = \VaR_{\alpha}( X )\)</span>, correspondiente al valor en riesgo.</p>
</div>
</div>
<div class="proof">
<p><span class="proof-title"><em>Proof</em>. </span>Utilizando la versión unilateral de la desigualdad @ref(thm:ddkw), podemos establecer las siguientes acotaciones <span class="math display">\[
\begin{split}
P\left( \xi_{n,\alpha}- \xi_{\alpha} &gt; \varepsilon \right)
&amp; = P\left( \xi_{n,\alpha} &gt;  \xi_{\alpha} + \varepsilon \right) \\
&amp; = P\left( F_n( \xi_{n,\alpha} ) &gt;  F_n( \xi_{\alpha} + \varepsilon ) \right) \\
&amp; = P\left( F( \xi_{\alpha} + \varepsilon ) + \alpha &gt; F( \xi_{\alpha} + \varepsilon ) + F_n( \xi_{\alpha} + \varepsilon ) \right) \\
&amp; = P\left( F( \xi_{\alpha} + \varepsilon ) - F_n( \xi_{\alpha} + \varepsilon ) &gt; F( \xi_{\alpha} + \varepsilon ) - \alpha \right) \\
&amp; \leq P\left( \underset{x \in \R}{\sup} \left( F - F_n \right) &gt; F( \xi_{\alpha} + \varepsilon ) - \alpha \right) \\
&amp; \leq Ce^{-2n \left( F( \xi_{\alpha} + \varepsilon ) - \alpha \right) ^2 }
\end{split}
\]</span></p>
<p><span class="math display">\[
\begin{split}
P\left( \xi_{n,\alpha} - \xi_{\alpha} &lt; -\varepsilon \right)
&amp; = P\left( \xi_{n,\alpha} &lt;  \xi_{\alpha} - \varepsilon \right) \\
&amp; = P\left( F_n( \xi_{n,\alpha} ) &lt;  F_n( \xi_{\alpha} - \varepsilon ) \right) \\
&amp; = P\left( F( \xi_{\alpha} - \varepsilon ) + \alpha &lt; F( \xi_{\alpha} - \varepsilon ) + F_n( \xi_{\alpha} - \varepsilon ) \right) \\
&amp; = P\left( F_n( \xi_{\alpha} - \varepsilon ) - F( \xi_{\alpha} - \varepsilon ) &gt; \alpha - F( \xi_{\alpha} - \varepsilon ) \right) \\
&amp; \leq P\left( \underset{x \in \R}{\sup} \left( F - F_n \right) &gt; \alpha - F( \xi_{\alpha} - \varepsilon ) \right) \\
&amp; \leq Ce^{-2n \left( \alpha - F( \xi_{\alpha} - \varepsilon ) \right) ^2 }
\end{split}
\]</span> Uniendo ambos resultados concluimos <span class="math display">\[
P\left( \left| \xi_{n,\alpha}- \xi_{\alpha} \right| &gt; \varepsilon \right)
\leq 2 C e^{-2n \min\left( F( \xi_{\alpha} + \varepsilon ) - \alpha, \alpha - F( \xi_{\alpha} - \varepsilon ) \right)^2 }
\]</span> Podemos concluir con toda confianza que el percentil <span class="math inline">\(\xi_{n,\alpha}\)</span> que se obtiene de la distribución empírica se aproxima en probabilidad al percentil <span class="math inline">\(\xi_{\alpha} = \VaR_{\alpha}( X )\)</span></p>
</div>
<!------------------------------------------------------------------------------------------------->
<p><strong>Algoritmo de simulación</strong></p>
<p>Con lo anterior se puede crear un algoritmo de simulación estocástico que precisamente contemple el respectivo nivel de convergencia, de ahí que la demostración de la proposición anterior no es inútil, ya que de la misma resulta un criterio para determinar el número de simulaciones que se desea calcular.</p>
<p>Fijamos un valor <span class="math inline">\(\delta &gt; 0\)</span> el cual acota la probabilidad del evento que mide el error de aproximación, i.e.&nbsp;<span class="math inline">\(P\left( \left| \xi_{n,\alpha} - \xi_{\alpha} \right| &gt; \varepsilon \right) \leq \delta\)</span> y tomando en cuenta la desigualdad en @ref(prp:appoxvar). <span class="math display">\[
\begin{split}
2 C e^{-2n \min\left( F( \xi_{\alpha} + \varepsilon ) - \alpha, \alpha - F( \xi_{\alpha} - \varepsilon ) \right)^2 } &amp; \leq \delta \\
-2n \min\left( F( \xi_{\alpha} + \varepsilon ) - \alpha, \alpha - F( \xi_{\alpha} - \varepsilon ) \right)^2
&amp; \leq \log( \delta )-\log(2) - \log( C ) \\
n &amp; \geq -\frac{\log( \delta )-\log(2)-\log( C )}{2 \min\left( F( \xi_{\alpha} + \varepsilon ) - \alpha, \alpha - F( \xi_{\alpha} - \varepsilon ) \right)^2}
\end{split}
\]</span> Como se evidencia <span class="math inline">\(n\)</span> crece en orden cuadrático proporcional a la aproximación dada por <span class="math inline">\(\min\left( F( \xi_{\alpha} + \varepsilon ) - \alpha, \alpha - F( \xi_{\alpha} - \varepsilon ) \right)\)</span> alrededor del percentile <span class="math inline">\(\alpha\)</span>. Lo cual no es un resultado muy alentador.</p>
<p>Si se establece un valor <span class="math inline">\(\widetilde{\varepsilon} &gt; 0\)</span> para el término <span class="math inline">\(\widetilde{\varepsilon} \leq \min\left( F( \xi_{\alpha} + \varepsilon ) - \alpha, \alpha - F( \xi_{\alpha} - \varepsilon ) \right)\)</span>, la expresión anterior se modifica a la siguiente <span class="math display">\[
n \geq -\frac{\log( \delta )-\log(2)-\log(C)}{2 \widetilde{\varepsilon}^2}
\]</span> Claramente la cantidad de simulaciones que se debe realizar para lograr una aproximación de orden <span class="math inline">\(\varepsilon\)</span>, se requiere un orden de simulaciones cuadrático inverso a este valor. El ejemplo numérico a continuación es aleccionador al respecto de la dificultad numérica de aproximar un cálculo de <span class="math inline">\(VaR_\alpha\)</span>.</p>
<p>Entonces los pasos del pseudo-algoritmo de simulación estarán dados por:</p>
<ol type="1">
<li><p>Fijar el nivel de confianza al que se desea calcular <span class="math inline">\(0 &lt; \alpha &lt; 1\)</span></p></li>
<li><p>Fijar el nivel probabilidad para los errores de aproximación <span class="math inline">\(\delta &gt; 0\)</span></p></li>
<li><p>Fijar el nivel erro <span class="math inline">\(\widetilde{\varepsilon} &gt; 0\)</span></p></li>
<li><p>Estimar el posible error de estimación <span class="math inline">\(\varepsilon &gt; 0\)</span></p></li>
<li><p>Buscar el número de simulaciones adecuadas <span class="math inline">\(n \in \N\)</span> que aseguren con una probabilidad menor a <span class="math inline">\(\delta\)</span> que se presente errores de aproximación superiores a <span class="math inline">\(\varepsilon\)</span>.</p></li>
<li><p>Generar una muestra de tamaño <span class="math inline">\(n\)</span> de la variable aleatoria, i.e.&nbsp;<span class="math inline">\(X_1, \ldots, X_n\)</span></p></li>
<li><p>Calcular el percentil de la <span class="math inline">\(\alpha\)</span> de la muestra <span class="math inline">\(\xi_{n,\alpha} = F_n^{-1}( \alpha )\)</span></p></li>
</ol>
<p>Esta simulación solo genera una sola estimación del <span class="math inline">\(\VaR_{\alpha}(X)\)</span>, se puede repetir algunas veces esta algoritmo para tener más valores y sacar la media de estos como estimador.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>u <span class="ot">&lt;-</span> <span class="dv">7</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>s <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>Fd <span class="ot">&lt;-</span> <span class="cf">function</span>( x ) <span class="fu">plnorm</span>( x, <span class="at">meanlog =</span> u, <span class="at">sdlog =</span> s )</span>
<span id="cb1-4"><a href="#cb1-4"></a>Fdi <span class="ot">&lt;-</span> <span class="cf">function</span>( x ) <span class="fu">qlnorm</span>( x, <span class="at">meanlog =</span> u, <span class="at">sdlog =</span> s )</span>
<span id="cb1-5"><a href="#cb1-5"></a>Rd <span class="ot">&lt;-</span> <span class="cf">function</span>( x ) <span class="fu">rlnorm</span>( <span class="at">n =</span> n, <span class="at">meanlog =</span> u, <span class="at">sdlog =</span> s )</span>
<span id="cb1-6"><a href="#cb1-6"></a>alpha <span class="ot">&lt;-</span> <span class="fl">0.98</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>delta <span class="ot">&lt;-</span> <span class="fl">1e-2</span></span>
<span id="cb1-8"><a href="#cb1-8"></a>hepsilon <span class="ot">&lt;-</span> <span class="fl">0.2e-4</span></span>
<span id="cb1-9"><a href="#cb1-9"></a></span>
<span id="cb1-10"><a href="#cb1-10"></a>q <span class="ot">&lt;-</span> <span class="fu">Fdi</span>( alpha )</span>
<span id="cb1-11"><a href="#cb1-11"></a>epsilon <span class="ot">&lt;-</span> <span class="fu">max</span>( <span class="fu">Fdi</span>( hepsilon <span class="sc">+</span> alpha ) <span class="sc">-</span> q, q <span class="sc">-</span> <span class="fu">Fdi</span>( alpha <span class="sc">-</span> hepsilon ) )</span>
<span id="cb1-12"><a href="#cb1-12"></a>C <span class="ot">&lt;-</span> <span class="fl">5.001e-3</span> <span class="co"># seleccionado acorde a cada problema</span></span>
<span id="cb1-13"><a href="#cb1-13"></a>n <span class="ot">&lt;-</span> <span class="fu">round</span>( <span class="sc">-</span>( <span class="fu">log</span>( delta ) <span class="sc">-</span> <span class="fu">log</span>( <span class="dv">2</span> ) <span class="sc">-</span> <span class="fu">log</span>( C ) ) <span class="sc">/</span> ( <span class="dv">2</span> <span class="sc">*</span> hepsilon<span class="sc">^</span><span class="dv">2</span> ), <span class="dv">0</span> )</span>
<span id="cb1-14"><a href="#cb1-14"></a></span>
<span id="cb1-15"><a href="#cb1-15"></a>m <span class="ot">&lt;-</span> <span class="fl">1e3</span></span>
<span id="cb1-16"><a href="#cb1-16"></a>qn <span class="ot">&lt;-</span> <span class="fu">sapply</span>( <span class="dv">1</span><span class="sc">:</span>m, <span class="at">FUN =</span> <span class="cf">function</span>( i ) <span class="fu">as.numeric</span>( <span class="fu">quantile</span>( <span class="fu">Rd</span>( n ), <span class="at">probs =</span> alpha ) ) )</span>
<span id="cb1-17"><a href="#cb1-17"></a></span>
<span id="cb1-18"><a href="#cb1-18"></a>P <span class="ot">&lt;-</span> <span class="fu">mean</span>( <span class="fu">abs</span>( qn <span class="sc">-</span> q ) <span class="sc">&gt;</span> epsilon ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><span class="math display">\[
P\left( \left| \xi_{n,\alpha}- \xi_{\alpha} \right| &gt; \varepsilon \right) =
0.93100000
\]</span> Como se observa se tendrá que realizar muchas simulaciones más para llegar a tener en probabilidad un error de aproximación adecuado.</p>
<div class="thmbox">
<div id="dTVaR" class="definition" name="Valor en riesgo en la cola">
<p>Dada una variable aleatoria a valores reales <span class="math inline">\(X\)</span>, el <strong>valor en riesgo en la cola</strong> (tail value at risk) de <span class="math inline">\(X\)</span> al nivel de probabilidad <span class="math inline">\(\alpha \in (0,1)\)</span> está dado por <span class="math display">\[
\TVaR_{\alpha}( X ) = \frac{1}{1-\alpha} \int\limits_{\alpha}^1 \VaR_u( X )\ du
\]</span></p>
</div>
</div>
<p>Es de notar que si se toma una variable aleatoria uniforme <span class="math inline">\(U \rightsquigarrow U(\alpha,1)\)</span>, tenemos que el valor en riesgo en la cola, puede ser expresado como la esperanza. <span class="math display">\[
\TVaR_{\alpha}( X ) = \E\left[ \VaR_U( X ) \right]
\]</span> De ahí que se una forma de calcular el valor en riesgo en la cola es utilizando una simulación estocástica que aproveche el @ref(thm:twln). Así se puede generar una muestra <span class="math inline">\(U_1, \ldots, U_m\)</span> de la distribución uniforme <span class="math inline">\(U(\alpha,1)\)</span> y para cada uno de estos valores se calcula por simulación el <span class="math inline">\(\xi_{n,U_1} \approx \VaR_{U_1}( X ), \ldots, \xi_{n,U_n} \approx  \VaR_{U_n}( X )\)</span>, luego aproximar utilizando la media empírica <span class="math display">\[
\TVaR_{\alpha}( X ) \approx \frac{1}{m} \sum\limits_{i=1}^m \xi_{n,U_i}
\]</span> Pero como ya se mencionó, esta aproximación puede ser realmente costosa en términos computacionales; por tal razón, se requiere utilizar métodos numéricos más eficientes.</p>
<div class="thmbox">
<div id="TVaRcohe" class="proposition" name="Coherencia de la medida TVaR">
<p>La medida de riesgo <span class="math inline">\(\TVaR_{\alpha}\)</span> es una medida de riesgo coherente si la variable aleatoria sobre la cual se mide es una variable aleatoria continua.</p>
</div>
</div>
<div class="thmbox">
<div id="dCTE" class="definition" name="Esperanza condicional en la cola">
<p>Dada una variable aleatoria a valores reales <span class="math inline">\(X\)</span>, la <strong>esperanza condicional en la cola</strong> (conditional tail expectation) de <span class="math inline">\(X\)</span> al nivel de probabilidad <span class="math inline">\(\alpha \in (0,1)\)</span> está dado por <span class="math display">\[
\CTE_{\alpha}( X ) = \E\left[ X \middle| X &gt; \VaR_{\alpha}( X ) \right]
\]</span></p>
</div>
</div>
<div class="thmbox">
<div id="eqtvarcte" class="proposition">
<p>Si la función de distribución acumulada <span class="math inline">\(F_X\)</span> de la variable aleatoria <span class="math inline">\(X\)</span> es continua, entonces se tiene la siguiente igualdad <span class="math display">\[
\CTE_{\alpha}( X ) = \TVaR_{\alpha}( X )
\]</span></p>
</div>
</div>
<div class="thmbox">
<div id="dCVaR" class="definition" name="Valor en riesgo condicionado">
<p>Dada una variable aleatoria a valores reales <span class="math inline">\(X\)</span>, el <strong>valor en riesgo condicionado</strong> (conditional value at risk) de <span class="math inline">\(X\)</span> al nivel de probabilidad <span class="math inline">\(\alpha \in (0,1)\)</span> está dado por <span class="math display">\[
\CVaR_{\alpha}( X ) = \E\left[ X - \VaR_{\alpha}( X ) \middle| X &gt; \VaR_{\alpha}( X ) \right]
= \CTE_{\alpha}( X ) - \VaR_{\alpha}( X )
\]</span></p>
</div>
</div>
<div class="thmbox">
<div id="dES" class="definition" name="Déficit esperado">
<p>Dada una variable aleatoria a valores reales <span class="math inline">\(X\)</span>, el <strong>déficit esperado</strong> (expected shortfall) de <span class="math inline">\(X\)</span> al nivel de probabilidad <span class="math inline">\(\alpha \in (0,1)\)</span> está dado por <span class="math display">\[
\ES_{\alpha}( X ) = \E\left[ \max\left( X - \VaR_{\alpha}( X ), 0 \right) \right]
\]</span></p>
</div>
</div>
<div class="thmbox">
<div id="dEVaR" class="definition" name="Valor en riesgo entrópico">
<p>Dada una variable aleatoria a valores reales <span class="math inline">\(X\)</span>, el <strong>valor en riesgo entrópico</strong> (entropic value at risk) de <span class="math inline">\(X\)</span> al nivel de probabilidad <span class="math inline">\(\alpha \in (0,1)\)</span> está dado por <span class="math display">\[
\EVaR_{\alpha}( X ) = \inf\left\{ \frac{1}{t} \ln\left( \frac{M_X( t )}{1 - \alpha} \right) \middle| t &gt; 0 \right\}
\]</span></p>
</div>
</div>
<div class="thmbox">
<div id="EVaRcohe" class="proposition" name="Coherencia de la medida EVaR">
<p>La medida de riesgo <span class="math inline">\(\EVaR_{\alpha}\)</span> es una medida de riesgo coherente.</p>
</div>
</div>
<div id="l7ex2" class="example">
<p>Podemos considerar el caso particular donde todos los reclamos se suponen independientes e idénticamente distribuidos (i.i.d), en este caso con distribución <span class="math inline">\(X_i \rightsquigarrow LN(\mu,\sigma)\)</span></p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">set.seed</span>(<span class="dv">94312</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a>u <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>s <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>n <span class="ot">&lt;-</span> <span class="fl">1e4</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>X <span class="ot">&lt;-</span> <span class="fu">rlnorm</span>( n, <span class="at">meanlog =</span> u, <span class="at">sdlog =</span> s )</span>
<span id="cb2-6"><a href="#cb2-6"></a>alpha <span class="ot">&lt;-</span> <span class="fu">seq</span>( <span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.01</span> ) </span>
<span id="cb2-7"><a href="#cb2-7"></a>VaRX <span class="ot">&lt;-</span> <span class="fu">quantile</span>( X, <span class="at">probs =</span> alpha, <span class="at">names =</span> <span class="cn">FALSE</span> )</span>
<span id="cb2-8"><a href="#cb2-8"></a>TVaRX <span class="ot">&lt;-</span> <span class="fu">sapply</span>( </span>
<span id="cb2-9"><a href="#cb2-9"></a>  <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>( VaRX ), </span>
<span id="cb2-10"><a href="#cb2-10"></a>  <span class="at">FUN =</span> <span class="cf">function</span>( i ) <span class="fu">ifelse</span>( alpha[ i ] <span class="sc">&lt;</span> <span class="dv">1</span>, ( <span class="dv">1</span> <span class="sc">/</span> ( <span class="dv">1</span> <span class="sc">-</span> alpha[ i ] ) ) <span class="sc">*</span> <span class="fu">mean</span>( X <span class="sc">*</span> ( X <span class="sc">&gt;</span> VaRX[ i ] ) ), <span class="fu">max</span>( X ) ) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>plt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>  <span class="fu">geom_point</span>( <span class="fu">aes</span>( <span class="at">x =</span> alpha, <span class="at">y =</span> VaRX ), <span class="at">colour =</span> <span class="st">'darkred'</span> ) <span class="sc">+</span> </span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="fu">geom_point</span>( <span class="fu">aes</span>( <span class="at">x =</span> alpha, <span class="at">y =</span> TVaRX ), <span class="at">colour =</span> <span class="st">'orange'</span> ) <span class="sc">+</span> </span>
<span id="cb3-4"><a href="#cb3-4"></a>  <span class="fu">xlab</span>( <span class="fu">TeX</span>( <span class="st">"$</span><span class="sc">\\</span><span class="st">alpha$"</span> ) ) <span class="sc">+</span> </span>
<span id="cb3-5"><a href="#cb3-5"></a>  <span class="fu">ylab</span>( <span class="fu">TeX</span>( <span class="st">"$VaR,TVaR$"</span> ) ) <span class="sc">+</span> </span>
<span id="cb3-6"><a href="#cb3-6"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="fu">plot</span>( plt )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="lectura_07_files/figure-html/l7g1-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
</div>
<!------------------------------------------------------------------------------------------------->
</section>
<section id="tarificacion_grandes_terminos" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="tarificacion_grandes_terminos"><span class="header-section-number">8.2</span> Tarificación en grandes términos</h2>
<p>La tarificación que conlleva a la selección de la prima <span class="math inline">\(\Pi\)</span> debe tomar en cuenta como se manejan y equilibran los activos y pasivos en el negocio asegurador.</p>
<p><strong>Pasivos</strong></p>
<ol type="1">
<li><p>Capitales propios</p></li>
<li><p>Reservas técnicas</p></li>
<li><p>Reservas para otros riesgos</p></li>
<li><p>Deudas o depósitos en dinero recibidos por cesiones</p></li>
<li><p>Otras deudas por pagar</p></li>
</ol>
<p><strong>Activos</strong></p>
<ol type="1">
<li><p>Capital suscrito no desembolsado</p></li>
<li><p>Activos no materiales</p></li>
<li><p>Inversiones</p></li>
<li><p>Parte de reaseguros en reservas técnicas</p></li>
<li><p>Deudas por cobrar</p></li>
<li><p>Otros activos</p></li>
</ol>
<p>En el proceso de tarificación no es pertinente incluir todos los activos de la empresa, ya que muchos de estos no tienen la liquidez necesaria como para ser considerados un tipo de activo viable para la tarificación. Tampoco se toma en cuenta el dinero recibido por la cesión de primas en un ramo en particular, ya que esto constituye un nivel más arriba propio del negocio reasegurador.</p>
<div class="thmbox">
<div id="dpruin" class="definition" name="Probabilidad de ruina">
<p>En términos generales se busca equilibrar el resultado operativo del ramo de negocio <span class="math inline">\(R\)</span> a lo largo de la vida del ramo. El resultado <span class="math inline">\(R\)</span> a su vez está dado por la siguiente relación: <span class="math display">\[
R = \Pi + I - S - G - K
\]</span> donde las variables a considerarse en principio son:</p>
<ol type="1">
<li><p><span class="math inline">\(\Pi\)</span> Ingreso por primas</p></li>
<li><p><span class="math inline">\(I\)</span> Ingreso por inversiones</p></li>
<li><p><span class="math inline">\(S\)</span> Pago de siniestros</p></li>
<li><p><span class="math inline">\(G\)</span> Gastos agregados, incluyendo gastos de emisión, operativos, gastos por reclamos</p></li>
<li><p><span class="math inline">\(K\)</span> Coste de capital, esencialmente es el retorno que se espera sobre el capital invertido por los inversores para mantener el nivel de solvencia del ramo.</p></li>
</ol>
<p>En varias ocasiones el ciclo del negocio puede ser corto plazo y no permite considerar un ingreso por inversiones <span class="math inline">\(I = 0\)</span>. <span class="math display">\[
R = \Pi - S - G - K
\]</span></p>
<p>Sería ideal que a lo largo de la vida del ramo el resultado mantenga <span class="math inline">\(R &gt; 0\)</span>, pero al tratarse de un negocio que depende de la aleatoriedad de los reclamos, es bastante complicado encontrar un costo de capital <span class="math inline">\(K\)</span> y una prima <span class="math inline">\(\Pi\)</span> que siempre asegure ante todo escenario que se mantenga la positividad. Ante este riesgo continuo se busca minimizar la <strong>probabilidad de ruina</strong>, es decir, acotar la probabilidad del evento <span class="math inline">\(R &lt; 0\)</span> a un nivel de confianza <span class="math inline">\(\alpha &gt; 0\)</span> adecuado <span class="math display">\[
P( R &lt; 0 ) &lt; \alpha
\]</span></p>
</div>
</div>
<p>Muchas de las veces se parte del principio de equilibrio financiero @ref(sec:equifin), donde se busca la igualdad <span class="math inline">\(\E[R] = 0\)</span>, la misma implica la siguiente relación: <span class="math display">\[
\begin{split}
0 &amp; = \E[R] \\
0 &amp; = \E[R\mid R \geq 0]P( R \geq 0 ) + \E[R\mid R &lt; 0]P( R &lt; 0 ) \\
\E[R\mid R \geq 0]P( R \geq 0 ) &amp; = -\E[R\mid R &lt; 0]P( R &lt; 0 ) \\
\frac{P( R &lt; 0 )}{P( R \geq 0 ) } &amp; = -\frac{\E[R\mid R \geq 0]}{\E[R\mid R &lt; 0]}
\end{split}
\]</span> en el equilibrio financiero, la proporción de la probabilidad de ruina respecto de la probabilidad de no estar en ruina es igual a la proporción entre la esperanza condicional del resultado cuando no se produce la ruina respecto de la esperanza condicional cuando si se produce la ruina.</p>
<p>Un modelo puede estar equilibrado financieramente <span class="math inline">\(\E[R] = 0\)</span>, pero se desconoce la probabilidad de ruina <span class="math inline">\(P( R &lt; 0)\)</span>, esta podría ser muy grande. La razón anterior permite estimar la relevancia de la probabilidad de ruina en un modelo equilibrado, con el uso de las esperanzas condicionales.</p>
<p>Es usual asumir que la única parte aleatoria de <span class="math inline">\(R\)</span> viene dada por el valor de los reclamos totales, en razón de esto se tiene: <span class="math display">\[
\E[ R ]
= \E[ \Pi - S - G - K ]
= \Pi - \E[S] - G - K
\]</span></p>
<p>El <strong>coste de capital</strong> <span class="math inline">\(K\)</span> como ya lo mencionamos es el retorno mínimo esperado por los inversores sobre el capital invertido. Usualmente este capital puede ser visto como un porcentaje <span class="math inline">\(r &gt; 0\)</span> que se toma sobre el capital colocado para mantener un nivel de solvencia adecuado sobre el valor esperado <span class="math inline">\(\E[S]\)</span> del total de reclamos <span class="math inline">\(S\)</span>. Para ello se suele utilizar precisamente una medida de <strong>medida de riesgo</strong> <span class="math inline">\(\rho\)</span> que permita mantener el nivel de solvencia. <span class="math display">\[
K = r\left( \rho( S ) - \E[S] \right)
\]</span> con esta perspectiva <span class="math display">\[
\E[ R ]
= \E\left[ \Pi - S - G - r\left( \rho( S ) - \E[S] \right) \right]
= \Pi - \E[S] - G - r \left( \rho(S) - \E[S] \right)
\]</span></p>
<div class="thmbox">
<div id="dpricing" class="definition" name="Tarificación (Pricing)">
<p>Lo que se busca es evitar la ruina y por tanto se busca cubrirse ante el evento <span class="math inline">\(R &lt; 0\)</span>, desde una perspectiva probabilista esto se puede realizar seleccionando un nivel de cobertura <span class="math inline">\(\alpha &gt; 0\)</span>, que acote la probabilidad del evento de ruina. <span class="math display">\[
P( R &lt; 0 )
= P( \Pi - S - G - K &lt; 0 )
= P\left( \Pi - S - G - r\left( \rho(S) - \E[S] \right) &lt; 0 \right) &lt; \alpha.
\]</span></p>
<p>De la relación anterior se observa que una vez seleccionado el nivel de cobertura <span class="math inline">\(\alpha\)</span> y la medida de riesgo <span class="math inline">\(\rho\)</span>, las variables correspondientes a la prima <span class="math inline">\(\Pi\)</span> y a los gastos <span class="math inline">\(G\)</span> quedan libres, de ahí resulta un margen que permite seleccionar la prima más óptima para un producto de seguro, así como también optimizar los gastos <span class="math inline">\(G\)</span>. Este proceso de selección es precisamente lo que llamamos en este contexto como <strong>tarificación</strong> (pricing).</p>
</div>
</div>
<p>Razonando un poco más al respecto, si asumimos que se dispone de la distribución acumulada <span class="math inline">\(F_S\)</span> de <span class="math inline">\(S\)</span>, se puede obtener las siguientes expresiones: <span class="math display">\[
\begin{split}
P\left( \Pi - S - G - K &lt; 0 \right) &amp; &lt; \alpha \\
P\left( S &gt; \Pi - G - K \right) &amp; &lt; \alpha  \\
1 - P\left( S \leq \Pi - G - K \right) &amp; &lt; \alpha \\
P\left( S \leq \Pi - G - K \right) &amp; &gt; 1 - \alpha \\
F_S\left( \Pi - G - K \right) &amp; &gt; 1 - \alpha \\
F_S\left( \Pi - G - K \right) &amp; \in \left( 1 - \alpha, +\infty \right), \qquad
\text{la desigualdad anterior es equivalente a la inclusión}\\
\Pi - G - K &amp; \in F_S^{-1}\left( \left( 1 - \alpha, +\infty \right) \right),\qquad
\text{por propiedades de la inversión de funciones}\\
\Pi &amp; \geq G + K + F_S^{-1}\left( 1 - \alpha \right), \qquad
\text{como $F_S$ es creciente, mínimo se debe satisfacer la desigualdad}
\end{split}
\]</span> En especial cuando <span class="math inline">\(K = r\left( \rho(S) - \E[S] \right)\)</span>, la última desigualdad toma la forma <span class="math display">\[
\Pi \geq G + r\left( \rho(S) - \E[S] \right) + F_S^{-1}\left( 1 - \alpha \right)
\]</span></p>
<p>Así, en el caso anterior si se utiliza como medida de riesgo al mismo nivel de confianza <span class="math inline">\(1 - \alpha\)</span>, esto es <span class="math inline">\(\rho( S ) = \VaR_{1-\alpha}( S ) = F_S^{-1}( 1 - \alpha )\)</span>, la última igualdad se cumple si <span class="math inline">\(S\)</span> es una variable aleatoria continua. <span class="math display">\[
\Pi \geq G + (1 + r) F_S^{-1}\left( 1 - \alpha \right) - r \E[S]
\]</span></p>
<p>Si en caso los gastos <span class="math inline">\(G\)</span> son proporcionales a la prima <span class="math inline">\(G = \gamma \Pi\)</span>, para una constante <span class="math inline">\(\gamma &gt; 0\)</span>, y seguramente <span class="math inline">\(\gamma &lt; 1\)</span> ya que es de esperar gastos no mayores a la misma prima, sino esto estaría en una situación insostenible donde los gastos son mayores a la cobertura del riesgo. Las desigualdades anteriores toman la forma: <span class="math display">\[
\begin{split}
\Pi &amp; \geq \frac{r}{1 - \gamma} K + \frac{1}{1 - \gamma} F_S^{-1}\left( 1 - \alpha \right) \\
\Pi &amp; \geq \frac{r}{1 - \gamma} \left( \rho(S) - \E[S] \right) + \frac{1}{1 - \gamma} F_S^{-1}\left( 1 - \alpha \right) \\
\Pi &amp; \geq \frac{1 + r}{1 - \gamma} F_S^{-1}\left( 1 - \alpha \right) -  \frac{r}{1 - \gamma} \E[S]
\end{split}
\]</span></p>
<p>De lo anterior se observa, que un buen inicio para estimar la prima de riesgo es ciertamente usar la medida <span class="math inline">\(\VaR_{1-\alpha}\)</span> al nivel adecuado de confianza <span class="math inline">\(\alpha\)</span>.</p>
<!------------------------------------------------------------------------------------------------->
</section>
<section id="prima" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="prima"><span class="header-section-number">8.3</span> Prima</h2>
<p>La prima es la cantidad de dinero que un individuo o entidad pagan por una póliza de seguro, la cual está diseñada para cubrir ciertos riesgos personales o comerciales.</p>
<p>La determinación de las primas por parte del asegurador hace uso de la mutualización del riesgo y diversificación, para así poder asumir la transferencia del riesgo por parte de sus asegurados. Así por tanto, es deseable que cualquier método que se utilice para la estimación de primas, se satisfaga, algunas propiedades importantes.</p>
<p>Sin consideramos dos riesgos a cubrir <span class="math inline">\(S_1\)</span> y <span class="math inline">\(S_2\)</span>, entonces la función que estima <span class="math inline">\(\rho\)</span> las primas sería aconsejable satisfaga las siguientes propiedades.</p>
<ol type="1">
<li><p>Si se decide cubrir por completo dos riesgos <span class="math inline">\(S_1\)</span> y <span class="math inline">\(S_2\)</span> en un mismo producto, el valor de la prima deberá ser menor o igual al valor que se resultaría de cubrir cada uno de los riesgos con productos separados. <span class="math display">\[
\rho( S_1 + S_2 ) \leq \rho( S_1 ) + \rho( S_2 )
\]</span></p></li>
<li><p>El asumir mayor riesgo debe tener como consecuencia el aumento de la prima <span class="math display">\[
\rho( S_1 ) \leq \rho( S_1 + S_2 )
\]</span> Esta propiedad implica que al configurar un producto de seguro con mejor cobertura, se espera una prima de mayor costo.</p></li>
<li><p>Si el riesgo a cubrir está limitado, es decir <span class="math inline">\(P( S \leq M ) = 1\)</span>, para un valor <span class="math inline">\(M &gt; 0\)</span>, entonces jamás la prima será superior a <span class="math inline">\(M\)</span> <span class="math display">\[
\rho( S ) \leq M
\]</span> Esto se traduce a que ningún asegurado estará interesado en adquirir una póliza para cubrir un riesgo por encima del valor total asegurado.</p></li>
</ol>
<p>Es así que hay algunos principios para la estimación de primas, aquí citamos algunos de los más conocidos:</p>
<ol type="1">
<li><p>Prima neta, o prima pura de riesgo <span class="math display">\[
  \Pi = \rho( S ) = \E[S] \approx \overline{S}
\]</span></p></li>
<li><p>Prima de riesgo con recargo sobre la esperanza matemática <span class="math display">\[
  \Pi = \rho( S ) = (1 + \rho) \E[S] \approx (1 + \rho) \overline{S}
\]</span></p></li>
<li><p>Prima de riesgo con recargo sobre la varianza <span class="math display">\[
  \Pi = \rho( S ) = \E[S] + \rho \V[S]
  \approx \overline{S} + \rho \sigma_S^2
\]</span></p></li>
<li><p>Prima de riesgo con recargo sobre la desviación <span class="math display">\[
  \Pi = \rho( S ) = \E[S] + \rho \sqrt{\V[S]}
  \approx \overline{S} + \rho \sigma_S
\]</span></p></li>
<li><p>Prima de riesgo con principio exponencial para <span class="math inline">\(t &gt; 0\)</span> <span class="math display">\[
  \Pi = \rho( S )
  = \frac{1}{2} \E\left[\exp(tS)\right]
  = \frac{1}{2} M_N\big( \ln M_X( t ) \big)
  \approx \frac{1}{m} \sum\limits_{i=1}^m \exp\left(t S_i\right)
\]</span></p></li>
<li><p>Prima de percentiles para un valor de confianza <span class="math inline">\(\alpha \in [0,1]\)</span> o prima de valor en riesgo <span class="math inline">\(VaR_\alpha\)</span> <span class="math display">\[
  \Pi = \rho( S ) = \VaR_\alpha( S ) =  F_S^{-1}( \alpha )
\]</span></p></li>
<li><p>Prima de valor en riesgo en la cola (Tail Value at Risk) <span class="math inline">\(TVaR_\alpha\)</span>. Es el promedio uniforme de todos los valores en riesgo <span class="math inline">\(VaR_u\)</span>, con <span class="math inline">\(u \geq \alpha\)</span>. <span class="math display">\[
  \Pi = \rho( S ) = \TVaR_\alpha( S ) = \frac{1}{1-\alpha} \int\limits_{\alpha}^1 \VaR_u( S )\ du
\]</span></p></li>
</ol>
<div id="l7ex1" class="example">
<p>Consideremos el caso donde todos los siniestros son igualmente distribuidos e independientes (i.i.d) <span class="math inline">\(X_i \rightsquigarrow Gamma( \alpha_i, \theta )\)</span>, para <span class="math inline">\(i \in \{1,\ldots,n\}\)</span>, el número de unidades aseguradas está dado por <span class="math inline">\(n \in \N\)</span>. Utilizaremos el modelo individual para la agregación de los reclamos y obtener el reclamo total <span class="math inline">\(S = \sum\limits_{i=1}^n X_i\)</span>.</p>
<p>Como todas las variables <span class="math inline">\(X_i\)</span> siguen una ley <span class="math inline">\(Gamma( \alpha_i, \theta )\)</span>, sabemos que la familia <span class="math inline">\(Gamma\)</span> es cerrada por adición, es decir, a suma de variables aleatorias con ley <span class="math inline">\(Gamma\)</span> también sigue una ley <span class="math inline">\(Gamma\)</span>. En este caso en particular para el reclamo total tenemos que <span class="math inline">\(S \rightsquigarrow Gamma\left( \sum\limits_{i=1}^n \alpha_i, \theta \right)\)</span>.</p>
<p>Es de notar que para cada <span class="math inline">\(i\in \{1,\ldots,n\}\)</span>, la variable aleatoria <span class="math inline">\(X_i\)</span> correspondiente al <span class="math inline">\(i\)</span>-ésimo reclamo tiene como parámetro un diferente factor <span class="math inline">\(\alpha_i\)</span>, pero el mismo factor <span class="math inline">\(\theta\)</span>.</p>
<p>Ya que cada <span class="math inline">\(X_i \rightsquigarrow Gamma( \alpha_i, \theta )\)</span>, podemos calcular de forma determinista las esperanzas de <span class="math inline">\(\E[X_i]\)</span>, para cada <span class="math inline">\(i \in \{1,\ldots,n\}\)</span> y de igual forma podemos calcular la esperanza del reclamo total <span class="math inline">\(\E[S] = \sum\limits_{i=1}^n \E[X_i]\)</span>. Además como asumimos independencia entre los <span class="math inline">\(X_i\)</span>, la varianza de <span class="math inline">\(S\)</span> también puede ser calculada fácilmente como <span class="math inline">\(\V[S] = \sum\limits_{i=1}^n \V[X_i]\)</span>.</p>
<p>También estamos en la capacidad de simular la variable <span class="math inline">\(S\)</span> utilizando un algoritmo de aleatorio, para así aproximar los cálculos de sus momentos y otros estadísticos. Primeramente definamos los parámetros.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># número de unidades aseguradas</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>n <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co"># parámetros para cada X_i</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>a <span class="ot">&lt;-</span> <span class="fu">runif</span>( n, <span class="dv">5</span>, <span class="dv">10</span> )</span>
<span id="cb4-6"><a href="#cb4-6"></a></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="co"># parámetro theta, común a todas las X_i</span></span>
<span id="cb4-8"><a href="#cb4-8"></a>theta <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb4-9"><a href="#cb4-9"></a></span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="co"># parámetro para S</span></span>
<span id="cb4-11"><a href="#cb4-11"></a>A <span class="ot">&lt;-</span> <span class="fu">sum</span>( a )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>EX <span class="ot">&lt;-</span> a <span class="sc">*</span> theta</span>
<span id="cb5-2"><a href="#cb5-2"></a>VX <span class="ot">&lt;-</span> a <span class="sc">*</span> theta<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>ES <span class="ot">&lt;-</span> <span class="fu">sum</span>( EX )</span>
<span id="cb5-4"><a href="#cb5-4"></a>VS <span class="ot">&lt;-</span> <span class="fu">sum</span>( VX )</span>
<span id="cb5-5"><a href="#cb5-5"></a>SDS <span class="ot">&lt;-</span> <span class="fu">sqrt</span>( VS )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>La variable aleatoria del reclamo total <span class="math inline">\(S\)</span> la podemos simular tomando una muestra i.i.d de tamaño <span class="math inline">\(m\)</span>, i.e.&nbsp;<span class="math inline">\(S_1,\ldots,S_m\)</span> de la distribución <span class="math inline">\(Gamma\left( \sum\limits_{i=1}^n \alpha_i, \theta \right)\)</span>.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>m <span class="ot">&lt;-</span> <span class="fl">1e5</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>S <span class="ot">&lt;-</span> <span class="fu">rgamma</span>( m, <span class="at">shape =</span> A, <span class="at">scale =</span> theta )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Prima pura:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>P <span class="ot">&lt;-</span> ES</span>
<span id="cb7-2"><a href="#cb7-2"></a>P <span class="ot">&lt;-</span> <span class="fu">mean</span>( S )</span>
<span id="cb7-3"><a href="#cb7-3"></a></span>
<span id="cb7-4"><a href="#cb7-4"></a>alpha <span class="ot">&lt;-</span> <span class="fl">0.95</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>P_avg <span class="ot">&lt;-</span> ( <span class="dv">1</span> <span class="sc">+</span> alpha ) <span class="sc">*</span> ES</span>
<span id="cb7-6"><a href="#cb7-6"></a>P_avg <span class="ot">&lt;-</span> ( <span class="dv">1</span> <span class="sc">+</span> alpha ) <span class="sc">*</span> <span class="fu">mean</span>( S )</span>
<span id="cb7-7"><a href="#cb7-7"></a></span>
<span id="cb7-8"><a href="#cb7-8"></a>P_var <span class="ot">&lt;-</span> ES <span class="sc">+</span> alpha <span class="sc">*</span> VS</span>
<span id="cb7-9"><a href="#cb7-9"></a>P_var <span class="ot">&lt;-</span> <span class="fu">mean</span>( S ) <span class="sc">+</span> alpha <span class="sc">*</span> <span class="fu">var</span>( S )</span>
<span id="cb7-10"><a href="#cb7-10"></a></span>
<span id="cb7-11"><a href="#cb7-11"></a>P_sde <span class="ot">&lt;-</span> ES <span class="sc">+</span> alpha <span class="sc">*</span> SDS</span>
<span id="cb7-12"><a href="#cb7-12"></a>P_sde <span class="ot">&lt;-</span> <span class="fu">mean</span>( S ) <span class="sc">+</span> alpha <span class="sc">*</span> <span class="fu">sd</span>( S )</span>
<span id="cb7-13"><a href="#cb7-13"></a></span>
<span id="cb7-14"><a href="#cb7-14"></a>VaRS <span class="ot">&lt;-</span> <span class="fu">qgamma</span>( alpha, <span class="at">shape =</span> A, <span class="at">scale =</span> theta )</span>
<span id="cb7-15"><a href="#cb7-15"></a>P_VaR <span class="ot">&lt;-</span> VaRS</span>
<span id="cb7-16"><a href="#cb7-16"></a>P_VaR <span class="ot">&lt;-</span> <span class="fu">quantile</span>( S, <span class="at">probs =</span> alpha )</span>
<span id="cb7-17"><a href="#cb7-17"></a></span>
<span id="cb7-18"><a href="#cb7-18"></a>P_TVaR <span class="ot">&lt;-</span> ( <span class="dv">1</span> <span class="sc">/</span> ( <span class="dv">1</span> <span class="sc">-</span> alpha ) ) <span class="sc">*</span> ( A <span class="sc">*</span> theta ) <span class="sc">*</span> ( <span class="dv">1</span> <span class="sc">-</span> <span class="fu">pgamma</span>( VaRS, <span class="at">shape =</span> A <span class="sc">+</span> <span class="dv">1</span>, <span class="at">scale =</span> theta ) )</span>
<span id="cb7-19"><a href="#cb7-19"></a>P_TVaR <span class="ot">&lt;-</span> ( <span class="dv">1</span> <span class="sc">/</span> ( <span class="dv">1</span> <span class="sc">-</span> alpha ) ) <span class="sc">*</span> <span class="fu">integrate</span>( <span class="at">f =</span> <span class="cf">function</span>( u ) <span class="fu">qgamma</span>( u, <span class="at">shape =</span> A, <span class="at">scale =</span> theta ), alpha, <span class="dv">1</span> )<span class="sc">$</span>value</span>
<span id="cb7-20"><a href="#cb7-20"></a>P_TVaR <span class="ot">&lt;-</span> <span class="fu">mean</span>( <span class="fu">sapply</span>( <span class="fu">runif</span>( m, alpha, <span class="dv">1</span> ), <span class="at">FUN =</span> <span class="cf">function</span>( k ) <span class="fu">qgamma</span>( k, <span class="at">shape =</span> A, <span class="at">scale =</span> theta ) ) )</span>
<span id="cb7-21"><a href="#cb7-21"></a>I <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>( S <span class="sc">&gt;</span> VaRS )</span>
<span id="cb7-22"><a href="#cb7-22"></a>P_TVaR <span class="ot">&lt;-</span> <span class="fu">mean</span>( S <span class="sc">*</span> I ) <span class="sc">/</span> <span class="fu">mean</span>( I )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<!------------------------------------------------------------------------------------------------->
</section>
<section id="segmentación" class="level2" data-number="8.4">
<h2 data-number="8.4" class="anchored" data-anchor-id="segmentación"><span class="header-section-number">8.4</span> Segmentación</h2>
<p>En muchas ocasiones es necesario tener en cuenta algunas características asociadas al riesgo asegurado, de tal forma que la prima sea lo más eficiente y adecuada según el riesgo cubierto y las características del mismo. La idea de segmentar la población es obtener grupos homogéneos con riesgos similares.</p>
<p>Sin segmentación de la población, este el caso más sencillo para la tarificación, el asegurado</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">data.table</span>( <span class="at">nom =</span> <span class="fu">c</span>( <span class="st">'Pago'</span>, <span class="st">'Pago esperado'</span>, <span class="st">'Varianza'</span> ),</span>
<span id="cb8-2"><a href="#cb8-2"></a>                   <span class="at">cl =</span> <span class="fu">c</span>( <span class="st">"$</span><span class="sc">\\</span><span class="st">E[S]$"</span>, <span class="st">"$</span><span class="sc">\\</span><span class="st">E[S]$"</span>, <span class="st">"$0$"</span> ), </span>
<span id="cb8-3"><a href="#cb8-3"></a>                   <span class="at">as =</span> <span class="fu">c</span>( <span class="st">"$S - </span><span class="sc">\\</span><span class="st">E[S]$"</span>, <span class="st">"$0$"</span>, <span class="st">"$</span><span class="sc">\\</span><span class="st">V[S]$"</span> ) )</span>
<span id="cb8-4"><a href="#cb8-4"></a>dat <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="fu">kable</span>(</span>
<span id="cb8-6"><a href="#cb8-6"></a>    <span class="at">label =</span> <span class="cn">NA</span>,</span>
<span id="cb8-7"><a href="#cb8-7"></a>    <span class="at">caption =</span> <span class="st">'Transferencia de riesgo sin segmentación'</span>,</span>
<span id="cb8-8"><a href="#cb8-8"></a>    <span class="at">row.names =</span> <span class="cn">FALSE</span>,</span>
<span id="cb8-9"><a href="#cb8-9"></a>    <span class="at">col.names =</span> <span class="fu">c</span>( <span class="st">''</span>, <span class="st">'Asegurado'</span>, <span class="st">'Asegurador'</span> ),</span>
<span id="cb8-10"><a href="#cb8-10"></a>    <span class="at">align =</span> <span class="st">'lrr'</span>,</span>
<span id="cb8-11"><a href="#cb8-11"></a>    <span class="at">digits =</span> <span class="fu">c</span>( <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span> ),</span>
<span id="cb8-12"><a href="#cb8-12"></a>    <span class="at">format.args =</span> <span class="fu">list</span>( <span class="at">big.mark =</span> <span class="st">','</span>, <span class="at">decimal.mark =</span> <span class="st">'.'</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span> ),</span>
<span id="cb8-13"><a href="#cb8-13"></a>    <span class="at">escape =</span> <span class="cn">FALSE</span>,</span>
<span id="cb8-14"><a href="#cb8-14"></a>    <span class="at">centering =</span> <span class="cn">TRUE</span>, </span>
<span id="cb8-15"><a href="#cb8-15"></a>    <span class="at">booktabs =</span> <span class="cn">TRUE</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb8-16"><a href="#cb8-16"></a>  <span class="fu">kable_classic</span>( <span class="at">full_width =</span> <span class="cn">FALSE</span>, <span class="at">html_font =</span> <span class="st">"Cambria"</span>, <span class="at">position =</span> <span class="st">"center"</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-classic caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Transferencia de riesgo sin segmentación</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Asegurado</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Asegurador</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Pago</td>
<td style="text-align: right;">$\E[S]$</td>
<td style="text-align: right;">$S - \E[S]$</td>
</tr>
<tr class="even">
<td style="text-align: left;">Pago esperado</td>
<td style="text-align: right;">$\E[S]$</td>
<td style="text-align: right;">$0$</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Varianza</td>
<td style="text-align: right;">$0$</td>
<td style="text-align: right;">$\V[S]$</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Para el caso cuando se puede caracterizar la severidad total a partir de otra variable explicativa <span class="math inline">\(Y\)</span>, condicionando así cada una de las estimaciones según los valores que va tomando la variable explicativa. Esto permite estables primas de forma más adecuada según las diferentes características del riesgo cubierto.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">data.table</span>( <span class="at">nom =</span> <span class="fu">c</span>( <span class="st">'Pago'</span>, <span class="st">'Pago esperado'</span>, <span class="st">'Varianza'</span> ),</span>
<span id="cb9-2"><a href="#cb9-2"></a>                   <span class="at">cl =</span> <span class="fu">c</span>( <span class="st">"$</span><span class="sc">\\</span><span class="st">E[S </span><span class="sc">\\</span><span class="st">mid Y]$"</span>, <span class="st">"$</span><span class="sc">\\</span><span class="st">E[S]$"</span>, <span class="st">"$</span><span class="sc">\\</span><span class="st">V[</span><span class="sc">\\</span><span class="st">E[S </span><span class="sc">\\</span><span class="st">mid Y]]$"</span> ), </span>
<span id="cb9-3"><a href="#cb9-3"></a>                   <span class="at">as =</span> <span class="fu">c</span>( <span class="st">"$S - </span><span class="sc">\\</span><span class="st">E[S </span><span class="sc">\\</span><span class="st">mid Y]$"</span>, <span class="st">"$0$"</span>, <span class="st">"$</span><span class="sc">\\</span><span class="st">V[S-</span><span class="sc">\\</span><span class="st">E[S </span><span class="sc">\\</span><span class="st">mid Y]]$"</span> ) )</span>
<span id="cb9-4"><a href="#cb9-4"></a>dat <span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5"></a>  <span class="fu">kable</span>(</span>
<span id="cb9-6"><a href="#cb9-6"></a>    <span class="at">label =</span> <span class="cn">NA</span>,</span>
<span id="cb9-7"><a href="#cb9-7"></a>    <span class="at">caption =</span> <span class="st">'Transferencia de riesgo con segmentación'</span>,</span>
<span id="cb9-8"><a href="#cb9-8"></a>    <span class="at">row.names =</span> <span class="cn">FALSE</span>,</span>
<span id="cb9-9"><a href="#cb9-9"></a>    <span class="at">col.names =</span> <span class="fu">c</span>( <span class="st">''</span>, <span class="st">'Asegurado'</span>, <span class="st">'Asegurador'</span> ),</span>
<span id="cb9-10"><a href="#cb9-10"></a>    <span class="at">align =</span> <span class="st">'lrr'</span>,</span>
<span id="cb9-11"><a href="#cb9-11"></a>    <span class="at">digits =</span> <span class="fu">c</span>( <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span> ),</span>
<span id="cb9-12"><a href="#cb9-12"></a>    <span class="at">format.args =</span> <span class="fu">list</span>( <span class="at">big.mark =</span> <span class="st">','</span>, <span class="at">decimal.mark =</span> <span class="st">'.'</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span> ),</span>
<span id="cb9-13"><a href="#cb9-13"></a>    <span class="at">escape =</span> <span class="cn">FALSE</span>,</span>
<span id="cb9-14"><a href="#cb9-14"></a>    <span class="at">centering =</span> <span class="cn">TRUE</span>,</span>
<span id="cb9-15"><a href="#cb9-15"></a>    <span class="at">booktabs =</span> <span class="cn">TRUE</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb9-16"><a href="#cb9-16"></a>  <span class="fu">kable_classic</span>( <span class="at">full_width =</span> <span class="cn">FALSE</span>, <span class="at">html_font =</span> <span class="st">"Cambria"</span>, <span class="at">position =</span> <span class="st">"center"</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-classic caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Transferencia de riesgo con segmentación</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Asegurado</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Asegurador</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Pago</td>
<td style="text-align: right;">$\E[S \mid Y]$</td>
<td style="text-align: right;">$S - \E[S \mid Y]$</td>
</tr>
<tr class="even">
<td style="text-align: left;">Pago esperado</td>
<td style="text-align: right;">$\E[S]$</td>
<td style="text-align: right;">$0$</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Varianza</td>
<td style="text-align: right;">$\V[\E[S \mid Y]]$</td>
<td style="text-align: right;">$\V[S-\E[S \mid Y]]$</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>La varianza <span class="math inline">\(\V[\E[S \mid Y]]\)</span> es atribuible a la heterogeneidad del portafolio de asegurados, y la misma se asigna a cada asegurado, más no es absorbida por el asegurador.</p>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./lectura_06.html" class="pagination-link" aria-label="Modelos de pérdida agregada">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Modelos de pérdida agregada</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./lectura_08.html" class="pagination-link" aria-label="Modelos lineales generalizados (GLM)">
        <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Modelos lineales generalizados (GLM)</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb10" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb10-1"><a href="#cb10-1"></a><span class="co">&lt;!-------------------------------------------------------------------------------------------------&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="fu"># Tarificación {#tarificacion}</span></span>
<span id="cb10-3"><a href="#cb10-3"></a></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="in">```{r}</span></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="co">#| echo: false</span></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co">#| warning: false</span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="fu">source</span>(<span class="st">"_common.R"</span>)</span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="in">```</span></span>
<span id="cb10-11"><a href="#cb10-11"></a></span>
<span id="cb10-12"><a href="#cb10-12"></a>Una vez estimado los reclamos totales se trata de establecer una forma optima para estimar el </span>
<span id="cb10-13"><a href="#cb10-13"></a>valor que deberá pagar el asegurado, la **prima**, para que la compañia de seguros se haga cargo de</span>
<span id="cb10-14"><a href="#cb10-14"></a>riesgo. En esto debe incluirse algunas consideraciones adicionales, además de la estimación </span>
<span id="cb10-15"><a href="#cb10-15"></a>de la frecuencia y severidad de los reclamos, es también relevante tener en consideración otros </span>
<span id="cb10-16"><a href="#cb10-16"></a>valores asociados a diferentes costo, el retorno esperado por el inversionista y finalmente el</span>
<span id="cb10-17"><a href="#cb10-17"></a>rendimiento de inversiones. Todo lo anterior debe ser conjugado para obtener una adecuada </span>
<span id="cb10-18"><a href="#cb10-18"></a>estimación de la prima.</span>
<span id="cb10-19"><a href="#cb10-19"></a></span>
<span id="cb10-20"><a href="#cb10-20"></a>Adicionalmente, se debe tener en cuenta que el riesgo cubierto está sujeto a variaciones propias</span>
<span id="cb10-21"><a href="#cb10-21"></a>de la aleatoriedad del fenómeno y que puede presentar variaciones significativas respecto de la </span>
<span id="cb10-22"><a href="#cb10-22"></a>media, es decir, que la volatilidad del riesgo cubierto puede influenciar significativamente el</span>
<span id="cb10-23"><a href="#cb10-23"></a>pago total de los reclamos. Ante ello surge un concepto de vital importancia, el cual lo </span>
<span id="cb10-24"><a href="#cb10-24"></a>desarrollamos a continuación y se lo conoce como medidas de riesgo.</span>
<span id="cb10-25"><a href="#cb10-25"></a></span>
<span id="cb10-26"><a href="#cb10-26"></a><span class="co">&lt;!-------------------------------------------------------------------------------------------------&gt;</span></span>
<span id="cb10-27"><a href="#cb10-27"></a><span class="fu">## Medidas de riesgo {#medidas_riesgo}</span></span>
<span id="cb10-28"><a href="#cb10-28"></a></span>
<span id="cb10-29"><a href="#cb10-29"></a>:::: {.thmbox data-latex=""}</span>
<span id="cb10-30"><a href="#cb10-30"></a>::: {.definition #dmedriskcohe name="Medida de riesgo coherente"}</span>
<span id="cb10-31"><a href="#cb10-31"></a>Una **medida de riesgo coeherente** es una función $\rho: \R \longrightarrow \R$, </span>
<span id="cb10-32"><a href="#cb10-32"></a>que satisface la siguientes propiedades:</span>
<span id="cb10-33"><a href="#cb10-33"></a></span>
<span id="cb10-34"><a href="#cb10-34"></a><span class="ss">1. </span>**Normalización**, el riesgo de nada es nada</span>
<span id="cb10-35"><a href="#cb10-35"></a>$$</span>
<span id="cb10-36"><a href="#cb10-36"></a>\rho( 0 ) = 0</span>
<span id="cb10-37"><a href="#cb10-37"></a>$$</span>
<span id="cb10-38"><a href="#cb10-38"></a></span>
<span id="cb10-39"><a href="#cb10-39"></a><span class="ss">1. </span>**Homogenidad positiva**, el riesgo crece con la escala, así para cualquier $a &gt; 0$</span>
<span id="cb10-40"><a href="#cb10-40"></a>$$</span>
<span id="cb10-41"><a href="#cb10-41"></a>\rho( a X ) = a \rho( X )</span>
<span id="cb10-42"><a href="#cb10-42"></a>$$</span>
<span id="cb10-43"><a href="#cb10-43"></a></span>
<span id="cb10-44"><a href="#cb10-44"></a><span class="ss">2. </span>**Invarianza ante las traslaciones**, para cualquier $a &gt; 0$</span>
<span id="cb10-45"><a href="#cb10-45"></a>$$</span>
<span id="cb10-46"><a href="#cb10-46"></a>\rho( \alpha X + a ) = \rho( \alpha X ) + a</span>
<span id="cb10-47"><a href="#cb10-47"></a>$$</span>
<span id="cb10-48"><a href="#cb10-48"></a></span>
<span id="cb10-49"><a href="#cb10-49"></a><span class="ss">3. </span>**Monotonicidad**, Si $X \leq Y$</span>
<span id="cb10-50"><a href="#cb10-50"></a>$$</span>
<span id="cb10-51"><a href="#cb10-51"></a>\rho( X ) \leq \rho( Y )</span>
<span id="cb10-52"><a href="#cb10-52"></a>$$</span>
<span id="cb10-53"><a href="#cb10-53"></a></span>
<span id="cb10-54"><a href="#cb10-54"></a><span class="ss">4. </span>**Sub-aditividad**, el diversificar el riesgo es menor a la suma de los riesgos independientes</span>
<span id="cb10-55"><a href="#cb10-55"></a>$$</span>
<span id="cb10-56"><a href="#cb10-56"></a>\rho( X + Y ) \leq \rho( X ) + \rho( Y )</span>
<span id="cb10-57"><a href="#cb10-57"></a>$$</span>
<span id="cb10-58"><a href="#cb10-58"></a>:::</span>
<span id="cb10-59"><a href="#cb10-59"></a>::::</span>
<span id="cb10-60"><a href="#cb10-60"></a></span>
<span id="cb10-61"><a href="#cb10-61"></a>En lo que continúa citamos algunas de las medidas de riesgo usualmente utilizadas.</span>
<span id="cb10-62"><a href="#cb10-62"></a></span>
<span id="cb10-63"><a href="#cb10-63"></a>:::: {.thmbox data-latex=""}</span>
<span id="cb10-64"><a href="#cb10-64"></a>::: {.definition #dVaR name="Valor en riesgo"}</span>
<span id="cb10-65"><a href="#cb10-65"></a>Dada una variable aleatoria a valores reales $X$, el **valor en riesgo** (value at risk) de $X$ al </span>
<span id="cb10-66"><a href="#cb10-66"></a>nivel de probabilidad $\alpha \in (0,1)$ está dado por</span>
<span id="cb10-67"><a href="#cb10-67"></a>$$</span>
<span id="cb10-68"><a href="#cb10-68"></a>\VaR_{\alpha}( X ) = \inf\left<span class="sc">\{</span> x \in \R \middle| F_X( x ) &gt; \alpha \right<span class="sc">\}</span></span>
<span id="cb10-69"><a href="#cb10-69"></a>$$</span>
<span id="cb10-70"><a href="#cb10-70"></a>:::</span>
<span id="cb10-71"><a href="#cb10-71"></a>::::</span>
<span id="cb10-72"><a href="#cb10-72"></a></span>
<span id="cb10-73"><a href="#cb10-73"></a>:::: {.thmbox data-latex=""}</span>
<span id="cb10-74"><a href="#cb10-74"></a>::: {.proposition #varinv}</span>
<span id="cb10-75"><a href="#cb10-75"></a>Si la función de distribución acumulada $F_X$ es continua, entonces </span>
<span id="cb10-76"><a href="#cb10-76"></a>$\VaR_{\alpha}( X ) = F_X^{-1}( \alpha )$.</span>
<span id="cb10-77"><a href="#cb10-77"></a>:::</span>
<span id="cb10-78"><a href="#cb10-78"></a>::::</span>
<span id="cb10-79"><a href="#cb10-79"></a></span>
<span id="cb10-80"><a href="#cb10-80"></a>Por otra parte, $\VaR_{\alpha}$ para cualquier $\alpha$ no es una medida de riesgo sub-aditiva.</span>
<span id="cb10-81"><a href="#cb10-81"></a></span>
<span id="cb10-82"><a href="#cb10-82"></a>El método directo para el calcular el $\VaR_\alpha$ es directamente atacando el problema de </span>
<span id="cb10-83"><a href="#cb10-83"></a>encontrar el ínfimo, esto es un problema de optimización que puede tener sus complicaciones, ya</span>
<span id="cb10-84"><a href="#cb10-84"></a>que muchas de las veces la distribución acumulada $F$ no es conocida o fácilmente computable. </span>
<span id="cb10-85"><a href="#cb10-85"></a>Incluso en el caso cuando la función de distribución $F$ es continua, resta el problema de poder</span>
<span id="cb10-86"><a href="#cb10-86"></a>invertir esta función.</span>
<span id="cb10-87"><a href="#cb10-87"></a></span>
<span id="cb10-88"><a href="#cb10-88"></a>Otra forma es acudir a los métodos de simulación estocástica, partiendo de una muestra </span>
<span id="cb10-89"><a href="#cb10-89"></a>$X_1, \ldots, X_n$ y calculando de forma aproximada</span>
<span id="cb10-90"><a href="#cb10-90"></a>$$</span>
<span id="cb10-91"><a href="#cb10-91"></a>\VaR_{\alpha}( X ) \approx F_n^{-1}( \alpha )</span>
<span id="cb10-92"><a href="#cb10-92"></a>$$</span>
<span id="cb10-93"><a href="#cb10-93"></a>En principio no sabemos si esta aproximación será consistente conforme se aumenta el tamaño de la </span>
<span id="cb10-94"><a href="#cb10-94"></a>muestra, sin embargo para ello tenemos la siguiente proposición, la cual nos da una certeza al </span>
<span id="cb10-95"><a href="#cb10-95"></a>respecto.</span>
<span id="cb10-96"><a href="#cb10-96"></a></span>
<span id="cb10-97"><a href="#cb10-97"></a>:::: {.thmbox data-latex=""}</span>
<span id="cb10-98"><a href="#cb10-98"></a>::: {.proposition #appoxvar}</span>
<span id="cb10-99"><a href="#cb10-99"></a>Si consideramos una familia de variables aleatorias $<span class="sc">\{</span>X_n<span class="sc">\}</span>_{n\in \N}$ i.i.d con distribución común</span>
<span id="cb10-100"><a href="#cb10-100"></a>$F$ no necesariamente continua, entonces el percentil empírico de orden $\alpha$, </span>
<span id="cb10-101"><a href="#cb10-101"></a>$\xi_{n,\alpha} = F_n^{-1}( \alpha )$, que se puede extraer a partir de las $n$ primeras variables </span>
<span id="cb10-102"><a href="#cb10-102"></a>en la muestra converge en probabilidad al valor $\xi_{\alpha} = \VaR_{\alpha}( X )$, correspondiente</span>
<span id="cb10-103"><a href="#cb10-103"></a>al valor en riesgo.</span>
<span id="cb10-104"><a href="#cb10-104"></a>:::</span>
<span id="cb10-105"><a href="#cb10-105"></a>::::</span>
<span id="cb10-106"><a href="#cb10-106"></a></span>
<span id="cb10-107"><a href="#cb10-107"></a>:::{.proof}</span>
<span id="cb10-108"><a href="#cb10-108"></a>Utilizando la versión unilateral de la desigualdad \@ref(thm:ddkw), podemos establecer las </span>
<span id="cb10-109"><a href="#cb10-109"></a>siguientes acotaciones</span>
<span id="cb10-110"><a href="#cb10-110"></a>$$</span>
<span id="cb10-111"><a href="#cb10-111"></a>\begin{split}</span>
<span id="cb10-112"><a href="#cb10-112"></a>P\left( \xi_{n,\alpha}- \xi_{\alpha} &gt; \varepsilon \right)</span>
<span id="cb10-113"><a href="#cb10-113"></a>&amp; = P\left( \xi_{n,\alpha} &gt;  \xi_{\alpha} + \varepsilon \right) <span class="sc">\\</span></span>
<span id="cb10-114"><a href="#cb10-114"></a>&amp; = P\left( F_n( \xi_{n,\alpha} ) &gt;  F_n( \xi_{\alpha} + \varepsilon ) \right) <span class="sc">\\</span></span>
<span id="cb10-115"><a href="#cb10-115"></a>&amp; = P\left( F( \xi_{\alpha} + \varepsilon ) + \alpha &gt; F( \xi_{\alpha} + \varepsilon ) + F_n( \xi_{\alpha} + \varepsilon ) \right) <span class="sc">\\</span></span>
<span id="cb10-116"><a href="#cb10-116"></a>&amp; = P\left( F( \xi_{\alpha} + \varepsilon ) - F_n( \xi_{\alpha} + \varepsilon ) &gt; F( \xi_{\alpha} + \varepsilon ) - \alpha \right) <span class="sc">\\</span></span>
<span id="cb10-117"><a href="#cb10-117"></a>&amp; \leq P\left( \underset{x \in \R}{\sup} \left( F - F_n \right) &gt; F( \xi_{\alpha} + \varepsilon ) - \alpha \right) <span class="sc">\\</span></span>
<span id="cb10-118"><a href="#cb10-118"></a>&amp; \leq Ce^{-2n \left( F( \xi_{\alpha} + \varepsilon ) - \alpha \right) ^2 }</span>
<span id="cb10-119"><a href="#cb10-119"></a>\end{split}</span>
<span id="cb10-120"><a href="#cb10-120"></a>$$</span>
<span id="cb10-121"><a href="#cb10-121"></a></span>
<span id="cb10-122"><a href="#cb10-122"></a>$$</span>
<span id="cb10-123"><a href="#cb10-123"></a>\begin{split}</span>
<span id="cb10-124"><a href="#cb10-124"></a>P\left( \xi_{n,\alpha} - \xi_{\alpha} &lt; -\varepsilon \right)</span>
<span id="cb10-125"><a href="#cb10-125"></a>&amp; = P\left( \xi_{n,\alpha} &lt;  \xi_{\alpha} - \varepsilon \right) <span class="sc">\\</span></span>
<span id="cb10-126"><a href="#cb10-126"></a>&amp; = P\left( F_n( \xi_{n,\alpha} ) &lt;  F_n( \xi_{\alpha} - \varepsilon ) \right) <span class="sc">\\</span></span>
<span id="cb10-127"><a href="#cb10-127"></a>&amp; = P\left( F( \xi_{\alpha} - \varepsilon ) + \alpha &lt; F( \xi_{\alpha} - \varepsilon ) + F_n( \xi_{\alpha} - \varepsilon ) \right) <span class="sc">\\</span></span>
<span id="cb10-128"><a href="#cb10-128"></a>&amp; = P\left( F_n( \xi_{\alpha} - \varepsilon ) - F( \xi_{\alpha} - \varepsilon ) &gt; \alpha - F( \xi_{\alpha} - \varepsilon ) \right) <span class="sc">\\</span></span>
<span id="cb10-129"><a href="#cb10-129"></a>&amp; \leq P\left( \underset{x \in \R}{\sup} \left( F - F_n \right) &gt; \alpha - F( \xi_{\alpha} - \varepsilon ) \right) <span class="sc">\\</span></span>
<span id="cb10-130"><a href="#cb10-130"></a>&amp; \leq Ce^{-2n \left( \alpha - F( \xi_{\alpha} - \varepsilon ) \right) ^2 }</span>
<span id="cb10-131"><a href="#cb10-131"></a>\end{split}</span>
<span id="cb10-132"><a href="#cb10-132"></a>$$</span>
<span id="cb10-133"><a href="#cb10-133"></a>Uniendo ambos resultados concluimos</span>
<span id="cb10-134"><a href="#cb10-134"></a>$$</span>
<span id="cb10-135"><a href="#cb10-135"></a>P\left( \left| \xi_{n,\alpha}- \xi_{\alpha} \right| &gt; \varepsilon \right)</span>
<span id="cb10-136"><a href="#cb10-136"></a>\leq 2 C e^{-2n \min\left( F( \xi_{\alpha} + \varepsilon ) - \alpha, \alpha - F( \xi_{\alpha} - \varepsilon ) \right)^2 }</span>
<span id="cb10-137"><a href="#cb10-137"></a>$$</span>
<span id="cb10-138"><a href="#cb10-138"></a>Podemos concluir con toda confianza que el percentil $\xi_{n,\alpha}$ que se obtiene de la </span>
<span id="cb10-139"><a href="#cb10-139"></a>distribución empírica se aproxima en probabilidad al percentil $\xi_{\alpha} = \VaR_{\alpha}( X )$ </span>
<span id="cb10-140"><a href="#cb10-140"></a>:::</span>
<span id="cb10-141"><a href="#cb10-141"></a></span>
<span id="cb10-142"><a href="#cb10-142"></a><span class="co">&lt;!-------------------------------------------------------------------------------------------------&gt;</span></span>
<span id="cb10-143"><a href="#cb10-143"></a>**Algoritmo de simulación**</span>
<span id="cb10-144"><a href="#cb10-144"></a></span>
<span id="cb10-145"><a href="#cb10-145"></a>Con lo anterior se puede crear un algoritmo de simulación estocástico que precisamente contemple</span>
<span id="cb10-146"><a href="#cb10-146"></a>el respectivo nivel de convergencia, de ahí que la demostración de la proposición anterior no es </span>
<span id="cb10-147"><a href="#cb10-147"></a>inútil, ya que de la misma resulta un criterio para determinar el número de simulaciones que se</span>
<span id="cb10-148"><a href="#cb10-148"></a>desea calcular.</span>
<span id="cb10-149"><a href="#cb10-149"></a></span>
<span id="cb10-150"><a href="#cb10-150"></a>Fijamos un valor $\delta &gt; 0$ el cual acota la probabilidad del evento que mide el error de </span>
<span id="cb10-151"><a href="#cb10-151"></a>aproximación, i.e. $P\left( \left| \xi_{n,\alpha} - \xi_{\alpha} \right| &gt; \varepsilon \right) \leq \delta$ </span>
<span id="cb10-152"><a href="#cb10-152"></a>y tomando en cuenta la desigualdad en \@ref(prp:appoxvar).</span>
<span id="cb10-153"><a href="#cb10-153"></a>$$</span>
<span id="cb10-154"><a href="#cb10-154"></a>\begin{split}</span>
<span id="cb10-155"><a href="#cb10-155"></a>2 C e^{-2n \min\left( F( \xi_{\alpha} + \varepsilon ) - \alpha, \alpha - F( \xi_{\alpha} - \varepsilon ) \right)^2 } &amp; \leq \delta <span class="sc">\\</span></span>
<span id="cb10-156"><a href="#cb10-156"></a>-2n \min\left( F( \xi_{\alpha} + \varepsilon ) - \alpha, \alpha - F( \xi_{\alpha} - \varepsilon ) \right)^2 </span>
<span id="cb10-157"><a href="#cb10-157"></a>&amp; \leq \log( \delta )-\log(2) - \log( C ) <span class="sc">\\</span></span>
<span id="cb10-158"><a href="#cb10-158"></a>n &amp; \geq -\frac{\log( \delta )-\log(2)-\log( C )}{2 \min\left( F( \xi_{\alpha} + \varepsilon ) - \alpha, \alpha - F( \xi_{\alpha} - \varepsilon ) \right)^2}</span>
<span id="cb10-159"><a href="#cb10-159"></a>\end{split}</span>
<span id="cb10-160"><a href="#cb10-160"></a>$$</span>
<span id="cb10-161"><a href="#cb10-161"></a>Como se evidencia $n$ crece en orden cuadrático proporcional a la aproximación dada por </span>
<span id="cb10-162"><a href="#cb10-162"></a>$\min\left( F( \xi_{\alpha} + \varepsilon ) - \alpha, \alpha - F( \xi_{\alpha} - \varepsilon ) \right)$</span>
<span id="cb10-163"><a href="#cb10-163"></a>alrededor del percentile $\alpha$. Lo cual no es un resultado muy alentador.</span>
<span id="cb10-164"><a href="#cb10-164"></a></span>
<span id="cb10-165"><a href="#cb10-165"></a>Si se establece un valor $\widetilde{\varepsilon} &gt; 0$ para el término </span>
<span id="cb10-166"><a href="#cb10-166"></a>$\widetilde{\varepsilon} \leq \min\left( F( \xi_{\alpha} + \varepsilon ) - \alpha, \alpha - F( \xi_{\alpha} - \varepsilon ) \right)$, la expresión anterior se modifica a la siguiente</span>
<span id="cb10-167"><a href="#cb10-167"></a>$$</span>
<span id="cb10-168"><a href="#cb10-168"></a>n \geq -\frac{\log( \delta )-\log(2)-\log(C)}{2 \widetilde{\varepsilon}^2}</span>
<span id="cb10-169"><a href="#cb10-169"></a>$$</span>
<span id="cb10-170"><a href="#cb10-170"></a>Claramente la cantidad de simulaciones que se debe realizar para lograr una aproximación de orden</span>
<span id="cb10-171"><a href="#cb10-171"></a>$\varepsilon$, se requiere un orden de simulaciones cuadrático inverso a este valor.</span>
<span id="cb10-172"><a href="#cb10-172"></a>El ejemplo numérico a continuación es aleccionador al respecto de la dificultad numérica de </span>
<span id="cb10-173"><a href="#cb10-173"></a>aproximar un cálculo de $VaR_\alpha$.</span>
<span id="cb10-174"><a href="#cb10-174"></a></span>
<span id="cb10-175"><a href="#cb10-175"></a>Entonces los pasos del pseudo-algoritmo de simulación estarán dados por:</span>
<span id="cb10-176"><a href="#cb10-176"></a></span>
<span id="cb10-177"><a href="#cb10-177"></a><span class="ss">1. </span>Fijar el nivel de confianza al que se desea calcular $0 &lt; \alpha &lt; 1$</span>
<span id="cb10-178"><a href="#cb10-178"></a></span>
<span id="cb10-179"><a href="#cb10-179"></a><span class="ss">2. </span>Fijar el nivel probabilidad para los errores de aproximación $\delta &gt; 0$</span>
<span id="cb10-180"><a href="#cb10-180"></a></span>
<span id="cb10-181"><a href="#cb10-181"></a><span class="ss">3. </span>Fijar el nivel erro $\widetilde{\varepsilon} &gt; 0$</span>
<span id="cb10-182"><a href="#cb10-182"></a></span>
<span id="cb10-183"><a href="#cb10-183"></a><span class="ss">4. </span>Estimar el posible error de estimación $\varepsilon &gt; 0$</span>
<span id="cb10-184"><a href="#cb10-184"></a></span>
<span id="cb10-185"><a href="#cb10-185"></a><span class="ss">5. </span>Buscar el número de simulaciones adecuadas $n \in \N$ que aseguren con una probabilidad menor a </span>
<span id="cb10-186"><a href="#cb10-186"></a>$\delta$ que se presente errores de aproximación superiores a $\varepsilon$.</span>
<span id="cb10-187"><a href="#cb10-187"></a></span>
<span id="cb10-188"><a href="#cb10-188"></a><span class="ss">6. </span>Generar una muestra de tamaño $n$ de la variable aleatoria, i.e. $X_1, \ldots, X_n$</span>
<span id="cb10-189"><a href="#cb10-189"></a></span>
<span id="cb10-190"><a href="#cb10-190"></a><span class="ss">7. </span>Calcular el percentil de la $\alpha$ de la muestra $\xi_{n,\alpha} = F_n^{-1}( \alpha )$</span>
<span id="cb10-191"><a href="#cb10-191"></a></span>
<span id="cb10-192"><a href="#cb10-192"></a>Esta simulación solo genera una sola estimación del $\VaR_{\alpha}(X)$, se puede repetir algunas</span>
<span id="cb10-193"><a href="#cb10-193"></a>veces esta algoritmo para tener más valores y sacar la media de estos como estimador.</span>
<span id="cb10-194"><a href="#cb10-194"></a><span class="in">```{r l7c1}</span></span>
<span id="cb10-195"><a href="#cb10-195"></a><span class="in">u &lt;- 7</span></span>
<span id="cb10-196"><a href="#cb10-196"></a><span class="in">s &lt;- 4</span></span>
<span id="cb10-197"><a href="#cb10-197"></a><span class="in">Fd &lt;- function( x ) plnorm( x, meanlog = u, sdlog = s )</span></span>
<span id="cb10-198"><a href="#cb10-198"></a><span class="in">Fdi &lt;- function( x ) qlnorm( x, meanlog = u, sdlog = s )</span></span>
<span id="cb10-199"><a href="#cb10-199"></a><span class="in">Rd &lt;- function( x ) rlnorm( n = n, meanlog = u, sdlog = s )</span></span>
<span id="cb10-200"><a href="#cb10-200"></a><span class="in">alpha &lt;- 0.98</span></span>
<span id="cb10-201"><a href="#cb10-201"></a><span class="in">delta &lt;- 1e-2</span></span>
<span id="cb10-202"><a href="#cb10-202"></a><span class="in">hepsilon &lt;- 0.2e-4</span></span>
<span id="cb10-203"><a href="#cb10-203"></a></span>
<span id="cb10-204"><a href="#cb10-204"></a><span class="in">q &lt;- Fdi( alpha )</span></span>
<span id="cb10-205"><a href="#cb10-205"></a><span class="in">epsilon &lt;- max( Fdi( hepsilon + alpha ) - q, q - Fdi( alpha - hepsilon ) )</span></span>
<span id="cb10-206"><a href="#cb10-206"></a><span class="in">C &lt;- 5.001e-3 # seleccionado acorde a cada problema</span></span>
<span id="cb10-207"><a href="#cb10-207"></a><span class="in">n &lt;- round( -( log( delta ) - log( 2 ) - log( C ) ) / ( 2 * hepsilon^2 ), 0 )</span></span>
<span id="cb10-208"><a href="#cb10-208"></a></span>
<span id="cb10-209"><a href="#cb10-209"></a><span class="in">m &lt;- 1e3</span></span>
<span id="cb10-210"><a href="#cb10-210"></a><span class="in">qn &lt;- sapply( 1:m, FUN = function( i ) as.numeric( quantile( Rd( n ), probs = alpha ) ) )</span></span>
<span id="cb10-211"><a href="#cb10-211"></a></span>
<span id="cb10-212"><a href="#cb10-212"></a><span class="in">P &lt;- mean( abs( qn - q ) &gt; epsilon ) </span></span>
<span id="cb10-213"><a href="#cb10-213"></a><span class="in">```</span></span>
<span id="cb10-214"><a href="#cb10-214"></a>$$</span>
<span id="cb10-215"><a href="#cb10-215"></a>P\left( \left| \xi_{n,\alpha}- \xi_{\alpha} \right| &gt; \varepsilon \right) = </span>
<span id="cb10-216"><a href="#cb10-216"></a><span class="in">`r formatC( P, digits = 8, format = 'f' )`</span></span>
<span id="cb10-217"><a href="#cb10-217"></a>$$</span>
<span id="cb10-218"><a href="#cb10-218"></a>Como se observa se tendrá que realizar muchas simulaciones más para llegar a tener en probabilidad</span>
<span id="cb10-219"><a href="#cb10-219"></a>un error de aproximación adecuado.</span>
<span id="cb10-220"><a href="#cb10-220"></a></span>
<span id="cb10-221"><a href="#cb10-221"></a>:::: {.thmbox data-latex=""}</span>
<span id="cb10-222"><a href="#cb10-222"></a>::: {.definition #dTVaR name="Valor en riesgo en la cola"}</span>
<span id="cb10-223"><a href="#cb10-223"></a>Dada una variable aleatoria a valores reales $X$, el **valor en riesgo en la cola** </span>
<span id="cb10-224"><a href="#cb10-224"></a>(tail value at risk) de $X$ al nivel de probabilidad $\alpha \in (0,1)$ está dado por</span>
<span id="cb10-225"><a href="#cb10-225"></a>$$</span>
<span id="cb10-226"><a href="#cb10-226"></a>\TVaR_{\alpha}( X ) = \frac{1}{1-\alpha} \int\limits_{\alpha}^1 \VaR_u( X )\ du</span>
<span id="cb10-227"><a href="#cb10-227"></a>$$</span>
<span id="cb10-228"><a href="#cb10-228"></a>:::</span>
<span id="cb10-229"><a href="#cb10-229"></a>::::</span>
<span id="cb10-230"><a href="#cb10-230"></a></span>
<span id="cb10-231"><a href="#cb10-231"></a>Es de notar que si se toma una variable aleatoria uniforme $U \rightsquigarrow U(\alpha,1)$, tenemos </span>
<span id="cb10-232"><a href="#cb10-232"></a>que el valor en riesgo en la cola, puede ser expresado como la esperanza.</span>
<span id="cb10-233"><a href="#cb10-233"></a>$$</span>
<span id="cb10-234"><a href="#cb10-234"></a>\TVaR_{\alpha}( X ) = \E\left<span class="co">[</span><span class="ot"> \VaR_U( X ) \right</span><span class="co">]</span></span>
<span id="cb10-235"><a href="#cb10-235"></a>$$</span>
<span id="cb10-236"><a href="#cb10-236"></a>De ahí que se una forma de calcular el valor en riesgo en la cola es utilizando una simulación</span>
<span id="cb10-237"><a href="#cb10-237"></a>estocástica que aproveche el \@ref(thm:twln). Así se puede generar una muestra $U_1, \ldots, U_m$ de </span>
<span id="cb10-238"><a href="#cb10-238"></a>la distribución uniforme $U(\alpha,1)$ y para cada uno de estos valores se calcula por simulación el </span>
<span id="cb10-239"><a href="#cb10-239"></a>$\xi_{n,U_1} \approx \VaR_{U_1}( X ), \ldots, \xi_{n,U_n} \approx  \VaR_{U_n}( X )$, luego aproximar</span>
<span id="cb10-240"><a href="#cb10-240"></a>utilizando la media empírica</span>
<span id="cb10-241"><a href="#cb10-241"></a>$$</span>
<span id="cb10-242"><a href="#cb10-242"></a>\TVaR_{\alpha}( X ) \approx \frac{1}{m} \sum\limits_{i=1}^m \xi_{n,U_i}</span>
<span id="cb10-243"><a href="#cb10-243"></a>$$</span>
<span id="cb10-244"><a href="#cb10-244"></a>Pero como ya se mencionó, esta aproximación puede ser realmente costosa en términos </span>
<span id="cb10-245"><a href="#cb10-245"></a>computacionales; por tal razón, se requiere utilizar métodos numéricos más eficientes.</span>
<span id="cb10-246"><a href="#cb10-246"></a></span>
<span id="cb10-247"><a href="#cb10-247"></a>:::: {.thmbox data-latex=""}</span>
<span id="cb10-248"><a href="#cb10-248"></a>::: {.proposition #TVaRcohe name="Coherencia de la medida TVaR"}</span>
<span id="cb10-249"><a href="#cb10-249"></a>La medida de riesgo $\TVaR_{\alpha}$ es una medida de riesgo coherente si la variable aleatoria</span>
<span id="cb10-250"><a href="#cb10-250"></a>sobre la cual se mide es una variable aleatoria continua.</span>
<span id="cb10-251"><a href="#cb10-251"></a>:::</span>
<span id="cb10-252"><a href="#cb10-252"></a>::::</span>
<span id="cb10-253"><a href="#cb10-253"></a></span>
<span id="cb10-254"><a href="#cb10-254"></a>:::: {.thmbox data-latex=""}</span>
<span id="cb10-255"><a href="#cb10-255"></a>::: {.definition #dCTE name="Esperanza condicional en la cola"} </span>
<span id="cb10-256"><a href="#cb10-256"></a>Dada una variable aleatoria a valores reales $X$, la **esperanza condicional en la cola** </span>
<span id="cb10-257"><a href="#cb10-257"></a>(conditional tail expectation) de $X$ al nivel de probabilidad $\alpha \in (0,1)$ está dado por</span>
<span id="cb10-258"><a href="#cb10-258"></a>$$</span>
<span id="cb10-259"><a href="#cb10-259"></a>\CTE_{\alpha}( X ) = \E\left<span class="co">[</span><span class="ot"> X \middle| X &gt; \VaR_{\alpha}( X ) \right</span><span class="co">]</span></span>
<span id="cb10-260"><a href="#cb10-260"></a>$$</span>
<span id="cb10-261"><a href="#cb10-261"></a>:::</span>
<span id="cb10-262"><a href="#cb10-262"></a>::::</span>
<span id="cb10-263"><a href="#cb10-263"></a></span>
<span id="cb10-264"><a href="#cb10-264"></a>:::: {.thmbox data-latex=""}</span>
<span id="cb10-265"><a href="#cb10-265"></a>::: {.proposition #eqtvarcte}</span>
<span id="cb10-266"><a href="#cb10-266"></a>Si la función de distribución acumulada $F_X$ de la variable aleatoria $X$ es continua, entonces</span>
<span id="cb10-267"><a href="#cb10-267"></a>se tiene la siguiente igualdad</span>
<span id="cb10-268"><a href="#cb10-268"></a>$$</span>
<span id="cb10-269"><a href="#cb10-269"></a>\CTE_{\alpha}( X ) = \TVaR_{\alpha}( X )</span>
<span id="cb10-270"><a href="#cb10-270"></a>$$</span>
<span id="cb10-271"><a href="#cb10-271"></a>:::</span>
<span id="cb10-272"><a href="#cb10-272"></a>::::</span>
<span id="cb10-273"><a href="#cb10-273"></a></span>
<span id="cb10-274"><a href="#cb10-274"></a>:::: {.thmbox data-latex=""}</span>
<span id="cb10-275"><a href="#cb10-275"></a>::: {.definition #dCVaR name="Valor en riesgo condicionado"}</span>
<span id="cb10-276"><a href="#cb10-276"></a>Dada una variable aleatoria a valores reales $X$, el **valor en riesgo condicionado** </span>
<span id="cb10-277"><a href="#cb10-277"></a>(conditional value at risk) de $X$ al nivel de probabilidad $\alpha \in (0,1)$ está dado por</span>
<span id="cb10-278"><a href="#cb10-278"></a>$$</span>
<span id="cb10-279"><a href="#cb10-279"></a>\CVaR_{\alpha}( X ) = \E\left<span class="co">[</span><span class="ot"> X - \VaR_{\alpha}( X ) \middle| X &gt; \VaR_{\alpha}( X ) \right</span><span class="co">]</span></span>
<span id="cb10-280"><a href="#cb10-280"></a>= \CTE_{\alpha}( X ) - \VaR_{\alpha}( X )</span>
<span id="cb10-281"><a href="#cb10-281"></a>$$</span>
<span id="cb10-282"><a href="#cb10-282"></a>:::</span>
<span id="cb10-283"><a href="#cb10-283"></a>::::</span>
<span id="cb10-284"><a href="#cb10-284"></a></span>
<span id="cb10-285"><a href="#cb10-285"></a>:::: {.thmbox data-latex=""}</span>
<span id="cb10-286"><a href="#cb10-286"></a>::: {.definition #dES name="Déficit esperado"}</span>
<span id="cb10-287"><a href="#cb10-287"></a>Dada una variable aleatoria a valores reales $X$, el **déficit esperado** (expected shortfall) de </span>
<span id="cb10-288"><a href="#cb10-288"></a>$X$ al nivel de probabilidad $\alpha \in (0,1)$ está dado por</span>
<span id="cb10-289"><a href="#cb10-289"></a>$$</span>
<span id="cb10-290"><a href="#cb10-290"></a>\ES_{\alpha}( X ) = \E\left<span class="co">[</span><span class="ot"> \max\left( X - \VaR_{\alpha}( X ), 0 \right) \right</span><span class="co">]</span></span>
<span id="cb10-291"><a href="#cb10-291"></a>$$</span>
<span id="cb10-292"><a href="#cb10-292"></a>:::</span>
<span id="cb10-293"><a href="#cb10-293"></a>::::</span>
<span id="cb10-294"><a href="#cb10-294"></a></span>
<span id="cb10-295"><a href="#cb10-295"></a>:::: {.thmbox data-latex=""}</span>
<span id="cb10-296"><a href="#cb10-296"></a>::: {.definition #dEVaR name="Valor en riesgo entrópico"}</span>
<span id="cb10-297"><a href="#cb10-297"></a>Dada una variable aleatoria a valores reales $X$, el **valor en riesgo entrópico** </span>
<span id="cb10-298"><a href="#cb10-298"></a>(entropic value at risk) de $X$ al nivel de probabilidad $\alpha \in (0,1)$ está dado por</span>
<span id="cb10-299"><a href="#cb10-299"></a>$$</span>
<span id="cb10-300"><a href="#cb10-300"></a>\EVaR_{\alpha}( X ) = \inf\left<span class="sc">\{</span> \frac{1}{t} \ln\left( \frac{M_X( t )}{1 - \alpha} \right) \middle| t &gt; 0 \right<span class="sc">\}</span></span>
<span id="cb10-301"><a href="#cb10-301"></a>$$</span>
<span id="cb10-302"><a href="#cb10-302"></a>:::</span>
<span id="cb10-303"><a href="#cb10-303"></a>::::</span>
<span id="cb10-304"><a href="#cb10-304"></a></span>
<span id="cb10-305"><a href="#cb10-305"></a>:::: {.thmbox data-latex=""}</span>
<span id="cb10-306"><a href="#cb10-306"></a>::: {.proposition #EVaRcohe name="Coherencia de la medida EVaR"}</span>
<span id="cb10-307"><a href="#cb10-307"></a>La medida de riesgo $\EVaR_{\alpha}$ es una medida de riesgo coherente.</span>
<span id="cb10-308"><a href="#cb10-308"></a>:::</span>
<span id="cb10-309"><a href="#cb10-309"></a>::::</span>
<span id="cb10-310"><a href="#cb10-310"></a></span>
<span id="cb10-311"><a href="#cb10-311"></a>::: {.example #l7ex2}</span>
<span id="cb10-312"><a href="#cb10-312"></a>Podemos considerar el caso particular donde todos los reclamos se suponen independientes e </span>
<span id="cb10-313"><a href="#cb10-313"></a>idénticamente distribuidos (i.i.d), en este caso con distribución $X_i \rightsquigarrow LN(\mu,\sigma)$</span>
<span id="cb10-314"><a href="#cb10-314"></a><span class="in">```{r l7c2}</span></span>
<span id="cb10-315"><a href="#cb10-315"></a><span class="in">set.seed(94312)</span></span>
<span id="cb10-316"><a href="#cb10-316"></a><span class="in">u &lt;- 4</span></span>
<span id="cb10-317"><a href="#cb10-317"></a><span class="in">s &lt;- 0.5</span></span>
<span id="cb10-318"><a href="#cb10-318"></a><span class="in">n &lt;- 1e4</span></span>
<span id="cb10-319"><a href="#cb10-319"></a><span class="in">X &lt;- rlnorm( n, meanlog = u, sdlog = s )</span></span>
<span id="cb10-320"><a href="#cb10-320"></a><span class="in">alpha &lt;- seq( 0, 1, 0.01 ) </span></span>
<span id="cb10-321"><a href="#cb10-321"></a><span class="in">VaRX &lt;- quantile( X, probs = alpha, names = FALSE )</span></span>
<span id="cb10-322"><a href="#cb10-322"></a><span class="in">TVaRX &lt;- sapply( </span></span>
<span id="cb10-323"><a href="#cb10-323"></a><span class="in">  1:length( VaRX ), </span></span>
<span id="cb10-324"><a href="#cb10-324"></a><span class="in">  FUN = function( i ) ifelse( alpha[ i ] &lt; 1, ( 1 / ( 1 - alpha[ i ] ) ) * mean( X * ( X &gt; VaRX[ i ] ) ), max( X ) ) )</span></span>
<span id="cb10-325"><a href="#cb10-325"></a><span class="in">```</span></span>
<span id="cb10-326"><a href="#cb10-326"></a></span>
<span id="cb10-327"><a href="#cb10-327"></a><span class="in">```{r l7g1}</span></span>
<span id="cb10-328"><a href="#cb10-328"></a><span class="in">#| warning: false</span></span>
<span id="cb10-329"><a href="#cb10-329"></a><span class="in">#| out-width: '80%'</span></span>
<span id="cb10-330"><a href="#cb10-330"></a><span class="in">#| fig-align: center</span></span>
<span id="cb10-331"><a href="#cb10-331"></a><span class="in">#| code-fold: true</span></span>
<span id="cb10-332"><a href="#cb10-332"></a><span class="in">plt &lt;- ggplot() +</span></span>
<span id="cb10-333"><a href="#cb10-333"></a><span class="in">  geom_point( aes( x = alpha, y = VaRX ), colour = 'darkred' ) + </span></span>
<span id="cb10-334"><a href="#cb10-334"></a><span class="in">  geom_point( aes( x = alpha, y = TVaRX ), colour = 'orange' ) + </span></span>
<span id="cb10-335"><a href="#cb10-335"></a><span class="in">  xlab( TeX( "$\\alpha$" ) ) + </span></span>
<span id="cb10-336"><a href="#cb10-336"></a><span class="in">  ylab( TeX( "$VaR,TVaR$" ) ) + </span></span>
<span id="cb10-337"><a href="#cb10-337"></a><span class="in">  theme_bw()</span></span>
<span id="cb10-338"><a href="#cb10-338"></a><span class="in">plot( plt )</span></span>
<span id="cb10-339"><a href="#cb10-339"></a><span class="in">```</span></span>
<span id="cb10-340"><a href="#cb10-340"></a>:::</span>
<span id="cb10-341"><a href="#cb10-341"></a></span>
<span id="cb10-342"><a href="#cb10-342"></a><span class="co">&lt;!-------------------------------------------------------------------------------------------------&gt;</span></span>
<span id="cb10-343"><a href="#cb10-343"></a><span class="fu">## Tarificación en grandes términos {#tarificacion_grandes_terminos}</span></span>
<span id="cb10-344"><a href="#cb10-344"></a></span>
<span id="cb10-345"><a href="#cb10-345"></a>La tarificación que conlleva a la selección de la prima $\Pi$ debe tomar en cuenta como se manejan y </span>
<span id="cb10-346"><a href="#cb10-346"></a>equilibran los activos y pasivos en el negocio asegurador.</span>
<span id="cb10-347"><a href="#cb10-347"></a></span>
<span id="cb10-348"><a href="#cb10-348"></a>**Pasivos**</span>
<span id="cb10-349"><a href="#cb10-349"></a></span>
<span id="cb10-350"><a href="#cb10-350"></a><span class="ss">1. </span>Capitales propios</span>
<span id="cb10-351"><a href="#cb10-351"></a></span>
<span id="cb10-352"><a href="#cb10-352"></a><span class="ss">2. </span>Reservas técnicas</span>
<span id="cb10-353"><a href="#cb10-353"></a></span>
<span id="cb10-354"><a href="#cb10-354"></a><span class="ss">3. </span>Reservas para otros riesgos</span>
<span id="cb10-355"><a href="#cb10-355"></a></span>
<span id="cb10-356"><a href="#cb10-356"></a><span class="ss">4. </span>Deudas o depósitos en dinero recibidos por cesiones</span>
<span id="cb10-357"><a href="#cb10-357"></a></span>
<span id="cb10-358"><a href="#cb10-358"></a><span class="ss">5. </span>Otras deudas por pagar</span>
<span id="cb10-359"><a href="#cb10-359"></a></span>
<span id="cb10-360"><a href="#cb10-360"></a></span>
<span id="cb10-361"><a href="#cb10-361"></a>**Activos**</span>
<span id="cb10-362"><a href="#cb10-362"></a></span>
<span id="cb10-363"><a href="#cb10-363"></a><span class="ss">1. </span>Capital suscrito no desembolsado</span>
<span id="cb10-364"><a href="#cb10-364"></a></span>
<span id="cb10-365"><a href="#cb10-365"></a><span class="ss">2. </span>Activos no materiales</span>
<span id="cb10-366"><a href="#cb10-366"></a></span>
<span id="cb10-367"><a href="#cb10-367"></a><span class="ss">3. </span>Inversiones</span>
<span id="cb10-368"><a href="#cb10-368"></a></span>
<span id="cb10-369"><a href="#cb10-369"></a><span class="ss">4. </span>Parte de reaseguros en reservas técnicas</span>
<span id="cb10-370"><a href="#cb10-370"></a></span>
<span id="cb10-371"><a href="#cb10-371"></a><span class="ss">5. </span>Deudas por cobrar</span>
<span id="cb10-372"><a href="#cb10-372"></a></span>
<span id="cb10-373"><a href="#cb10-373"></a><span class="ss">6. </span>Otros activos</span>
<span id="cb10-374"><a href="#cb10-374"></a></span>
<span id="cb10-375"><a href="#cb10-375"></a>En el proceso de tarificación no es pertinente incluir todos los activos de la empresa, ya que </span>
<span id="cb10-376"><a href="#cb10-376"></a>muchos de estos no tienen la liquidez necesaria como para ser considerados un tipo de activo </span>
<span id="cb10-377"><a href="#cb10-377"></a>viable para la tarificación. Tampoco se toma en cuenta el dinero recibido por la cesión de primas</span>
<span id="cb10-378"><a href="#cb10-378"></a>en un ramo en particular, ya que esto constituye un nivel más arriba propio del negocio </span>
<span id="cb10-379"><a href="#cb10-379"></a>reasegurador.</span>
<span id="cb10-380"><a href="#cb10-380"></a></span>
<span id="cb10-381"><a href="#cb10-381"></a>:::: {.thmbox data-latex=""}</span>
<span id="cb10-382"><a href="#cb10-382"></a>::: {.definition #dpruin name="Probabilidad de ruina"}</span>
<span id="cb10-383"><a href="#cb10-383"></a>En términos generales se busca equilibrar el resultado operativo del ramo de negocio $R$ a lo largo </span>
<span id="cb10-384"><a href="#cb10-384"></a>de la vida del ramo. El resultado $R$ a su vez está dado por la siguiente relación:</span>
<span id="cb10-385"><a href="#cb10-385"></a>$$</span>
<span id="cb10-386"><a href="#cb10-386"></a>R = \Pi + I - S - G - K</span>
<span id="cb10-387"><a href="#cb10-387"></a>$$</span>
<span id="cb10-388"><a href="#cb10-388"></a>donde las variables a considerarse en principio son:</span>
<span id="cb10-389"><a href="#cb10-389"></a></span>
<span id="cb10-390"><a href="#cb10-390"></a><span class="ss">1. </span>$\Pi$ Ingreso por primas</span>
<span id="cb10-391"><a href="#cb10-391"></a></span>
<span id="cb10-392"><a href="#cb10-392"></a><span class="ss">2. </span>$I$ Ingreso por inversiones</span>
<span id="cb10-393"><a href="#cb10-393"></a></span>
<span id="cb10-394"><a href="#cb10-394"></a><span class="ss">3. </span>$S$ Pago de siniestros</span>
<span id="cb10-395"><a href="#cb10-395"></a></span>
<span id="cb10-396"><a href="#cb10-396"></a><span class="ss">4. </span>$G$ Gastos agregados, incluyendo gastos de emisión, operativos, gastos por reclamos</span>
<span id="cb10-397"><a href="#cb10-397"></a></span>
<span id="cb10-398"><a href="#cb10-398"></a><span class="ss">5. </span>$K$ Coste de capital, esencialmente es el retorno que se espera sobre el capital invertido por </span>
<span id="cb10-399"><a href="#cb10-399"></a>los inversores para mantener el nivel de solvencia del ramo.</span>
<span id="cb10-400"><a href="#cb10-400"></a></span>
<span id="cb10-401"><a href="#cb10-401"></a>En varias ocasiones el ciclo del negocio puede ser corto plazo y no permite considerar un ingreso </span>
<span id="cb10-402"><a href="#cb10-402"></a>por inversiones $I = 0$.</span>
<span id="cb10-403"><a href="#cb10-403"></a>$$</span>
<span id="cb10-404"><a href="#cb10-404"></a>R = \Pi - S - G - K</span>
<span id="cb10-405"><a href="#cb10-405"></a>$$</span>
<span id="cb10-406"><a href="#cb10-406"></a></span>
<span id="cb10-407"><a href="#cb10-407"></a>Sería ideal que a lo largo de la vida del ramo el resultado mantenga $R &gt; 0$, pero al tratarse de </span>
<span id="cb10-408"><a href="#cb10-408"></a>un negocio que depende de la aleatoriedad de los reclamos, es bastante complicado encontrar un </span>
<span id="cb10-409"><a href="#cb10-409"></a>costo de capital $K$ y una prima $\Pi$ que siempre asegure ante todo escenario que se mantenga </span>
<span id="cb10-410"><a href="#cb10-410"></a>la positividad. Ante este riesgo continuo se busca minimizar la **probabilidad de ruina**, es decir,</span>
<span id="cb10-411"><a href="#cb10-411"></a>acotar la probabilidad del evento $R &lt; 0$ a un nivel de confianza $\alpha &gt; 0$ adecuado</span>
<span id="cb10-412"><a href="#cb10-412"></a>$$</span>
<span id="cb10-413"><a href="#cb10-413"></a>P( R &lt; 0 ) &lt; \alpha</span>
<span id="cb10-414"><a href="#cb10-414"></a>$$</span>
<span id="cb10-415"><a href="#cb10-415"></a>:::</span>
<span id="cb10-416"><a href="#cb10-416"></a>::::</span>
<span id="cb10-417"><a href="#cb10-417"></a></span>
<span id="cb10-418"><a href="#cb10-418"></a>Muchas de las veces se parte del principio de equilibrio financiero \@ref(sec:equifin), donde </span>
<span id="cb10-419"><a href="#cb10-419"></a>se busca la igualdad $\E<span class="co">[</span><span class="ot">R</span><span class="co">]</span> = 0$, la misma implica la siguiente relación:</span>
<span id="cb10-420"><a href="#cb10-420"></a>$$</span>
<span id="cb10-421"><a href="#cb10-421"></a>\begin{split}</span>
<span id="cb10-422"><a href="#cb10-422"></a>0 &amp; = \E<span class="co">[</span><span class="ot">R</span><span class="co">]</span> <span class="sc">\\</span></span>
<span id="cb10-423"><a href="#cb10-423"></a>0 &amp; = \E<span class="co">[</span><span class="ot">R\mid R \geq 0</span><span class="co">]</span>P( R \geq 0 ) + \E<span class="co">[</span><span class="ot">R\mid R &lt; 0</span><span class="co">]</span>P( R &lt; 0 ) <span class="sc">\\</span></span>
<span id="cb10-424"><a href="#cb10-424"></a>\E<span class="co">[</span><span class="ot">R\mid R \geq 0</span><span class="co">]</span>P( R \geq 0 ) &amp; = -\E<span class="co">[</span><span class="ot">R\mid R &lt; 0</span><span class="co">]</span>P( R &lt; 0 ) <span class="sc">\\</span></span>
<span id="cb10-425"><a href="#cb10-425"></a>\frac{P( R &lt; 0 )}{P( R \geq 0 ) } &amp; = -\frac{\E<span class="co">[</span><span class="ot">R\mid R \geq 0</span><span class="co">]</span>}{\E<span class="co">[</span><span class="ot">R\mid R &lt; 0</span><span class="co">]</span>}</span>
<span id="cb10-426"><a href="#cb10-426"></a>\end{split}</span>
<span id="cb10-427"><a href="#cb10-427"></a>$$</span>
<span id="cb10-428"><a href="#cb10-428"></a>en el equilibrio financiero, la proporción de la probabilidad de ruina respecto de la probabilidad</span>
<span id="cb10-429"><a href="#cb10-429"></a>de no estar en ruina es igual a la proporción entre la esperanza condicional del resultado cuando </span>
<span id="cb10-430"><a href="#cb10-430"></a>no se produce la ruina respecto de la esperanza condicional cuando si se produce la ruina. </span>
<span id="cb10-431"><a href="#cb10-431"></a></span>
<span id="cb10-432"><a href="#cb10-432"></a>Un modelo puede estar equilibrado financieramente $\E<span class="co">[</span><span class="ot">R</span><span class="co">]</span> = 0$, pero se desconoce la </span>
<span id="cb10-433"><a href="#cb10-433"></a>probabilidad de ruina $P( R &lt; 0)$, esta podría ser muy grande. La razón anterior permite estimar</span>
<span id="cb10-434"><a href="#cb10-434"></a>la relevancia de la probabilidad de ruina en un modelo equilibrado, con el uso de las esperanzas</span>
<span id="cb10-435"><a href="#cb10-435"></a>condicionales.</span>
<span id="cb10-436"><a href="#cb10-436"></a></span>
<span id="cb10-437"><a href="#cb10-437"></a>Es usual asumir que la única parte aleatoria de $R$ viene dada por el valor de los reclamos totales,</span>
<span id="cb10-438"><a href="#cb10-438"></a>en razón de esto se tiene:</span>
<span id="cb10-439"><a href="#cb10-439"></a>$$</span>
<span id="cb10-440"><a href="#cb10-440"></a>\E<span class="co">[</span><span class="ot"> R </span><span class="co">]</span> </span>
<span id="cb10-441"><a href="#cb10-441"></a>= \E<span class="co">[</span><span class="ot"> \Pi - S - G - K </span><span class="co">]</span> </span>
<span id="cb10-442"><a href="#cb10-442"></a>= \Pi - \E<span class="co">[</span><span class="ot">S</span><span class="co">]</span> - G - K</span>
<span id="cb10-443"><a href="#cb10-443"></a>$$</span>
<span id="cb10-444"><a href="#cb10-444"></a></span>
<span id="cb10-445"><a href="#cb10-445"></a>El **coste de capital** $K$ como ya lo mencionamos es el retorno mínimo esperado por los inversores </span>
<span id="cb10-446"><a href="#cb10-446"></a>sobre el capital invertido. Usualmente este capital puede ser visto como un porcentaje </span>
<span id="cb10-447"><a href="#cb10-447"></a>$r &gt; 0$ que se toma sobre el capital colocado para mantener un nivel de solvencia adecuado </span>
<span id="cb10-448"><a href="#cb10-448"></a>sobre el valor esperado  $\E<span class="co">[</span><span class="ot">S</span><span class="co">]</span>$ del total de reclamos $S$. Para ello se suele utilizar precisamente</span>
<span id="cb10-449"><a href="#cb10-449"></a>una medida de **medida de riesgo** $\rho$ que permita mantener el nivel de solvencia.</span>
<span id="cb10-450"><a href="#cb10-450"></a>$$</span>
<span id="cb10-451"><a href="#cb10-451"></a>K = r\left( \rho( S ) - \E<span class="co">[</span><span class="ot">S</span><span class="co">]</span> \right)</span>
<span id="cb10-452"><a href="#cb10-452"></a>$$</span>
<span id="cb10-453"><a href="#cb10-453"></a>con esta perspectiva</span>
<span id="cb10-454"><a href="#cb10-454"></a>$$</span>
<span id="cb10-455"><a href="#cb10-455"></a>\E<span class="co">[</span><span class="ot"> R </span><span class="co">]</span> </span>
<span id="cb10-456"><a href="#cb10-456"></a>= \E\left<span class="co">[</span><span class="ot"> \Pi - S - G - r\left( \rho( S ) - \E[S] \right) \right</span><span class="co">]</span> </span>
<span id="cb10-457"><a href="#cb10-457"></a>= \Pi - \E<span class="co">[</span><span class="ot">S</span><span class="co">]</span> - G - r \left( \rho(S) - \E<span class="co">[</span><span class="ot">S</span><span class="co">]</span> \right)</span>
<span id="cb10-458"><a href="#cb10-458"></a>$$</span>
<span id="cb10-459"><a href="#cb10-459"></a></span>
<span id="cb10-460"><a href="#cb10-460"></a>:::: {.thmbox data-latex=""}</span>
<span id="cb10-461"><a href="#cb10-461"></a>::: {.definition #dpricing name="Tarificación (Pricing)"}</span>
<span id="cb10-462"><a href="#cb10-462"></a>Lo que se busca es evitar la ruina y por tanto se busca cubrirse ante el evento $R &lt; 0$, desde una </span>
<span id="cb10-463"><a href="#cb10-463"></a>perspectiva probabilista esto se puede realizar seleccionando un nivel de cobertura $\alpha &gt; 0$, </span>
<span id="cb10-464"><a href="#cb10-464"></a>que acote la probabilidad del evento de ruina.</span>
<span id="cb10-465"><a href="#cb10-465"></a>$$</span>
<span id="cb10-466"><a href="#cb10-466"></a>P( R &lt; 0 ) </span>
<span id="cb10-467"><a href="#cb10-467"></a>= P( \Pi - S - G - K &lt; 0 )</span>
<span id="cb10-468"><a href="#cb10-468"></a>= P\left( \Pi - S - G - r\left( \rho(S) - \E<span class="co">[</span><span class="ot">S</span><span class="co">]</span> \right) &lt; 0 \right) &lt; \alpha.</span>
<span id="cb10-469"><a href="#cb10-469"></a>$$</span>
<span id="cb10-470"><a href="#cb10-470"></a></span>
<span id="cb10-471"><a href="#cb10-471"></a>De la relación anterior se observa que una vez seleccionado el nivel de cobertura $\alpha$ y la </span>
<span id="cb10-472"><a href="#cb10-472"></a>medida de riesgo $\rho$, las variables correspondientes a la prima $\Pi$ y a los gastos $G$ quedan </span>
<span id="cb10-473"><a href="#cb10-473"></a>libres, de ahí resulta un margen que permite seleccionar la prima más óptima para un producto de </span>
<span id="cb10-474"><a href="#cb10-474"></a>seguro, así como también optimizar los gastos $G$. Este proceso de selección es precisamente lo que </span>
<span id="cb10-475"><a href="#cb10-475"></a>llamamos en este contexto como **tarificación** (pricing).</span>
<span id="cb10-476"><a href="#cb10-476"></a>:::</span>
<span id="cb10-477"><a href="#cb10-477"></a>::::</span>
<span id="cb10-478"><a href="#cb10-478"></a></span>
<span id="cb10-479"><a href="#cb10-479"></a>Razonando un poco más al respecto, si asumimos que se dispone de la distribución acumulada $F_S$</span>
<span id="cb10-480"><a href="#cb10-480"></a>de $S$, se puede obtener las siguientes expresiones:</span>
<span id="cb10-481"><a href="#cb10-481"></a>$$</span>
<span id="cb10-482"><a href="#cb10-482"></a>\begin{split}</span>
<span id="cb10-483"><a href="#cb10-483"></a>P\left( \Pi - S - G - K &lt; 0 \right) &amp; &lt; \alpha <span class="sc">\\</span></span>
<span id="cb10-484"><a href="#cb10-484"></a>P\left( S &gt; \Pi - G - K \right) &amp; &lt; \alpha  <span class="sc">\\</span></span>
<span id="cb10-485"><a href="#cb10-485"></a>1 - P\left( S \leq \Pi - G - K \right) &amp; &lt; \alpha <span class="sc">\\</span></span>
<span id="cb10-486"><a href="#cb10-486"></a>P\left( S \leq \Pi - G - K \right) &amp; &gt; 1 - \alpha <span class="sc">\\</span></span>
<span id="cb10-487"><a href="#cb10-487"></a>F_S\left( \Pi - G - K \right) &amp; &gt; 1 - \alpha <span class="sc">\\</span></span>
<span id="cb10-488"><a href="#cb10-488"></a>F_S\left( \Pi - G - K \right) &amp; \in \left( 1 - \alpha, +\infty \right), \qquad</span>
<span id="cb10-489"><a href="#cb10-489"></a>\text{la desigualdad anterior es equivalente a la inclusión}<span class="sc">\\</span></span>
<span id="cb10-490"><a href="#cb10-490"></a>\Pi - G - K &amp; \in F_S^{-1}\left( \left( 1 - \alpha, +\infty \right) \right),\qquad</span>
<span id="cb10-491"><a href="#cb10-491"></a>\text{por propiedades de la inversión de funciones}<span class="sc">\\</span></span>
<span id="cb10-492"><a href="#cb10-492"></a>\Pi &amp; \geq G + K + F_S^{-1}\left( 1 - \alpha \right), \qquad </span>
<span id="cb10-493"><a href="#cb10-493"></a>\text{como $F_S$ es creciente, mínimo se debe satisfacer la desigualdad}</span>
<span id="cb10-494"><a href="#cb10-494"></a>\end{split}</span>
<span id="cb10-495"><a href="#cb10-495"></a>$$</span>
<span id="cb10-496"><a href="#cb10-496"></a>En especial cuando $K = r\left( \rho(S) - \E<span class="co">[</span><span class="ot">S</span><span class="co">]</span> \right)$, la última desigualdad toma la forma</span>
<span id="cb10-497"><a href="#cb10-497"></a>$$</span>
<span id="cb10-498"><a href="#cb10-498"></a>\Pi \geq G + r\left( \rho(S) - \E<span class="co">[</span><span class="ot">S</span><span class="co">]</span> \right) + F_S^{-1}\left( 1 - \alpha \right)</span>
<span id="cb10-499"><a href="#cb10-499"></a>$$</span>
<span id="cb10-500"><a href="#cb10-500"></a></span>
<span id="cb10-501"><a href="#cb10-501"></a>Así, en el caso anterior si se utiliza como medida de riesgo al mismo nivel de confianza $1 - \alpha$, </span>
<span id="cb10-502"><a href="#cb10-502"></a>esto es $\rho( S ) = \VaR_{1-\alpha}( S ) = F_S^{-1}( 1 - \alpha )$, la última igualdad se cumple si $S$</span>
<span id="cb10-503"><a href="#cb10-503"></a>es una variable aleatoria continua.</span>
<span id="cb10-504"><a href="#cb10-504"></a>$$</span>
<span id="cb10-505"><a href="#cb10-505"></a>\Pi \geq G + (1 + r) F_S^{-1}\left( 1 - \alpha \right) - r \E<span class="co">[</span><span class="ot">S</span><span class="co">]</span> </span>
<span id="cb10-506"><a href="#cb10-506"></a>$$</span>
<span id="cb10-507"><a href="#cb10-507"></a></span>
<span id="cb10-508"><a href="#cb10-508"></a>Si en caso los gastos $G$ son proporcionales a la prima $G = \gamma \Pi$, para una constante </span>
<span id="cb10-509"><a href="#cb10-509"></a>$\gamma &gt; 0$, y seguramente $\gamma &lt; 1$ ya que es de esperar gastos no mayores a la misma prima, </span>
<span id="cb10-510"><a href="#cb10-510"></a>sino esto estaría en una situación insostenible donde los gastos son mayores a la cobertura del </span>
<span id="cb10-511"><a href="#cb10-511"></a>riesgo. Las desigualdades anteriores toman la forma:</span>
<span id="cb10-512"><a href="#cb10-512"></a>$$</span>
<span id="cb10-513"><a href="#cb10-513"></a>\begin{split}</span>
<span id="cb10-514"><a href="#cb10-514"></a>\Pi &amp; \geq \frac{r}{1 - \gamma} K + \frac{1}{1 - \gamma} F_S^{-1}\left( 1 - \alpha \right) <span class="sc">\\</span></span>
<span id="cb10-515"><a href="#cb10-515"></a>\Pi &amp; \geq \frac{r}{1 - \gamma} \left( \rho(S) - \E<span class="co">[</span><span class="ot">S</span><span class="co">]</span> \right) + \frac{1}{1 - \gamma} F_S^{-1}\left( 1 - \alpha \right) <span class="sc">\\</span></span>
<span id="cb10-516"><a href="#cb10-516"></a>\Pi &amp; \geq \frac{1 + r}{1 - \gamma} F_S^{-1}\left( 1 - \alpha \right) -  \frac{r}{1 - \gamma} \E<span class="co">[</span><span class="ot">S</span><span class="co">]</span></span>
<span id="cb10-517"><a href="#cb10-517"></a>\end{split}</span>
<span id="cb10-518"><a href="#cb10-518"></a>$$</span>
<span id="cb10-519"><a href="#cb10-519"></a></span>
<span id="cb10-520"><a href="#cb10-520"></a>De lo anterior se observa, que un buen inicio para estimar la prima de riesgo es ciertamente </span>
<span id="cb10-521"><a href="#cb10-521"></a>usar la medida $\VaR_{1-\alpha}$ al nivel adecuado de confianza $\alpha$.</span>
<span id="cb10-522"><a href="#cb10-522"></a></span>
<span id="cb10-523"><a href="#cb10-523"></a><span class="co">&lt;!-------------------------------------------------------------------------------------------------&gt;</span></span>
<span id="cb10-524"><a href="#cb10-524"></a><span class="fu">## Prima {#prima}</span></span>
<span id="cb10-525"><a href="#cb10-525"></a>La prima es la cantidad de dinero que un individuo o entidad pagan por una póliza de seguro, la cual</span>
<span id="cb10-526"><a href="#cb10-526"></a>está diseñada para cubrir ciertos riesgos personales o comerciales.</span>
<span id="cb10-527"><a href="#cb10-527"></a></span>
<span id="cb10-528"><a href="#cb10-528"></a>La determinación de las primas por parte del asegurador hace uso de la mutualización del riesgo y</span>
<span id="cb10-529"><a href="#cb10-529"></a>diversificación, para así poder asumir la transferencia del riesgo por parte de sus asegurados. Así</span>
<span id="cb10-530"><a href="#cb10-530"></a>por tanto, es deseable que cualquier método que se utilice para la estimación de primas, se </span>
<span id="cb10-531"><a href="#cb10-531"></a>satisfaga, algunas propiedades importantes.</span>
<span id="cb10-532"><a href="#cb10-532"></a></span>
<span id="cb10-533"><a href="#cb10-533"></a>Sin consideramos dos riesgos a cubrir $S_1$ y $S_2$, entonces la función que estima $\rho$ las primas </span>
<span id="cb10-534"><a href="#cb10-534"></a>sería aconsejable satisfaga las siguientes propiedades.</span>
<span id="cb10-535"><a href="#cb10-535"></a></span>
<span id="cb10-536"><a href="#cb10-536"></a><span class="ss">1. </span>Si se decide cubrir por completo dos riesgos $S_1$ y $S_2$ en un mismo producto, el valor de la </span>
<span id="cb10-537"><a href="#cb10-537"></a>prima deberá ser menor o igual al valor que se resultaría de cubrir cada uno de los riesgos con </span>
<span id="cb10-538"><a href="#cb10-538"></a>productos separados.</span>
<span id="cb10-539"><a href="#cb10-539"></a>$$</span>
<span id="cb10-540"><a href="#cb10-540"></a>\rho( S_1 + S_2 ) \leq \rho( S_1 ) + \rho( S_2 )</span>
<span id="cb10-541"><a href="#cb10-541"></a>$$</span>
<span id="cb10-542"><a href="#cb10-542"></a></span>
<span id="cb10-543"><a href="#cb10-543"></a><span class="ss">2. </span>El asumir mayor riesgo debe tener como consecuencia el aumento de la prima</span>
<span id="cb10-544"><a href="#cb10-544"></a>$$</span>
<span id="cb10-545"><a href="#cb10-545"></a>\rho( S_1 ) \leq \rho( S_1 + S_2 )</span>
<span id="cb10-546"><a href="#cb10-546"></a>$$</span>
<span id="cb10-547"><a href="#cb10-547"></a>Esta propiedad implica que al configurar un producto de seguro con mejor cobertura, se espera </span>
<span id="cb10-548"><a href="#cb10-548"></a>una prima de mayor costo.</span>
<span id="cb10-549"><a href="#cb10-549"></a></span>
<span id="cb10-550"><a href="#cb10-550"></a><span class="ss">3. </span>Si el riesgo a cubrir está limitado, es decir $P( S \leq M ) = 1$, para un valor $M &gt; 0$, </span>
<span id="cb10-551"><a href="#cb10-551"></a>entonces jamás la prima será superior a $M$</span>
<span id="cb10-552"><a href="#cb10-552"></a>$$</span>
<span id="cb10-553"><a href="#cb10-553"></a>\rho( S ) \leq M</span>
<span id="cb10-554"><a href="#cb10-554"></a>$$</span>
<span id="cb10-555"><a href="#cb10-555"></a>Esto se traduce a que ningún asegurado estará interesado en adquirir una póliza para cubrir un </span>
<span id="cb10-556"><a href="#cb10-556"></a>riesgo por encima del valor total asegurado.</span>
<span id="cb10-557"><a href="#cb10-557"></a></span>
<span id="cb10-558"><a href="#cb10-558"></a>Es así que hay algunos principios para la estimación de primas, aquí citamos algunos de los más </span>
<span id="cb10-559"><a href="#cb10-559"></a>conocidos:</span>
<span id="cb10-560"><a href="#cb10-560"></a></span>
<span id="cb10-561"><a href="#cb10-561"></a><span class="ss">1. </span>Prima neta, o prima pura de riesgo</span>
<span id="cb10-562"><a href="#cb10-562"></a>$$</span>
<span id="cb10-563"><a href="#cb10-563"></a>  \Pi = \rho( S ) = \E<span class="co">[</span><span class="ot">S</span><span class="co">]</span> \approx \overline{S}</span>
<span id="cb10-564"><a href="#cb10-564"></a>$$</span>
<span id="cb10-565"><a href="#cb10-565"></a></span>
<span id="cb10-566"><a href="#cb10-566"></a><span class="ss">2. </span>Prima de riesgo con recargo sobre la esperanza matemática</span>
<span id="cb10-567"><a href="#cb10-567"></a>$$</span>
<span id="cb10-568"><a href="#cb10-568"></a>  \Pi = \rho( S ) = (1 + \rho) \E<span class="co">[</span><span class="ot">S</span><span class="co">]</span> \approx (1 + \rho) \overline{S}</span>
<span id="cb10-569"><a href="#cb10-569"></a>$$</span>
<span id="cb10-570"><a href="#cb10-570"></a></span>
<span id="cb10-571"><a href="#cb10-571"></a><span class="ss">3. </span>Prima de riesgo con recargo sobre la varianza</span>
<span id="cb10-572"><a href="#cb10-572"></a>$$</span>
<span id="cb10-573"><a href="#cb10-573"></a>  \Pi = \rho( S ) = \E<span class="co">[</span><span class="ot">S</span><span class="co">]</span> + \rho \V<span class="co">[</span><span class="ot">S</span><span class="co">]</span> </span>
<span id="cb10-574"><a href="#cb10-574"></a>  \approx \overline{S} + \rho \sigma_S^2</span>
<span id="cb10-575"><a href="#cb10-575"></a>$$</span>
<span id="cb10-576"><a href="#cb10-576"></a></span>
<span id="cb10-577"><a href="#cb10-577"></a><span class="ss">4. </span>Prima de riesgo con recargo sobre la desviación</span>
<span id="cb10-578"><a href="#cb10-578"></a>$$</span>
<span id="cb10-579"><a href="#cb10-579"></a>  \Pi = \rho( S ) = \E<span class="co">[</span><span class="ot">S</span><span class="co">]</span> + \rho \sqrt{\V<span class="co">[</span><span class="ot">S</span><span class="co">]</span>}</span>
<span id="cb10-580"><a href="#cb10-580"></a>  \approx \overline{S} + \rho \sigma_S</span>
<span id="cb10-581"><a href="#cb10-581"></a>$$ </span>
<span id="cb10-582"><a href="#cb10-582"></a></span>
<span id="cb10-583"><a href="#cb10-583"></a><span class="ss">5. </span>Prima de riesgo con principio exponencial para $t &gt; 0$</span>
<span id="cb10-584"><a href="#cb10-584"></a>$$</span>
<span id="cb10-585"><a href="#cb10-585"></a>  \Pi = \rho( S )</span>
<span id="cb10-586"><a href="#cb10-586"></a>  = \frac{1}{2} \E\left<span class="co">[</span><span class="ot">\exp(tS)\right</span><span class="co">]</span></span>
<span id="cb10-587"><a href="#cb10-587"></a>  = \frac{1}{2} M_N\big( \ln M_X( t ) \big)</span>
<span id="cb10-588"><a href="#cb10-588"></a>  \approx \frac{1}{m} \sum\limits_{i=1}^m \exp\left(t S_i\right)</span>
<span id="cb10-589"><a href="#cb10-589"></a>$$</span>
<span id="cb10-590"><a href="#cb10-590"></a></span>
<span id="cb10-591"><a href="#cb10-591"></a><span class="ss">6. </span>Prima de percentiles para un valor de confianza $\alpha \in <span class="co">[</span><span class="ot">0,1</span><span class="co">]</span>$ o prima de valor en riesgo </span>
<span id="cb10-592"><a href="#cb10-592"></a>$VaR_\alpha$</span>
<span id="cb10-593"><a href="#cb10-593"></a>$$</span>
<span id="cb10-594"><a href="#cb10-594"></a>  \Pi = \rho( S ) = \VaR_\alpha( S ) =  F_S^{-1}( \alpha )</span>
<span id="cb10-595"><a href="#cb10-595"></a>$$</span>
<span id="cb10-596"><a href="#cb10-596"></a></span>
<span id="cb10-597"><a href="#cb10-597"></a><span class="ss">7. </span>Prima de valor en riesgo en la cola (Tail Value at Risk) $TVaR_\alpha$. Es el promedio uniforme</span>
<span id="cb10-598"><a href="#cb10-598"></a>de todos los valores en riesgo $VaR_u$, con $u \geq \alpha$.</span>
<span id="cb10-599"><a href="#cb10-599"></a>$$</span>
<span id="cb10-600"><a href="#cb10-600"></a>  \Pi = \rho( S ) = \TVaR_\alpha( S ) = \frac{1}{1-\alpha} \int\limits_{\alpha}^1 \VaR_u( S )\ du</span>
<span id="cb10-601"><a href="#cb10-601"></a>$$</span>
<span id="cb10-602"><a href="#cb10-602"></a></span>
<span id="cb10-603"><a href="#cb10-603"></a>::: {.example #l7ex1}</span>
<span id="cb10-604"><a href="#cb10-604"></a>Consideremos el caso donde todos los siniestros son igualmente distribuidos e independientes (i.i.d) </span>
<span id="cb10-605"><a href="#cb10-605"></a>$X_i \rightsquigarrow Gamma( \alpha_i, \theta )$, para $i \in <span class="sc">\{</span>1,\ldots,n<span class="sc">\}</span>$, el número de </span>
<span id="cb10-606"><a href="#cb10-606"></a>unidades aseguradas está dado por $n \in \N$. Utilizaremos el modelo individual para</span>
<span id="cb10-607"><a href="#cb10-607"></a>la agregación de los reclamos y obtener el reclamo total $S = \sum\limits_{i=1}^n X_i$.</span>
<span id="cb10-608"><a href="#cb10-608"></a></span>
<span id="cb10-609"><a href="#cb10-609"></a>Como todas las variables $X_i$ siguen una ley $Gamma( \alpha_i, \theta )$, sabemos que la </span>
<span id="cb10-610"><a href="#cb10-610"></a>familia $Gamma$ es cerrada por adición, es decir, a suma de variables aleatorias con ley $Gamma$</span>
<span id="cb10-611"><a href="#cb10-611"></a>también sigue una ley $Gamma$. En este caso en particular para el reclamo total tenemos que </span>
<span id="cb10-612"><a href="#cb10-612"></a>$S \rightsquigarrow Gamma\left( \sum\limits_{i=1}^n \alpha_i, \theta \right)$.</span>
<span id="cb10-613"><a href="#cb10-613"></a></span>
<span id="cb10-614"><a href="#cb10-614"></a>Es de notar que para cada $i\in <span class="sc">\{</span>1,\ldots,n<span class="sc">\}</span>$, la variable aleatoria $X_i$ correspondiente al</span>
<span id="cb10-615"><a href="#cb10-615"></a>$i$-ésimo reclamo tiene como parámetro un diferente factor $\alpha_i$, pero el mismo factor </span>
<span id="cb10-616"><a href="#cb10-616"></a>$\theta$. </span>
<span id="cb10-617"><a href="#cb10-617"></a></span>
<span id="cb10-618"><a href="#cb10-618"></a>Ya que cada $X_i \rightsquigarrow Gamma( \alpha_i, \theta )$, podemos calcular de forma determinista</span>
<span id="cb10-619"><a href="#cb10-619"></a>las esperanzas de $\E<span class="co">[</span><span class="ot">X_i</span><span class="co">]</span>$, para cada $i \in <span class="sc">\{</span>1,\ldots,n<span class="sc">\}</span>$ y de igual forma podemos </span>
<span id="cb10-620"><a href="#cb10-620"></a>calcular la esperanza del reclamo total $\E<span class="co">[</span><span class="ot">S</span><span class="co">]</span> = \sum\limits_{i=1}^n \E<span class="co">[</span><span class="ot">X_i</span><span class="co">]</span>$. </span>
<span id="cb10-621"><a href="#cb10-621"></a>Además como asumimos independencia entre los $X_i$, la varianza de $S$ también puede ser calculada</span>
<span id="cb10-622"><a href="#cb10-622"></a>fácilmente como $\V<span class="co">[</span><span class="ot">S</span><span class="co">]</span> = \sum\limits_{i=1}^n \V<span class="co">[</span><span class="ot">X_i</span><span class="co">]</span>$.</span>
<span id="cb10-623"><a href="#cb10-623"></a></span>
<span id="cb10-624"><a href="#cb10-624"></a>También estamos en la capacidad de simular la variable $S$ utilizando un algoritmo de aleatorio, </span>
<span id="cb10-625"><a href="#cb10-625"></a>para así aproximar los cálculos de sus momentos y otros estadísticos. Primeramente definamos los </span>
<span id="cb10-626"><a href="#cb10-626"></a>parámetros.</span>
<span id="cb10-627"><a href="#cb10-627"></a><span class="in">```{r l7c3}</span></span>
<span id="cb10-628"><a href="#cb10-628"></a><span class="in"># número de unidades aseguradas</span></span>
<span id="cb10-629"><a href="#cb10-629"></a><span class="in">n &lt;- 1000</span></span>
<span id="cb10-630"><a href="#cb10-630"></a></span>
<span id="cb10-631"><a href="#cb10-631"></a><span class="in"># parámetros para cada X_i</span></span>
<span id="cb10-632"><a href="#cb10-632"></a><span class="in">a &lt;- runif( n, 5, 10 )</span></span>
<span id="cb10-633"><a href="#cb10-633"></a></span>
<span id="cb10-634"><a href="#cb10-634"></a><span class="in"># parámetro theta, común a todas las X_i</span></span>
<span id="cb10-635"><a href="#cb10-635"></a><span class="in">theta &lt;- 4</span></span>
<span id="cb10-636"><a href="#cb10-636"></a></span>
<span id="cb10-637"><a href="#cb10-637"></a><span class="in"># parámetro para S</span></span>
<span id="cb10-638"><a href="#cb10-638"></a><span class="in">A &lt;- sum( a )</span></span>
<span id="cb10-639"><a href="#cb10-639"></a><span class="in">```</span></span>
<span id="cb10-640"><a href="#cb10-640"></a></span>
<span id="cb10-641"><a href="#cb10-641"></a><span class="in">```{r l7c4}</span></span>
<span id="cb10-642"><a href="#cb10-642"></a><span class="in">EX &lt;- a * theta</span></span>
<span id="cb10-643"><a href="#cb10-643"></a><span class="in">VX &lt;- a * theta^2</span></span>
<span id="cb10-644"><a href="#cb10-644"></a><span class="in">ES &lt;- sum( EX )</span></span>
<span id="cb10-645"><a href="#cb10-645"></a><span class="in">VS &lt;- sum( VX )</span></span>
<span id="cb10-646"><a href="#cb10-646"></a><span class="in">SDS &lt;- sqrt( VS )</span></span>
<span id="cb10-647"><a href="#cb10-647"></a><span class="in">```</span></span>
<span id="cb10-648"><a href="#cb10-648"></a></span>
<span id="cb10-649"><a href="#cb10-649"></a>La variable aleatoria del reclamo total $S$ la podemos simular tomando una muestra i.i.d de tamaño $m$, </span>
<span id="cb10-650"><a href="#cb10-650"></a>i.e. $S_1,\ldots,S_m$ de la distribución $Gamma\left( \sum\limits_{i=1}^n \alpha_i, \theta \right)$.</span>
<span id="cb10-651"><a href="#cb10-651"></a><span class="in">```{r l7c5}</span></span>
<span id="cb10-652"><a href="#cb10-652"></a><span class="in">m &lt;- 1e5</span></span>
<span id="cb10-653"><a href="#cb10-653"></a><span class="in">S &lt;- rgamma( m, shape = A, scale = theta )</span></span>
<span id="cb10-654"><a href="#cb10-654"></a><span class="in">```</span> </span>
<span id="cb10-655"><a href="#cb10-655"></a></span>
<span id="cb10-656"><a href="#cb10-656"></a>Prima pura:</span>
<span id="cb10-657"><a href="#cb10-657"></a><span class="in">```{r l7c6}</span></span>
<span id="cb10-658"><a href="#cb10-658"></a><span class="in">P &lt;- ES</span></span>
<span id="cb10-659"><a href="#cb10-659"></a><span class="in">P &lt;- mean( S )</span></span>
<span id="cb10-660"><a href="#cb10-660"></a></span>
<span id="cb10-661"><a href="#cb10-661"></a><span class="in">alpha &lt;- 0.95</span></span>
<span id="cb10-662"><a href="#cb10-662"></a><span class="in">P_avg &lt;- ( 1 + alpha ) * ES</span></span>
<span id="cb10-663"><a href="#cb10-663"></a><span class="in">P_avg &lt;- ( 1 + alpha ) * mean( S )</span></span>
<span id="cb10-664"><a href="#cb10-664"></a></span>
<span id="cb10-665"><a href="#cb10-665"></a><span class="in">P_var &lt;- ES + alpha * VS</span></span>
<span id="cb10-666"><a href="#cb10-666"></a><span class="in">P_var &lt;- mean( S ) + alpha * var( S )</span></span>
<span id="cb10-667"><a href="#cb10-667"></a></span>
<span id="cb10-668"><a href="#cb10-668"></a><span class="in">P_sde &lt;- ES + alpha * SDS</span></span>
<span id="cb10-669"><a href="#cb10-669"></a><span class="in">P_sde &lt;- mean( S ) + alpha * sd( S )</span></span>
<span id="cb10-670"><a href="#cb10-670"></a></span>
<span id="cb10-671"><a href="#cb10-671"></a><span class="in">VaRS &lt;- qgamma( alpha, shape = A, scale = theta )</span></span>
<span id="cb10-672"><a href="#cb10-672"></a><span class="in">P_VaR &lt;- VaRS</span></span>
<span id="cb10-673"><a href="#cb10-673"></a><span class="in">P_VaR &lt;- quantile( S, probs = alpha )</span></span>
<span id="cb10-674"><a href="#cb10-674"></a></span>
<span id="cb10-675"><a href="#cb10-675"></a><span class="in">P_TVaR &lt;- ( 1 / ( 1 - alpha ) ) * ( A * theta ) * ( 1 - pgamma( VaRS, shape = A + 1, scale = theta ) )</span></span>
<span id="cb10-676"><a href="#cb10-676"></a><span class="in">P_TVaR &lt;- ( 1 / ( 1 - alpha ) ) * integrate( f = function( u ) qgamma( u, shape = A, scale = theta ), alpha, 1 )$value</span></span>
<span id="cb10-677"><a href="#cb10-677"></a><span class="in">P_TVaR &lt;- mean( sapply( runif( m, alpha, 1 ), FUN = function( k ) qgamma( k, shape = A, scale = theta ) ) )</span></span>
<span id="cb10-678"><a href="#cb10-678"></a><span class="in">I &lt;- as.numeric( S &gt; VaRS )</span></span>
<span id="cb10-679"><a href="#cb10-679"></a><span class="in">P_TVaR &lt;- mean( S * I ) / mean( I )</span></span>
<span id="cb10-680"><a href="#cb10-680"></a><span class="in">```</span></span>
<span id="cb10-681"><a href="#cb10-681"></a>:::</span>
<span id="cb10-682"><a href="#cb10-682"></a></span>
<span id="cb10-683"><a href="#cb10-683"></a><span class="co">&lt;!-------------------------------------------------------------------------------------------------&gt;</span></span>
<span id="cb10-684"><a href="#cb10-684"></a><span class="fu">## Segmentación</span></span>
<span id="cb10-685"><a href="#cb10-685"></a></span>
<span id="cb10-686"><a href="#cb10-686"></a>En muchas ocasiones es necesario tener en cuenta algunas características asociadas al riesgo </span>
<span id="cb10-687"><a href="#cb10-687"></a>asegurado, de tal forma que la prima sea lo más eficiente y adecuada según el riesgo cubierto y</span>
<span id="cb10-688"><a href="#cb10-688"></a>las características del mismo. La idea de segmentar la población es obtener grupos homogéneos </span>
<span id="cb10-689"><a href="#cb10-689"></a>con riesgos similares.</span>
<span id="cb10-690"><a href="#cb10-690"></a></span>
<span id="cb10-691"><a href="#cb10-691"></a>Sin segmentación de la población, este el caso más sencillo para la tarificación, el asegurado</span>
<span id="cb10-692"><a href="#cb10-692"></a></span>
<span id="cb10-693"><a href="#cb10-693"></a><span class="in">```{r l7t1}</span></span>
<span id="cb10-694"><a href="#cb10-694"></a><span class="in">#| echo: true</span></span>
<span id="cb10-695"><a href="#cb10-695"></a><span class="in">#| out-width: '100%'</span></span>
<span id="cb10-696"><a href="#cb10-696"></a><span class="in">#| code-fold: true</span></span>
<span id="cb10-697"><a href="#cb10-697"></a><span class="in">dat &lt;- data.table( nom = c( 'Pago', 'Pago esperado', 'Varianza' ),</span></span>
<span id="cb10-698"><a href="#cb10-698"></a><span class="in">                   cl = c( "$\\E[S]$", "$\\E[S]$", "$0$" ), </span></span>
<span id="cb10-699"><a href="#cb10-699"></a><span class="in">                   as = c( "$S - \\E[S]$", "$0$", "$\\V[S]$" ) )</span></span>
<span id="cb10-700"><a href="#cb10-700"></a><span class="in">dat %&gt;%</span></span>
<span id="cb10-701"><a href="#cb10-701"></a><span class="in">  kable(</span></span>
<span id="cb10-702"><a href="#cb10-702"></a><span class="in">    label = NA,</span></span>
<span id="cb10-703"><a href="#cb10-703"></a><span class="in">    caption = 'Transferencia de riesgo sin segmentación',</span></span>
<span id="cb10-704"><a href="#cb10-704"></a><span class="in">    row.names = FALSE,</span></span>
<span id="cb10-705"><a href="#cb10-705"></a><span class="in">    col.names = c( '', 'Asegurado', 'Asegurador' ),</span></span>
<span id="cb10-706"><a href="#cb10-706"></a><span class="in">    align = 'lrr',</span></span>
<span id="cb10-707"><a href="#cb10-707"></a><span class="in">    digits = c( 0, 0, 0 ),</span></span>
<span id="cb10-708"><a href="#cb10-708"></a><span class="in">    format.args = list( big.mark = ',', decimal.mark = '.', scientific = FALSE ),</span></span>
<span id="cb10-709"><a href="#cb10-709"></a><span class="in">    escape = FALSE,</span></span>
<span id="cb10-710"><a href="#cb10-710"></a><span class="in">    centering = TRUE, </span></span>
<span id="cb10-711"><a href="#cb10-711"></a><span class="in">    booktabs = TRUE ) %&gt;%</span></span>
<span id="cb10-712"><a href="#cb10-712"></a><span class="in">  kable_classic( full_width = FALSE, html_font = "Cambria", position = "center" )</span></span>
<span id="cb10-713"><a href="#cb10-713"></a><span class="in">```</span></span>
<span id="cb10-714"><a href="#cb10-714"></a></span>
<span id="cb10-715"><a href="#cb10-715"></a>Para el caso cuando se puede caracterizar la severidad total a partir de otra variable explicativa </span>
<span id="cb10-716"><a href="#cb10-716"></a>$Y$, condicionando así cada una de las estimaciones según los valores que va tomando la variable </span>
<span id="cb10-717"><a href="#cb10-717"></a>explicativa. Esto permite estables primas de forma más adecuada según las diferentes características</span>
<span id="cb10-718"><a href="#cb10-718"></a>del riesgo cubierto.</span>
<span id="cb10-719"><a href="#cb10-719"></a></span>
<span id="cb10-720"><a href="#cb10-720"></a><span class="in">```{r l7t2}</span></span>
<span id="cb10-721"><a href="#cb10-721"></a><span class="in">#| echo: true</span></span>
<span id="cb10-722"><a href="#cb10-722"></a><span class="in">#| out-width: '100%'</span></span>
<span id="cb10-723"><a href="#cb10-723"></a><span class="in">#| code-fold: true</span></span>
<span id="cb10-724"><a href="#cb10-724"></a><span class="in">dat &lt;- data.table( nom = c( 'Pago', 'Pago esperado', 'Varianza' ),</span></span>
<span id="cb10-725"><a href="#cb10-725"></a><span class="in">                   cl = c( "$\\E[S \\mid Y]$", "$\\E[S]$", "$\\V[\\E[S \\mid Y]]$" ), </span></span>
<span id="cb10-726"><a href="#cb10-726"></a><span class="in">                   as = c( "$S - \\E[S \\mid Y]$", "$0$", "$\\V[S-\\E[S \\mid Y]]$" ) )</span></span>
<span id="cb10-727"><a href="#cb10-727"></a><span class="in">dat %&gt;%</span></span>
<span id="cb10-728"><a href="#cb10-728"></a><span class="in">  kable(</span></span>
<span id="cb10-729"><a href="#cb10-729"></a><span class="in">    label = NA,</span></span>
<span id="cb10-730"><a href="#cb10-730"></a><span class="in">    caption = 'Transferencia de riesgo con segmentación',</span></span>
<span id="cb10-731"><a href="#cb10-731"></a><span class="in">    row.names = FALSE,</span></span>
<span id="cb10-732"><a href="#cb10-732"></a><span class="in">    col.names = c( '', 'Asegurado', 'Asegurador' ),</span></span>
<span id="cb10-733"><a href="#cb10-733"></a><span class="in">    align = 'lrr',</span></span>
<span id="cb10-734"><a href="#cb10-734"></a><span class="in">    digits = c( 0, 0, 0 ),</span></span>
<span id="cb10-735"><a href="#cb10-735"></a><span class="in">    format.args = list( big.mark = ',', decimal.mark = '.', scientific = FALSE ),</span></span>
<span id="cb10-736"><a href="#cb10-736"></a><span class="in">    escape = FALSE,</span></span>
<span id="cb10-737"><a href="#cb10-737"></a><span class="in">    centering = TRUE,</span></span>
<span id="cb10-738"><a href="#cb10-738"></a><span class="in">    booktabs = TRUE ) %&gt;%</span></span>
<span id="cb10-739"><a href="#cb10-739"></a><span class="in">  kable_classic( full_width = FALSE, html_font = "Cambria", position = "center" )</span></span>
<span id="cb10-740"><a href="#cb10-740"></a><span class="in">```</span></span>
<span id="cb10-741"><a href="#cb10-741"></a></span>
<span id="cb10-742"><a href="#cb10-742"></a>La varianza $\V<span class="co">[</span><span class="ot">\E[S \mid Y]</span><span class="co">]</span>$ es atribuible a la heterogeneidad del portafolio de asegurados, </span>
<span id="cb10-743"><a href="#cb10-743"></a>y la misma se asigna a cada asegurado, más no es absorbida por el asegurador.</span>
<span id="cb10-744"><a href="#cb10-744"></a></span>
<span id="cb10-745"><a href="#cb10-745"></a><span class="in">```{r l7end, echo = FALSE}</span></span>
<span id="cb10-746"><a href="#cb10-746"></a><span class="in">rm( list = ls()[ ls() != 'def.chunk.hook' ] )</span></span>
<span id="cb10-747"><a href="#cb10-747"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/pedroguarderas/seguros_generales/edit/main/lectura_07.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/pedroguarderas/seguros_generales/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>