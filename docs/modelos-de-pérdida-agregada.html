<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 5 Modelos de pérdida agregada | Matemática Actuarial de los Seguros Generales</title>
  <meta name="description" content="Capítulo 5 Modelos de pérdida agregada | Matemática Actuarial de los Seguros Generales" />
  <meta name="generator" content="bookdown 0.42 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 5 Modelos de pérdida agregada | Matemática Actuarial de los Seguros Generales" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 5 Modelos de pérdida agregada | Matemática Actuarial de los Seguros Generales" />
  
  
  

<meta name="author" content="" />


<meta name="date" content="2025-04-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="distribuciones.html"/>
<link rel="next" href="tarificación.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/codefolding-lua-1.1/codefolding-lua.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script type="text/javascript"
   src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML">
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="introducción.html"><a href="introducción.html"><i class="fa fa-check"></i><b>1</b> Introducción</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introducción.html"><a href="introducción.html#materia"><i class="fa fa-check"></i><b>1.1</b> Materia</a></li>
<li class="chapter" data-level="1.2" data-path="introducción.html"><a href="introducción.html#resultados-de-aprendizaje"><i class="fa fa-check"></i><b>1.2</b> Resultados de aprendizaje</a></li>
<li class="chapter" data-level="1.3" data-path="introducción.html"><a href="introducción.html#contenidos-propuestos"><i class="fa fa-check"></i><b>1.3</b> Contenidos propuestos</a></li>
<li class="chapter" data-level="1.4" data-path="introducción.html"><a href="introducción.html#referencias-bibliográficas"><i class="fa fa-check"></i><b>1.4</b> Referencias bibliográficas</a>
<ul>
<li class="chapter" data-level="" data-path="introducción.html"><a href="introducción.html#principales-libros-guía"><i class="fa fa-check"></i>Principales libros guía</a></li>
<li class="chapter" data-level="" data-path="introducción.html"><a href="introducción.html#otras-referencias-de-soporte"><i class="fa fa-check"></i>Otras referencias de soporte</a></li>
<li class="chapter" data-level="" data-path="introducción.html"><a href="introducción.html#requerimientos-informáticos"><i class="fa fa-check"></i>Requerimientos informáticos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="preliminares.html"><a href="preliminares.html"><i class="fa fa-check"></i><b>2</b> Preliminares</a>
<ul>
<li class="chapter" data-level="2.1" data-path="preliminares.html"><a href="preliminares.html#notación-matemática"><i class="fa fa-check"></i><b>2.1</b> Notación matemática</a></li>
<li class="chapter" data-level="2.2" data-path="preliminares.html"><a href="preliminares.html#consideraciones-de-programación-en-r"><i class="fa fa-check"></i><b>2.2</b> Consideraciones de programación en R</a>
<ul>
<li class="chapter" data-level="" data-path="preliminares.html"><a href="preliminares.html#opciones-usuales"><i class="fa fa-check"></i>Opciones usuales</a></li>
<li class="chapter" data-level="" data-path="preliminares.html"><a href="preliminares.html#paquetes-usuales"><i class="fa fa-check"></i>Paquetes usuales</a></li>
<li class="chapter" data-level="" data-path="preliminares.html"><a href="preliminares.html#estructuras-básicas"><i class="fa fa-check"></i>Estructuras básicas</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="probabilidad-y-estadística.html"><a href="probabilidad-y-estadística.html"><i class="fa fa-check"></i><b>3</b> Probabilidad y Estadística</a>
<ul>
<li class="chapter" data-level="3.1" data-path="probabilidad-y-estadística.html"><a href="probabilidad-y-estadística.html#probabilidad-y-conceptos-asociados"><i class="fa fa-check"></i><b>3.1</b> Probabilidad y conceptos asociados</a></li>
<li class="chapter" data-level="3.2" data-path="probabilidad-y-estadística.html"><a href="probabilidad-y-estadística.html#resultados-de-convergencia"><i class="fa fa-check"></i><b>3.2</b> Resultados de convergencia</a></li>
<li class="chapter" data-level="3.3" data-path="probabilidad-y-estadística.html"><a href="probabilidad-y-estadística.html#desigualdades-de-concentración"><i class="fa fa-check"></i><b>3.3</b> Desigualdades de concentración</a></li>
<li class="chapter" data-level="3.4" data-path="probabilidad-y-estadística.html"><a href="probabilidad-y-estadística.html#transformada-de-fourier-contínua-y-discreta"><i class="fa fa-check"></i><b>3.4</b> Transformada de Fourier, contínua y discreta</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="probabilidad-y-estadística.html"><a href="probabilidad-y-estadística.html#aproximación-numérica-en-una-dimensión"><i class="fa fa-check"></i><b>3.4.1</b> Aproximación numérica en una dimensión</a></li>
<li class="chapter" data-level="3.4.2" data-path="probabilidad-y-estadística.html"><a href="probabilidad-y-estadística.html#uso-de-la-transformada-de-fourier"><i class="fa fa-check"></i><b>3.4.2</b> Uso de la transformada de Fourier</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="probabilidad-y-estadística.html"><a href="probabilidad-y-estadística.html#consideraciones-financieras"><i class="fa fa-check"></i><b>3.5</b> Consideraciones financieras</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="probabilidad-y-estadística.html"><a href="probabilidad-y-estadística.html#función-de-actualización-o-descuento"><i class="fa fa-check"></i><b>3.5.1</b> Función de actualización o descuento</a></li>
<li class="chapter" data-level="3.5.2" data-path="probabilidad-y-estadística.html"><a href="probabilidad-y-estadística.html#flujos-financieros"><i class="fa fa-check"></i><b>3.5.2</b> Flujos financieros</a></li>
<li class="chapter" data-level="3.5.3" data-path="probabilidad-y-estadística.html"><a href="probabilidad-y-estadística.html#flujos-financieros-probables"><i class="fa fa-check"></i><b>3.5.3</b> Flujos financieros probables</a></li>
<li class="chapter" data-level="3.5.4" data-path="probabilidad-y-estadística.html"><a href="probabilidad-y-estadística.html#sec:equifin"><i class="fa fa-check"></i><b>3.5.4</b> Equilibrio financiero</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="distribuciones.html"><a href="distribuciones.html"><i class="fa fa-check"></i><b>4</b> Distribuciones</a>
<ul>
<li class="chapter" data-level="4.1" data-path="distribuciones.html"><a href="distribuciones.html#distribuciones-discretas"><i class="fa fa-check"></i><b>4.1</b> Distribuciones discretas</a></li>
<li class="chapter" data-level="4.2" data-path="distribuciones.html"><a href="distribuciones.html#familia-de-panjer"><i class="fa fa-check"></i><b>4.2</b> Familia de Panjer</a></li>
<li class="chapter" data-level="4.3" data-path="distribuciones.html"><a href="distribuciones.html#distribuciones-continuas"><i class="fa fa-check"></i><b>4.3</b> Distribuciones continuas</a></li>
<li class="chapter" data-level="4.4" data-path="distribuciones.html"><a href="distribuciones.html#estimación"><i class="fa fa-check"></i><b>4.4</b> Estimación</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="distribuciones.html"><a href="distribuciones.html#método-de-sustitución"><i class="fa fa-check"></i><b>4.4.1</b> Método de sustitución</a></li>
<li class="chapter" data-level="4.4.2" data-path="distribuciones.html"><a href="distribuciones.html#método-de-momentos"><i class="fa fa-check"></i><b>4.4.2</b> Método de momentos</a></li>
<li class="chapter" data-level="4.4.3" data-path="distribuciones.html"><a href="distribuciones.html#método-de-la-distancia-mínima"><i class="fa fa-check"></i><b>4.4.3</b> Método de la distancia mínima</a></li>
<li class="chapter" data-level="4.4.4" data-path="distribuciones.html"><a href="distribuciones.html#método-de-maximización-de-la-verosimilitud"><i class="fa fa-check"></i><b>4.4.4</b> Método de maximización de la verosimilitud</a></li>
<li class="chapter" data-level="4.4.5" data-path="distribuciones.html"><a href="distribuciones.html#calidad-de-estimadores"><i class="fa fa-check"></i><b>4.4.5</b> Calidad de estimadores</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="modelos-de-pérdida-agregada.html"><a href="modelos-de-pérdida-agregada.html"><i class="fa fa-check"></i><b>5</b> Modelos de pérdida agregada</a>
<ul>
<li class="chapter" data-level="5.1" data-path="modelos-de-pérdida-agregada.html"><a href="modelos-de-pérdida-agregada.html#mutualización-del-riesgo"><i class="fa fa-check"></i><b>5.1</b> Mutualización del riesgo</a></li>
<li class="chapter" data-level="5.2" data-path="modelos-de-pérdida-agregada.html"><a href="modelos-de-pérdida-agregada.html#sec:modind"><i class="fa fa-check"></i><b>5.2</b> Modelo individual</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="modelos-de-pérdida-agregada.html"><a href="modelos-de-pérdida-agregada.html#algoritmo-de-simulación"><i class="fa fa-check"></i><b>5.2.1</b> Algoritmo de simulación</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="modelos-de-pérdida-agregada.html"><a href="modelos-de-pérdida-agregada.html#sec:modcol"><i class="fa fa-check"></i><b>5.3</b> Modelo colectivo</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="modelos-de-pérdida-agregada.html"><a href="modelos-de-pérdida-agregada.html#algoritmo-de-simulación-1"><i class="fa fa-check"></i><b>5.3.1</b> Algoritmo de simulación</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="modelos-de-pérdida-agregada.html"><a href="modelos-de-pérdida-agregada.html#modelos-mixtos"><i class="fa fa-check"></i><b>5.4</b> Modelos mixtos</a></li>
<li class="chapter" data-level="5.5" data-path="modelos-de-pérdida-agregada.html"><a href="modelos-de-pérdida-agregada.html#modelos-con-variables-explicativas"><i class="fa fa-check"></i><b>5.5</b> Modelos con variables explicativas</a></li>
<li class="chapter" data-level="5.6" data-path="modelos-de-pérdida-agregada.html"><a href="modelos-de-pérdida-agregada.html#proceso-estocástico-de-reclamos-totales"><i class="fa fa-check"></i><b>5.6</b> Proceso estocástico de reclamos totales</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="modelos-de-pérdida-agregada.html"><a href="modelos-de-pérdida-agregada.html#algoritmo-de-simulación-2"><i class="fa fa-check"></i><b>5.6.1</b> Algoritmo de simulación</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="modelos-de-pérdida-agregada.html"><a href="modelos-de-pérdida-agregada.html#aplicación-del-deducible"><i class="fa fa-check"></i><b>5.7</b> Aplicación del deducible</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="modelos-de-pérdida-agregada.html"><a href="modelos-de-pérdida-agregada.html#algoritmo-de-simulación-3"><i class="fa fa-check"></i><b>5.7.1</b> Algoritmo de simulación</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="modelos-de-pérdida-agregada.html"><a href="modelos-de-pérdida-agregada.html#algoritmo-de-panjer"><i class="fa fa-check"></i><b>5.8</b> Algoritmo de Panjer</a></li>
<li class="chapter" data-level="5.9" data-path="modelos-de-pérdida-agregada.html"><a href="modelos-de-pérdida-agregada.html#estimación-usando-la-transformada-de-fourier"><i class="fa fa-check"></i><b>5.9</b> Estimación usando la transformada de Fourier</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tarificación.html"><a href="tarificación.html"><i class="fa fa-check"></i><b>6</b> Tarificación</a>
<ul>
<li class="chapter" data-level="6.1" data-path="tarificación.html"><a href="tarificación.html#tarificación-en-grandes-términos"><i class="fa fa-check"></i><b>6.1</b> Tarificación en grandes términos</a></li>
<li class="chapter" data-level="6.2" data-path="tarificación.html"><a href="tarificación.html#medidas-de-riesgo"><i class="fa fa-check"></i><b>6.2</b> Medidas de riesgo</a></li>
<li class="chapter" data-level="6.3" data-path="tarificación.html"><a href="tarificación.html#prima"><i class="fa fa-check"></i><b>6.3</b> Prima</a></li>
<li class="chapter" data-level="6.4" data-path="tarificación.html"><a href="tarificación.html#segmentación"><i class="fa fa-check"></i><b>6.4</b> Segmentación</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="reservas-técnicas.html"><a href="reservas-técnicas.html"><i class="fa fa-check"></i><b>7</b> Reservas técnicas</a>
<ul>
<li class="chapter" data-level="7.1" data-path="reservas-técnicas.html"><a href="reservas-técnicas.html#reservas-para-primas-no-adquiridas"><i class="fa fa-check"></i><b>7.1</b> Reservas para primas no adquiridas</a></li>
<li class="chapter" data-level="7.2" data-path="reservas-técnicas.html"><a href="reservas-técnicas.html#reservas-de-riesgos-en-curso"><i class="fa fa-check"></i><b>7.2</b> Reservas de riesgos en curso</a></li>
<li class="chapter" data-level="7.3" data-path="reservas-técnicas.html"><a href="reservas-técnicas.html#reservas-de-siniestros-a-pagar"><i class="fa fa-check"></i><b>7.3</b> Reservas de siniestros a pagar</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="reservas-técnicas.html"><a href="reservas-técnicas.html#siniestros-sucedidos-reportados-resueltos-no-pagados"><i class="fa fa-check"></i><b>7.3.1</b> Siniestros sucedidos, reportados, resueltos, no pagados</a></li>
<li class="chapter" data-level="7.3.2" data-path="reservas-técnicas.html"><a href="reservas-técnicas.html#siniestros-sucedidos-reportados-no-resueltos-no-pagados"><i class="fa fa-check"></i><b>7.3.2</b> Siniestros sucedidos, reportados, no resueltos, no pagados</a></li>
<li class="chapter" data-level="7.3.3" data-path="reservas-técnicas.html"><a href="reservas-técnicas.html#siniestros-sucedidos-no-reportados-no-resueltos-no-pagados"><i class="fa fa-check"></i><b>7.3.3</b> Siniestros sucedidos, no reportados, no resueltos, no pagados</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="modelos-lineales-generalizados-glm.html"><a href="modelos-lineales-generalizados-glm.html"><i class="fa fa-check"></i><b>8</b> Modelos lineales generalizados (GLM)</a>
<ul>
<li class="chapter" data-level="8.1" data-path="modelos-lineales-generalizados-glm.html"><a href="modelos-lineales-generalizados-glm.html#familia-exponencial"><i class="fa fa-check"></i><b>8.1</b> Familia exponencial</a></li>
<li class="chapter" data-level="8.2" data-path="modelos-lineales-generalizados-glm.html"><a href="modelos-lineales-generalizados-glm.html#modelo-lineal-generalizado-glm"><i class="fa fa-check"></i><b>8.2</b> Modelo lineal generalizado (GLM)</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="estimación-de-valores-extremos.html"><a href="estimación-de-valores-extremos.html"><i class="fa fa-check"></i><b>9</b> Estimación de valores extremos</a>
<ul>
<li class="chapter" data-level="9.1" data-path="estimación-de-valores-extremos.html"><a href="estimación-de-valores-extremos.html#estimación-con-valores-extremos"><i class="fa fa-check"></i><b>9.1</b> Estimación con valores extremos</a></li>
<li class="chapter" data-level="9.2" data-path="estimación-de-valores-extremos.html"><a href="estimación-de-valores-extremos.html#simulación-con-valores-extremos"><i class="fa fa-check"></i><b>9.2</b> Simulación con valores extremos</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="bibliografía.html"><a href="bibliografía.html"><i class="fa fa-check"></i><b>10</b> Bibliografía</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Matemática Actuarial de los Seguros Generales</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="modelos-de-pérdida-agregada" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Capítulo 5</span> Modelos de pérdida agregada<a href="modelos-de-pérdida-agregada.html#modelos-de-pérdida-agregada" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<!------------------------------------------------------------------------------------------------->
<div id="mutualización-del-riesgo" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Mutualización del riesgo<a href="modelos-de-pérdida-agregada.html#mutualización-del-riesgo" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>La idea de mantener un seguro está basada en la mutualización de los riesgos. La mutualización
como tal nace del mismo mecanismo bajo el cual funciona un seguro, cada asegurado transfiera
su riesgo individual a la compañia de seguros por su parte, la suma total de estos riesgos <span class="math inline">\(S\)</span> es
el riesgo total que asume el asegurador.</p>
<p>Los riesgos de cada uno de los <span class="math inline">\(n \in \mathbb{N}\)</span> asegurados, pueden ser representados por variables
aleatorias <span class="math inline">\(X_1,\ldots X_n\)</span>, las mismas pueden ser independientes o dependientes entre ellas. El
costo total del portafolio está dado por la suma de todos estos riesgos.
<span class="math display">\[
S = \sum\limits_{i=1}^n X_i
\]</span>
El conocer la distribución del costo total <span class="math inline">\(S\)</span> es una tarea crucial para el asegurador.</p>
<p>El valore esperado de de los reclamos totales, puede ser calculado fácilmente utilizando las
propiedades de linealidad de la esperanza matemática <span class="math inline">\(\mathbb{E}\)</span>
<span class="math display">\[
\mathbb{E}[ S ]
= \mathbb{E}\left[ \sum\limits_{i=1}^n X_i \right]
= \sum\limits_{i=1}^n \mathbb{E}\left[ X_i \right]
\]</span>
por su parte, la varianza de la variable aleatoria del costo total <span class="math inline">\(S\)</span>, está dada por:
<span class="math display">\[
\begin{eqnarray*}
\mathbb{V}\left[ S \right]
&amp; = &amp; \mathbb{V}\left[ \sum\limits_{i=1}^n X_i \right] \\
&amp; = &amp; \sum\limits_{i=1}^n \mathbb{V}\left[ X_i \right]
+ \sum\limits_{i=1}^n \sum\limits_{j=1,j\neq i}^n \mathbb{C}\left[ X_i, X_j \right] \\
&amp; = &amp; \sum\limits_{i=1}^n \mathbb{V}\left[ X_i \right]
+ 2\sum\limits_{i=1}^{n-1} \sum\limits_{j=i+1}^n \mathbb{C}\left[ X_i, X_j \right]
\end{eqnarray*}
\]</span></p>
<p>Muchas de las veces el número total de reclamos <span class="math inline">\(n\)</span> es incierto y por tal razón es mejor considerar
que el número de siniestros vendrá dado por otra variable aleatoria discreta <span class="math inline">\(N\)</span> que solo tomará
valores en <span class="math inline">\(\mathbb{N}\)</span>
<span class="math display">\[
S = \sum\limits_{i=1}^N X_i
\]</span></p>
<p>Esto nos lleva a considerar diferentes modelos de agregación de reclamos o pérdidas como se suele
decir en inglés “loss models” <span class="citation">[<a href="bibliografía.html#ref-PanjerLoss2012">1</a>]</span>, <span class="citation">[<a href="bibliografía.html#ref-LossModFur">2</a>]</span>.</p>
<p>De forma preliminar estudiemos la forma general que podría tener la distribución de <span class="math inline">\(S\)</span>, sin realizar
alguna hipótesis (previa sobre el comportamiento de las variables aleatorias <span class="math inline">\(X_1, \ldots, X_n\)</span> y <span class="math inline">\(N\)</span>.
<span class="math display">\[
\begin{eqnarray*}
F_S( s )
&amp; = &amp; P( S \leq s ) \\
&amp; = &amp; P\left( \sum\limits_{i=1}^N X_i \leq s \right) \\
&amp; = &amp; P\left( \sum\limits_{i=1}^N X_i \leq s \land N \in \mathbb{N}\right) \\
&amp; = &amp; P\left( \bigcup\limits_{n\in \mathbb{N}} \left\{ \sum\limits_{i=1}^N X_i \leq s \land N \in \{n\} \right\}\right) \\
&amp; = &amp; \sum\limits_{n=0}^{+\infty} P\left( \sum\limits_{i=1}^n X_i \leq s \land N = n \right)
\qquad \text{probabilidad de eventos disjuntos} \\
&amp; = &amp; \sum\limits_{n=0}^{+\infty} P\left( \sum\limits_{i=1}^n X_i \leq s\ \middle|\ N = n \right) P( N = n )
\qquad \text{propiedades de la probabilidad condicional} \\
&amp; = &amp; \sum\limits_{n=0}^{+\infty} \int\limits_{\left\{\sum\limits_{i=1}^n x_i \leq s\right\}} dF_n( x_1, \ldots, x_n )\ p_n
\qquad \text{$F_n$ es la distribución conjunta de $X_1, \ldots, X_n$ dado $N = n$}
\end{eqnarray*}
\]</span>
la última expresión es importante de retener, nos dice que para comprender el comportamiento de
los reclamos totales <span class="math inline">\(S\)</span>, debemos estudiar y estimar la frecuencia de los reclamos <span class="math inline">\(N\)</span>, y también
debemos comprender y estimar cada uno de los reclamos <span class="math inline">\(X_i\)</span> y también su interacción, siendo al
menos estos una infinidad si <span class="math inline">\(N\)</span> puede tomar valores tendiendo al infinito. En términos resumidos,
hay que comprender y estimar la frecuencia y severidad de los reclamos que están asociados al riesgo
cubierto.</p>
<p>Los términos integrales <span class="math inline">\(\int\limits_{\left\{\sum\limits_{i=1}^n x_i \leq s\right\}} dF_n( x_1, \ldots, x_n )\)</span>
asociados a la severidad presentan un verdadero reto estadístico y computacional; hace unos años
atrás se desarrolló unos nuevos algoritmos para calcular estos términos <span class="citation">[<a href="bibliografía.html#ref-aep_algo">13</a>]</span>, <span class="citation">[<a href="bibliografía.html#ref-gaep_algo">14</a>]</span>.</p>
<!------------------------------------------------------------------------------------------------->
</div>
<div id="sec:modind" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Modelo individual<a href="modelos-de-pérdida-agregada.html#sec:modind" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>En el modelo de riesgos individuales consideramos que el número de siniestros que se producirán es
conocido, por ejemplo puede ser a lo sumo el tamaño de la población asegurada, en tal caso la
variable aleatoria <span class="math inline">\(N\)</span> pasa a ser una constante, que representaremos por <span class="math inline">\(n\)</span>. De esta forma, la
severidad total puede ser fácilmente representada por:
<span class="math display">\[
S = \sum\limits_{i=1}^n X_i
\]</span></p>
<p>La hipótesis más usual que sostiene a este modelo es la indenpendencia entre cada uno de los
reclamos <span class="math inline">\(X_i\)</span> y <span class="math inline">\(X_j\)</span> son independientes para cualquier <span class="math inline">\(1 \leq i \neq j \leq n\)</span>.</p>
<p>El valor esperado de la severidad total <span class="math inline">\(S\)</span> es:
<span class="math display">\[
\begin{eqnarray*}
\mathbb{E}[S]
&amp; = &amp; \mathbb{E}\left[ \sum\limits_{i=1}^n X_i \right] \\
&amp; = &amp; \sum\limits_{i=1}^n \mathbb{E}\left[ X_i \right] \\
&amp; = &amp; n \mathbb{E}[X] \quad \text{si $\{X_i\}$ son idénticamente distribuidas}
\end{eqnarray*}
\]</span></p>
<p>Así mismo con la varianza de <span class="math inline">\(S\)</span>.
<span class="math display">\[
\begin{eqnarray*}
\mathbb{V}\left[ S \right]
&amp; = &amp; \mathbb{V}\left[ \sum\limits_{i=1}^n X_i \right] \\
&amp; = &amp; \sum\limits_{i=1}^n \mathbb{V}\left[ X_i \right]
+ \sum\limits_{i=1}^n \sum\limits_{j=1,j\neq i}^n \mathbb{C}\left[ X_i, X_j \right] \\
&amp; = &amp; \sum\limits_{i=1}^n \mathbb{V}\left[ X_i \right]\quad \text{si $\{X_i\}$ sin son independientes entre si} \\
&amp; = &amp; n \mathbb{V}\left[ X \right]\quad \text{si $\{X_i\}$ sin son idénticamente distribuidas}
\end{eqnarray*}
\]</span></p>
<p>Al tener un número determinado de reclamos <span class="math inline">\(n \in \mathbb{N}\)</span>, la distribución de probabilidad del
total de reclamos <span class="math inline">\(S\)</span> puede ser calculada de una forma maś sencilla.
<span class="math display">\[
\begin{eqnarray*}
F_S( x )
&amp; = &amp; F_{X_1} \star \cdots \star F_{X_n} ( s )\quad \text{sin $\{X_i\}$ son independientes} \\
&amp; = &amp; F_{X}^{\star n}( s )\quad \text{si $\{X_i\}$ son idénticamente distribuidas}
\end{eqnarray*}
\]</span></p>
<p>así mismo, si las densidades de probabilidad están bien definidas, entonces
<span class="math display">\[
\begin{eqnarray*}
f_S( s )
&amp; = &amp; f_{X_1} \star \cdots \star f_{X_n} ( s )\quad \text{sin $\{X_i\}$ son independientes} \\
&amp; = &amp; f_{X}^{\star n}( s )\quad \text{si $\{X_i\}$ son idénticamente distribuidas}
\end{eqnarray*}
\]</span></p>
<p>Una posible estrategia para estimar <span class="math inline">\(F_S\)</span> o <span class="math inline">\(f_S\)</span> es utilizar la transformada de Fourier
<span class="math inline">\(\mathscr{F}\)</span>, la cual convierte las convoluciones en productos y luego invertir de nuevo la
transformada de Fourier.
<span class="math display">\[
\begin{eqnarray*}
F_S
&amp; = &amp; \mathscr{F}^{-1}\left( \mathscr{F}\left( F_S \right) \right) \\
&amp; = &amp; \mathscr{F}^{-1}\left( \mathscr{F}\left( F_{X_1} \star \cdots \star F_{X_n} \right) \right)
\quad \text{sin $\{X_i\}$ son independientes} \\
&amp; = &amp; \mathscr{F}^{-1}\left( \prod\limits_{i=1}^n \mathscr{F}\left( F_{X_i} \right) \right) \\
&amp; = &amp; \mathscr{F}^{-1}\left( \mathscr{F}\left( F_{X} \right)^n \right)
\quad \text{si $\{X_i\}$ sin son idénticamente distribuidas } \\
\end{eqnarray*}
\]</span></p>
<p>o de forma equivalente para la densidad <span class="math inline">\(f_S\)</span>
<span class="math display">\[
\begin{eqnarray*}
f_S
&amp; = &amp; \mathscr{F}^{-1}\left( \mathscr{F}\left( f_S \right) \right) \\
&amp; = &amp; \mathscr{F}^{-1}\left( \mathscr{F}\left( f_{X_1} \star \cdots \star f_{X_n} \right) \right)
\quad \text{sin $\{X_i\}$ son independientes} \\
&amp; = &amp; \mathscr{F}^{-1}\left( \prod\limits_{i=1}^n \mathscr{F}\left( f_{X_i} \right) \right) \\
&amp; = &amp; \mathscr{F}^{-1}\left( \mathscr{F}\left( f_{X} \right)^n \right)
\quad \text{si $\{X_i\}$ sin son idénticamente distribuidas } \\
\end{eqnarray*}
\]</span></p>
<!------------------------------------------------------------------------------------------------->
<div id="algoritmo-de-simulación" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Algoritmo de simulación<a href="modelos-de-pérdida-agregada.html#algoritmo-de-simulación" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Se puede simular la severidad total <span class="math inline">\(S\)</span> para el caso donde se asume independencia entre cada una
de las severidades <span class="math inline">\(X_1, \ldots, X_n\)</span> y se conoce cada una de sus densidades de probabilidad
<span class="math inline">\(f_{X_1}, \ldots, f_{X_n}\)</span> o distribuciones de probabilidad <span class="math inline">\(F_{X_1}, \ldots, F_{X_n}\)</span>.</p>
<ol style="list-style-type: decimal">
<li><p>Se tiene fijo <span class="math inline">\(n \in \mathbb{N}\)</span>,</p></li>
<li><p>Se fija el número de simulaciones <span class="math inline">\(m \in \mathbb{N}\)</span></p></li>
<li><p>Para cada <span class="math inline">\(i \in \{1, \ldots, m\}\)</span> se extrae una muestra <span class="math inline">\(X_{i,1} \rightsquigarrow f_{X_1},\ldots,X_{i,n} \rightsquigarrow f_{X_n}\)</span>,</p></li>
<li><p>Para cada <span class="math inline">\(i \in \{1, \ldots, m\}\)</span> se calcula la severidad total para la muestra <span class="math inline">\(i\)</span>,
<span class="math inline">\(S_i = \sum\limits_{j=1}^n X_{i,j}\)</span></p></li>
</ol>
<div class="example">
<p><span id="exm:l5ex1" class="example"><strong>Ejemplo 5.1  </strong></span>El siguiente código ejemplifica el algoritmo anterior, donde se asume que cada variable aleatoria de
severidad <span class="math inline">\(X_i\)</span> sigue una ley log-normal <span class="math inline">\(LN( \mu_i, \sigma_i )\)</span>, de parámetros <span class="math inline">\(\mu_i, \sigma_i\)</span>,
para cada <span class="math inline">\(i \in \{1,\ldots, n\}\)</span>. El reclamo total <span class="math inline">\(S = \sum\limits_{i=1}^n X_i\)</span> sigue una ley
de probabilidad que estará dada por la convolución de cada una de las leyes de probabilidad de
cada reclamo <span class="math inline">\(X_i\)</span>, sin embargo estas leyes en este ejemplo son log-normales y no se conoce una
forma explícita, analítica para la convolución de log-normales. Por tal razón, debemos aproximar
la distribución de probabilidad de <span class="math inline">\(F_S\)</span> a partir de la distribución empírica.</p>
<p></p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb39"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb39-1"><a href="modelos-de-pérdida-agregada.html#cb39-1"></a><span class="fu">set.seed</span>(<span class="dv">94312</span>)</span>
<span id="cb39-2"><a href="modelos-de-pérdida-agregada.html#cb39-2"></a></span>
<span id="cb39-3"><a href="modelos-de-pérdida-agregada.html#cb39-3"></a><span class="co"># 1. número de distribuciones</span></span>
<span id="cb39-4"><a href="modelos-de-pérdida-agregada.html#cb39-4"></a>n <span class="ot">&lt;-</span> <span class="dv">200</span></span>
<span id="cb39-5"><a href="modelos-de-pérdida-agregada.html#cb39-5"></a><span class="co"># parámetros para las n distribuciones</span></span>
<span id="cb39-6"><a href="modelos-de-pérdida-agregada.html#cb39-6"></a>mu <span class="ot">&lt;-</span> <span class="fu">seq</span>( <span class="dv">1</span>, <span class="dv">2</span>, <span class="at">length.out =</span> n )</span>
<span id="cb39-7"><a href="modelos-de-pérdida-agregada.html#cb39-7"></a>sigma <span class="ot">&lt;-</span> <span class="fu">seq</span>( <span class="dv">2</span>, <span class="dv">3</span>, <span class="at">length.out =</span> n )</span>
<span id="cb39-8"><a href="modelos-de-pérdida-agregada.html#cb39-8"></a></span>
<span id="cb39-9"><a href="modelos-de-pérdida-agregada.html#cb39-9"></a><span class="co"># 2. número de simulaciones</span></span>
<span id="cb39-10"><a href="modelos-de-pérdida-agregada.html#cb39-10"></a>m <span class="ot">&lt;-</span> <span class="fl">1e3</span> </span>
<span id="cb39-11"><a href="modelos-de-pérdida-agregada.html#cb39-11"></a></span>
<span id="cb39-12"><a href="modelos-de-pérdida-agregada.html#cb39-12"></a><span class="co"># 3. simulación de severidades</span></span>
<span id="cb39-13"><a href="modelos-de-pérdida-agregada.html#cb39-13"></a>X <span class="ot">&lt;-</span> <span class="fu">lapply</span>( <span class="dv">1</span><span class="sc">:</span>m, <span class="at">FUN =</span> <span class="cf">function</span>( i ) <span class="fu">sapply</span>( <span class="dv">1</span><span class="sc">:</span>n, <span class="at">FUN =</span> <span class="cf">function</span>( j ) <span class="fu">rlnorm</span>( <span class="dv">1</span>, <span class="at">meanlog =</span> mu[ j ], <span class="at">sdlog =</span> sigma[ j ] ) ) )</span>
<span id="cb39-14"><a href="modelos-de-pérdida-agregada.html#cb39-14"></a></span>
<span id="cb39-15"><a href="modelos-de-pérdida-agregada.html#cb39-15"></a><span class="co"># 4. simulación de severidad total</span></span>
<span id="cb39-16"><a href="modelos-de-pérdida-agregada.html#cb39-16"></a>S <span class="ot">&lt;-</span> <span class="fu">sapply</span>( X, <span class="at">FUN =</span> <span class="cf">function</span>( x ) <span class="fu">sum</span>( x ) )</span></code></pre></div>
</details>
<p></p>
<p>Con ya lo mencionamos en este ejemplo densidad de probabilidad de la severidad <span class="math inline">\(S\)</span> resulta de la
convolución de las <span class="math inline">\(n\)</span> densidades individuales <span class="math inline">\(f_S = f_{X_1} \star \cdots \star f_{X_n}\)</span>, la cual
no presenta una forma analítica conocida.</p>
<p>De la imposibilidad anterior, como ya mencionamos se puede ver la utilidad de trabajar con la
muestra aleatoria de la variable <span class="math inline">\(S\)</span>. De esta manera poder estimar la distribución acumulada de
probabilidad <span class="math inline">\(F_S\)</span> a partir de la distribución empírica <span class="math inline">\(F_m\)</span> generada con la muestra <span class="math inline">\(\{S_i\}\)</span>.
<span class="math display">\[
F_S( s ) \approx F_m( s ) = \frac{1}{m} \sum\limits_{i=1}^m \mathbf {1}_{(-\infty,s]}( S_i )
\]</span>
el resultado de concentración <a href="probabilidad-y-estadística.html#thm:ddkw">3.4</a> es más nos brinda un criterio de convergencia de
<span class="math inline">\(F_m\)</span> a <span class="math inline">\(F_S\)</span></p>
<p>Para construir <span class="math inline">\(F_m\)</span> en R, se puede utilizar la función ya empaquetada <code>ecdf</code> (empirical cumulative
distribution function).</p>
<p></p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb40"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb40-1"><a href="modelos-de-pérdida-agregada.html#cb40-1"></a><span class="co"># estimación distribución acumulada empírica de S</span></span>
<span id="cb40-2"><a href="modelos-de-pérdida-agregada.html#cb40-2"></a>Fm <span class="ot">&lt;-</span> <span class="fu">ecdf</span>( S )</span>
<span id="cb40-3"><a href="modelos-de-pérdida-agregada.html#cb40-3"></a></span>
<span id="cb40-4"><a href="modelos-de-pérdida-agregada.html#cb40-4"></a><span class="co"># esperanza empírica</span></span>
<span id="cb40-5"><a href="modelos-de-pérdida-agregada.html#cb40-5"></a>EeS <span class="ot">&lt;-</span> <span class="fu">mean</span>( S )</span>
<span id="cb40-6"><a href="modelos-de-pérdida-agregada.html#cb40-6"></a></span>
<span id="cb40-7"><a href="modelos-de-pérdida-agregada.html#cb40-7"></a><span class="co"># esperanza teórica</span></span>
<span id="cb40-8"><a href="modelos-de-pérdida-agregada.html#cb40-8"></a>ES <span class="ot">&lt;-</span> <span class="fu">sum</span>( <span class="fu">sapply</span>( <span class="dv">1</span><span class="sc">:</span>n, <span class="at">FUN =</span> <span class="cf">function</span>( i ) <span class="fu">exp</span>( mu[i] <span class="sc">+</span> <span class="fl">0.5</span> <span class="sc">*</span> sigma[i]<span class="sc">^</span><span class="dv">2</span> ) ) )</span>
<span id="cb40-9"><a href="modelos-de-pérdida-agregada.html#cb40-9"></a></span>
<span id="cb40-10"><a href="modelos-de-pérdida-agregada.html#cb40-10"></a>N <span class="ot">&lt;-</span> <span class="fl">1e4</span></span>
<span id="cb40-11"><a href="modelos-de-pérdida-agregada.html#cb40-11"></a>s <span class="ot">&lt;-</span> <span class="fu">seq</span>( <span class="fu">quantile</span>( S, <span class="at">probs =</span> <span class="fl">0.01</span> ), <span class="fu">quantile</span>( S, <span class="at">probs =</span> <span class="fl">0.99</span> ), <span class="at">length.out =</span> N )</span>
<span id="cb40-12"><a href="modelos-de-pérdida-agregada.html#cb40-12"></a>Fms <span class="ot">&lt;-</span> <span class="fu">sapply</span>( s, <span class="at">FUN =</span> Fm )</span></code></pre></div>
</details>
<p></p>
<p></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb41"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb41-1"><a href="modelos-de-pérdida-agregada.html#cb41-1" tabindex="-1"></a>plt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb41-2"><a href="modelos-de-pérdida-agregada.html#cb41-2" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="fu">aes</span>( <span class="at">x =</span> s, <span class="at">y =</span> Fms ), <span class="at">colour =</span> <span class="st">&#39;darkred&#39;</span>, <span class="at">size =</span> <span class="dv">1</span> ) <span class="sc">+</span> </span>
<span id="cb41-3"><a href="modelos-de-pérdida-agregada.html#cb41-3" tabindex="-1"></a>  <span class="fu">geom_vline</span>( <span class="at">xintercept =</span> <span class="fu">c</span>( EeS, ES ), <span class="at">colour =</span> <span class="fu">c</span>( <span class="st">&#39;blue&#39;</span>, <span class="st">&#39;darkgreen&#39;</span> ) ) <span class="sc">+</span></span>
<span id="cb41-4"><a href="modelos-de-pérdida-agregada.html#cb41-4" tabindex="-1"></a>  <span class="fu">xlab</span>( <span class="fu">TeX</span>( <span class="st">&quot;$x$&quot;</span> ) ) <span class="sc">+</span> </span>
<span id="cb41-5"><a href="modelos-de-pérdida-agregada.html#cb41-5" tabindex="-1"></a>  <span class="fu">ylab</span>( <span class="fu">TeX</span>( <span class="st">&quot;$F_n(x)$&quot;</span> ) ) <span class="sc">+</span> </span>
<span id="cb41-6"><a href="modelos-de-pérdida-agregada.html#cb41-6" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb41-7"><a href="modelos-de-pérdida-agregada.html#cb41-7" tabindex="-1"></a><span class="fu">plot</span>( plt )</span></code></pre></div>
</details>
<p><img src="seguros_generales_files/figure-html/l5g1-1.png" width="80%" height="400px" style="display: block; margin: auto;" /></p>
<p></p>
<p>Para calcular la esperanza de la severidad total <span class="math inline">\(S\)</span>, también se puede utilizar una aproximación
a la integral de Riemann-Stieltjes utilizando la distribución acumulada empírica <span class="math inline">\(F_m\)</span>.
<span class="math display">\[
\mathbb{E}[ S ] = \int\limits_{\mathbb{R}} s dF_S( s )
\approx \int\limits_{\mathbb{R}} s dF_m( s )
\approx \sum\limits_{i=1}^N s_{i} \left( F_m( s_{i+1} ) - F_m( s_{i} ) \right)
\]</span></p>
<p>Esta aproximación en R puede ser implementada de la siguiente forma:</p>
<p></p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb42"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb42-1"><a href="modelos-de-pérdida-agregada.html#cb42-1"></a>N <span class="ot">&lt;-</span> <span class="fl">1e5</span></span>
<span id="cb42-2"><a href="modelos-de-pérdida-agregada.html#cb42-2"></a>s <span class="ot">&lt;-</span> <span class="fu">seq</span>( <span class="fu">min</span>( S ), <span class="fu">max</span>( S ), <span class="at">length.out =</span> N )</span>
<span id="cb42-3"><a href="modelos-de-pérdida-agregada.html#cb42-3"></a>EmS <span class="ot">&lt;-</span> <span class="fu">sum</span>( s[<span class="sc">-</span>N] <span class="sc">*</span> <span class="fu">diff</span>( <span class="fu">sapply</span>( s, <span class="at">FUN =</span> Fm ) ) )</span></code></pre></div>
</details>
<p></p>
<p>De ello tenemos los siguientes resultados de cálculo para el valor esperado de la severidad total
<span class="math display">\[
\begin{eqnarray*}
\mathbb{E}[S] = \sum\limits_{i=1}^n e^{ \mu_i + \frac{1}{2} \sigma_i^2 } &amp; = &amp; 34562.7208, \\
\overline{S} = \frac{1}{m} \sum\limits_{i=1}^m S_i &amp; = &amp; 33515.9195, \\
\sum\limits_{i=1}^N s_{i} \left( F_m( s_{i+1} ) - F_m( s_{i} ) \right) &amp; = &amp; 33494.1981
\end{eqnarray*}
\]</span></p>
</div>
<p>Lo bueno de poseer una buena aproximación a la distribución acumulada de una variable aleatoria, es
que podemos calcular algunos otros valores de importancia relacionados a la variable aleatoria y
no tan solo utilizar medidas de tendencia central. Sin embargo, para que esta aproximación sea
útil se requiere reducir el error de probabilidad <a href="probabilidad-y-estadística.html#thm:ddkw">3.4</a>.</p>
<div class="example">
<p><span id="exm:l5ex2" class="example"><strong>Ejemplo 5.2  </strong></span>Podemos considerar el caso sencillo donde el valor posible de severidad es determinista, es decir
para cada póliza <span class="math inline">\(i\in \{1,\ldots,n\}\)</span>, el valor de severidad probable es único <span class="math inline">\(M &gt; 0\)</span> si en caso
se da un evento <span class="math inline">\(A_i\)</span>, esto lo podemos expresar como <span class="math inline">\(X_i = M \mathbf{1}_{A_i}\)</span> es constante. Así,
pérdida total está dada por:
<span class="math display">\[
S = \sum\limits_{i=1}^n X_i = \sum\limits_{i=1}^n M \mathbf{1}_{A_i}
\]</span></p>
<p>El valor total esperado de reclamos está dado por:
<span class="math display">\[
\mathbb{E}[ S ]
= \sum\limits_{i=1}^n \mathbb{E}\left[ M \mathbf{1}_{A_i} \right]
= M \sum\limits_{i=1}^n P( A_i )
\]</span>
la última igualdad resulta de las propiedades de la función indicatriz <a href="probabilidad-y-estadística.html#def:indicatriz">3.10</a>.</p>
<p>Si en caso todos los <span class="math inline">\(P(A_i) = p\)</span> tienen la misma probabilidad, el valor total esperado de reclamos
toma la siguiente forma:
<span class="math display">\[
\mathbb{E}[S] = n M p
\]</span></p>
</div>
<!------------------------------------------------------------------------------------------------->
</div>
</div>
<div id="sec:modcol" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Modelo colectivo<a href="modelos-de-pérdida-agregada.html#sec:modcol" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>El modelo colectivo de riesgo considera un número de reclamos descritos por una variable aleatoria
discreta <span class="math inline">\(N\)</span>. Los reclamos corresponden a un número de pólizas en un periodo específico, el valor
de cada reclamo <span class="math inline">\(i \in \{1,\ldots,N\}\)</span> está representado por las variables aleatorias <span class="math inline">\(X_i\)</span>.
Usualmente, se considera que cada uno de los reclamos <span class="math inline">\(X_i\)</span> están idénticamente distribuidos.
<span class="math display">\[
S =
\left\{
\begin{array}{ll}
\sum\limits_{i=1}^N X_i &amp; \text{si}\ N &gt; 0 \\
0 &amp; \text{si}\ N = 0
\end{array}
\right.
\]</span>
o de forma más compacta se puede tan definir <span class="math inline">\(S = \sum\limits_{i=1}^N X_i\)</span>, donde se asume que la
suma da <span class="math inline">\(0\)</span> si el número de elementos en la suma <span class="math inline">\(N = 0\)</span>.</p>
<p>El valor esperado del total de reclamos <span class="math inline">\(S\)</span>, está dado por:
<span class="math display">\[
\begin{eqnarray*}
\mathbb{E}[S]
&amp; = &amp; \mathbb{E}\left[ \sum\limits_{i=1}^N X_i \right] \\
&amp; = &amp; \sum\limits_{n=0}^{+\infty} \mathbb{E}\left[
\sum\limits_{i=1}^n X_i\ \middle|\ N = n \right]P( N = n )
\quad \text{utilizando la esperanza condicional} \\
&amp; = &amp; 0 P( N = 0 ) + \sum\limits_{n=1}^{+\infty} \mathbb{E}\left[ \sum\limits_{i=1}^n X_i\ \middle|\ N = n \right]P( N = n ) \\
&amp; = &amp; \sum\limits_{n=1}^{+\infty} \sum\limits_{i=1}^n \mathbb{E}\left[ X_i \mid N = n \right]P( N = n )
\quad \text{linealidad de la esperanza} \\
&amp; = &amp; \sum\limits_{n=0}^{+\infty} n \mathbb{E}\left[ X \mid N = n \right]P( N = n )
\quad \text{si $\{X_i\}$ son idénticamente distribuidas} \\
&amp; = &amp; \mathbb{E}\left[ X \right] \sum\limits_{n=0}^{+\infty} n P( N = n )
\quad \text{si $X$ y $N$ son independientes} \\
&amp; = &amp; \mathbb{E}[ N ] \mathbb{E}[ X ]
\end{eqnarray*}
\]</span></p>
<p>También podemos calcular la varianza de los reclamos totales <span class="math inline">\(S\)</span>, para ello necesitamos primeramente
calcular su segundo momento.
<span class="math display">\[
\begin{eqnarray*}
\mathbb{E}[S^2]
&amp; = &amp; \mathbb{E}\left[ \left( \sum\limits_{i=1}^N X_i \right)^2 \right] \\
&amp; = &amp; \sum\limits_{n=0}^\infty \mathbb{E}\left[ \sum\limits_{i, j=1}^n X_i X_j \middle| N = n \right] P( N = n )
\quad \text{propiedades de la esperanza condicional} \\
&amp; = &amp; \sum\limits_{n=0}^\infty \sum\limits_{i, j=1}^n \mathbb{E}\left[ X_i X_j \right] P( N = n )
\quad \text{si $\{X_i\}$ y $N$ son independientes} \\
&amp; = &amp; \sum\limits_{n=0}^\infty \left( \sum\limits_{i=1}^n \mathbb{E}\left[ X_i^2 \right]
+ \sum\limits_{i,j=1,i\neq j}^n \mathbb{E}\left[ X_i X_j \right] \right) P( N = n ) \\
&amp; = &amp; \sum\limits_{n=0}^\infty \left( n \mathbb{E}\left[ X^2 \right] + n(n-1) \mathbb{E}\left[ X \right]^2 \right) P( N = n )
\quad \text{si $\{X_i\}$ son i.i.d} \\
&amp; = &amp; \mathbb{E}\left[N\right] \mathbb{E}\left[X^2\right] + \mathbb{E}\left[N^2\right] \mathbb{E}\left[X\right]^2
- \mathbb{E}\left[N\right] \mathbb{E}\left[X\right]^2 \\
&amp; = &amp; \mathbb{E}\left[N\right] \mathbb{V}\left[X\right] + \mathbb{E}\left[N^2\right] \mathbb{E}\left[X\right]^2
\end{eqnarray*}
\]</span></p>
<p>finalmente la varianza de <span class="math inline">\(S\)</span> tiene la siguiente expresión
<span class="math display">\[
\begin{eqnarray*}
\mathbb{V}\left[S\right]
&amp; = &amp; \mathbb{E}\left[S^2\right] - \mathbb{E}\left[S\right]^2 \\
&amp; = &amp; \mathbb{E}\left[N\right] \mathbb{V}\left[X\right]
+ \mathbb{E}\left[N^2\right] \mathbb{E}\left[X\right]^2 - \mathbb{E}\left[N\right]^2 \mathbb{E}\left[X\right]^2 \\
&amp; = &amp; \mathbb{E}\left[N\right] \mathbb{V}\left[X\right] + \mathbb{V}\left[N\right] \mathbb{E}\left[X\right]^2
\end{eqnarray*}
\]</span></p>
<p>La distribución acumulada del reclamo total <span class="math inline">\(S\)</span> tiene la forma:
<span class="math display">\[
\begin{eqnarray*}
F_S( s )
&amp; = &amp; P( S \leq s ) \\
&amp; = &amp; P\left( \sum\limits_{i=1}^N X_i \leq s \right) \\
&amp; = &amp; \sum\limits_{n=0}^{+\infty} P\left( \sum\limits_{i=1}^n X_i \leq s \middle| N = n \right) P( N = n )\quad \text{utilizando la probabilidad condicional} \\
&amp; = &amp; \sum\limits_{n=0}^{+\infty} P\left( \sum\limits_{i=1}^n X_i \leq s \right) p_n\quad \text{si $X_i$ y $N$ son independientes} \\
&amp; = &amp; \sum\limits_{n=0}^{+\infty} F_{X_1} \star \cdots \star F_{X_n}( s ) p_n\quad \text{distribución de la suma de variables aleatorias} \\
&amp; = &amp; \sum\limits_{n=0}^{+\infty} F^{\star n}_{X}( s ) p_n\quad \text{si $\{X_i\}$ son idénticamente distribuidas}
\end{eqnarray*}
\]</span>
tomando <span class="math inline">\(F^{\star 0}_{X}( s ) = 1\)</span>.</p>
<p>Este último resultado muestra que la distribución de probabilidad de <span class="math inline">\(S\)</span> no es más que una mixtura
de las distribuciones para los modelos individuales <span class="math inline">\(F^{\star n}_{X}\)</span> tomando para mezclarlas las
probabilidades <span class="math inline">\(p_n = P( N = n )\)</span> de la variable aleatoria discreta <span class="math inline">\(N\)</span> que describe la frecuencia
de los reclamos.</p>
<!------------------------------------------------------------------------------------------------->
<div id="algoritmo-de-simulación-1" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Algoritmo de simulación<a href="modelos-de-pérdida-agregada.html#algoritmo-de-simulación-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>La variable del reclamo total <span class="math inline">\(S\)</span> puede ser simulada mediante el siguiente método montecarlo.
Si <span class="math inline">\(N\)</span> sigue una ley discreta <span class="math inline">\(f_N\)</span> y cada valor severidad <span class="math inline">\(X\)</span> son idénticamente distribuidos
con ley <span class="math inline">\(f_X\)</span>.</p>
<ol style="list-style-type: decimal">
<li><p>Seleccionar el número de simulaciones <span class="math inline">\(m\)</span>,</p></li>
<li><p>Se genera una muestra de tamaño <span class="math inline">\(m\)</span> de variables <span class="math inline">\(N_1, \ldots, N_m\)</span> con ley <span class="math inline">\(f_N\)</span>,</p></li>
<li><p>Se genera para cada <span class="math inline">\(i \in \{1,\ldots,m\}\)</span> una muestra de tamaño <span class="math inline">\(N_i\)</span> de variables aleatorias
<span class="math inline">\(X_{i,1}, \ldots X_{i,N_i}\)</span> con ley <span class="math inline">\(f_X\)</span>,</p></li>
<li><p>Se calcula los reclamos totales <span class="math inline">\(S_1, \ldots, S_m\)</span> para cada simulación <span class="math inline">\(i = \{1, \ldots, m\}\)</span>,
mediante la siguiente suma <span class="math inline">\(S_i = \sum\limits_{j=1}^{N_i} X_{i,j}\)</span>.</p></li>
</ol>
<p>En el lenguaje de programación R, este método de simulación puede ser fácilmente implementado,
como ya lo hemos realizado, utilizando las funciones de aplicación vectorial <code>sapply</code> y <code>lapply</code>.</p>
<div class="example">
<p><span id="exm:l5ex3" class="example"><strong>Ejemplo 5.3  </strong></span>Consideramos el caso de un modelo colectivo para el cuál el conteo de siniestros
<span class="math inline">\(N \rightsquigarrow Pois( \lambda )\)</span> y la distribución de cada uno de los reclamos
<span class="math inline">\(\{X_i\}_{i\in \mathbb{N}}\)</span>, está dada por la misma distribución de probabilidad
<span class="math inline">\(X \rightsquigarrow LN( \mu, \sigma )\)</span>, siendo además cada uno de los reclamos indepencientes entre
si.</p>
<p></p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb43"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb43-1"><a href="modelos-de-pérdida-agregada.html#cb43-1"></a><span class="co"># 1. selección de simulaciones</span></span>
<span id="cb43-2"><a href="modelos-de-pérdida-agregada.html#cb43-2"></a>m <span class="ot">&lt;-</span> <span class="fl">1e4</span></span>
<span id="cb43-3"><a href="modelos-de-pérdida-agregada.html#cb43-3"></a></span>
<span id="cb43-4"><a href="modelos-de-pérdida-agregada.html#cb43-4"></a><span class="co"># 2. especificación de los parámetros para las distribuciones</span></span>
<span id="cb43-5"><a href="modelos-de-pérdida-agregada.html#cb43-5"></a>u <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb43-6"><a href="modelos-de-pérdida-agregada.html#cb43-6"></a>s <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb43-7"><a href="modelos-de-pérdida-agregada.html#cb43-7"></a>l <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb43-8"><a href="modelos-de-pérdida-agregada.html#cb43-8"></a></span>
<span id="cb43-9"><a href="modelos-de-pérdida-agregada.html#cb43-9"></a><span class="co"># 3. simulación del conteo de siniestros</span></span>
<span id="cb43-10"><a href="modelos-de-pérdida-agregada.html#cb43-10"></a>N <span class="ot">&lt;-</span> <span class="fu">rpois</span>( <span class="at">n =</span> m, <span class="at">lambda =</span> l )</span>
<span id="cb43-11"><a href="modelos-de-pérdida-agregada.html#cb43-11"></a></span>
<span id="cb43-12"><a href="modelos-de-pérdida-agregada.html#cb43-12"></a><span class="co"># 4. simulación de la severidad de los reclamos</span></span>
<span id="cb43-13"><a href="modelos-de-pérdida-agregada.html#cb43-13"></a>X <span class="ot">&lt;-</span> <span class="fu">lapply</span>( N, <span class="at">FUN =</span> <span class="cf">function</span>( n ) <span class="fu">rlnorm</span>( n, <span class="at">meanlog =</span> u, <span class="at">sdlog =</span> s ) )</span>
<span id="cb43-14"><a href="modelos-de-pérdida-agregada.html#cb43-14"></a></span>
<span id="cb43-15"><a href="modelos-de-pérdida-agregada.html#cb43-15"></a><span class="co"># 5. reclamo total, agregación por cada simulación</span></span>
<span id="cb43-16"><a href="modelos-de-pérdida-agregada.html#cb43-16"></a>S <span class="ot">&lt;-</span> <span class="fu">sapply</span>( X, <span class="at">FUN =</span> <span class="cf">function</span>( x ) <span class="fu">sum</span>( x, <span class="at">na.rm =</span> <span class="cn">TRUE</span> ) )</span></code></pre></div>
</details>
<p></p>
</div>
<p>Es de notar que una algoritmo como el descrito tiene una falencia cuando la frecuencia de siniestros
es poco observada, esto sucede cuando la probabilidad <span class="math inline">\(P( N = 0 )\)</span> es alta y por tal razón para
generar suficientes reclamos y así poder tener cálculos con una buena aproximación numérica,
con el uso de simulaciones se necesitará muchas simulaciones.</p>
<p>Es interesante observar que el modelo colectivo puede ser muchas veces calculado de forma similar
a un modelo individual, para ciertos casos particulares. Por ejemplo, si consideramos el caso
cuando la variable aleatoria del conteo de siniestros <span class="math inline">\(N \rightsquigarrow Bin( n, p )\)</span> sigue una
distribución binomial con parámetros <span class="math inline">\(n\)</span> y <span class="math inline">\(p\)</span> y los reclamos individuales <span class="math inline">\(\{ X_i \}\)</span> son i.i.d.
A partir de esto, el reclamo total <span class="math inline">\(S\)</span> puede ser expresado de dos formas
<span class="math display">\[
S = \sum\limits_{k=0}^{N} X_k
= \sum\limits_{k=0}^n B_k X_k
\]</span>
donde <span class="math inline">\(B_k \rightsquigarrow Ber( p )\)</span> y es independientes de <span class="math inline">\(X_k\)</span>. Así el modelo colectivo se
transforma en un modelo individual con <span class="math inline">\(n\)</span> constante y valores de reclamos individuales dados por
la variable aleatoria <span class="math inline">\(Y_k = B_k X_k\)</span>.</p>
<p>Para este caso en particular
<span class="math display">\[
\begin{eqnarray*}
\mathbb{E}[ S ]
&amp; = &amp; \mathbb{E}\left[ \sum\limits_{k=0}^{n} B_k X_k \right] \\
&amp; = &amp; \sum\limits_{k=0}^{n} \mathbb{E}\left[ B_k X_k \right] \\
&amp; = &amp; n \mathbb{E}[ B X ] \\
&amp; = &amp; n \mathbb{E}[ B ] \mathbb{E}[ X ] \\
&amp; = &amp; n p \mathbb{E}[ X ]
\end{eqnarray*}
\]</span></p>
<p>así mismo,
<span class="math display">\[
\begin{eqnarray*}
\mathbb{V}[ S ]
&amp; = &amp; n \mathbb{V}[ B X ] \\
&amp; = &amp; n \left( \mathbb{E}[ B^2 X^2 ] - \mathbb{E}[ B X ]^2 \right) \\
&amp; = &amp; n \left( \mathbb{E}[ B^2 ] \mathbb{E}[ X^2 ] - \mathbb{E}[ B ]^2 \mathbb{E}[ X ]^2 \right) \\
&amp; = &amp; n \left( p \mathbb{E}[ X^2 ] - p^2 \mathbb{E}[ X ]^2 \right) \\
&amp; = &amp; n \left( p \mathbb{E}[ X^2 ] - p \mathbb{E}[ X ]^2 + p \mathbb{E}[ X ]^2  - p^2 \mathbb{E}[ X ]^2 \right) \\
&amp; = &amp; n \left( p \mathbb{V}[ X ] + p ( 1 - p ) \mathbb{E}[ X ]^2 \right) \\
&amp; = &amp; n \left( \mathbb{E}[B] \mathbb{V}[ X ] + \mathbb{V}[B] \mathbb{E}[ X ]^2 \right)
\end{eqnarray*}
\]</span></p>
<div class="example">
<p><span id="exm:l5ex4" class="example"><strong>Ejemplo 5.4  </strong></span>Hacemos uso del algoritmo de simulación, pero bajo la consideración anterior donde el conteo
de siniestros <span class="math inline">\(N \rightsquigarrow Bin( n, p )\)</span>, en algunos casos se puede considerar <span class="math inline">\(n\)</span> como el
número de pólizas vendidas, esto supone que solo se presenta un reclamo por póliza. Por su parte los
reclamos consideraremos <span class="math inline">\(X_i \rightsquigarrow LN( \mu, \sigma )\)</span>, para todo <span class="math inline">\(i \in \{1,\ldots,n\}\)</span>.
Si consideramos generar la simulación como un modelo individual, generamos variables aleatorias
<span class="math inline">\(B_i \rightsquigarrow Ber(p)\)</span>, para todo <span class="math inline">\(i \in \{1,\ldots,n\}\)</span>.</p>
<p></p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb44"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb44-1"><a href="modelos-de-pérdida-agregada.html#cb44-1"></a>m <span class="ot">&lt;-</span> <span class="fl">1e4</span></span>
<span id="cb44-2"><a href="modelos-de-pérdida-agregada.html#cb44-2"></a>n <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb44-3"><a href="modelos-de-pérdida-agregada.html#cb44-3"></a>p <span class="ot">&lt;-</span> <span class="fl">0.2</span></span>
<span id="cb44-4"><a href="modelos-de-pérdida-agregada.html#cb44-4"></a>mu <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb44-5"><a href="modelos-de-pérdida-agregada.html#cb44-5"></a>sigma <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb44-6"><a href="modelos-de-pérdida-agregada.html#cb44-6"></a>B <span class="ot">&lt;-</span> <span class="fu">lapply</span>( <span class="dv">1</span><span class="sc">:</span>m, <span class="at">FUN =</span> <span class="cf">function</span>( i ) <span class="fu">rbinom</span>( n, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> p ) )</span>
<span id="cb44-7"><a href="modelos-de-pérdida-agregada.html#cb44-7"></a>X <span class="ot">&lt;-</span> <span class="fu">lapply</span>( <span class="dv">1</span><span class="sc">:</span>m, <span class="at">FUN =</span> <span class="cf">function</span>( i ) <span class="fu">rlnorm</span>( n, <span class="at">meanlog =</span> mu, <span class="at">sdlog =</span> sigma ) )</span>
<span id="cb44-8"><a href="modelos-de-pérdida-agregada.html#cb44-8"></a>S <span class="ot">&lt;-</span> <span class="fu">sapply</span>( <span class="dv">1</span><span class="sc">:</span>m, <span class="at">FUN =</span> <span class="cf">function</span>( i ) <span class="fu">sum</span>( B[[ i ]] <span class="sc">*</span> X[[ i ]], <span class="at">na.rm =</span> <span class="cn">TRUE</span> ) )</span>
<span id="cb44-9"><a href="modelos-de-pérdida-agregada.html#cb44-9"></a></span>
<span id="cb44-10"><a href="modelos-de-pérdida-agregada.html#cb44-10"></a>EeS <span class="ot">&lt;-</span> <span class="fu">mean</span>( S )</span>
<span id="cb44-11"><a href="modelos-de-pérdida-agregada.html#cb44-11"></a>ES <span class="ot">&lt;-</span> n <span class="sc">*</span> p <span class="sc">*</span> <span class="fu">exp</span>( mu <span class="sc">+</span> <span class="fl">0.5</span> <span class="sc">*</span> sigma<span class="sc">^</span><span class="dv">2</span> )</span></code></pre></div>
</details>
<p></p>
<p><span class="math display">\[
\begin{eqnarray*}
\mathbb{E}[S] = n p e^{ \mu + \frac{1}{2} \sigma^2 } &amp; = &amp; 219326.6317, \\
\overline{S} = \frac{1}{m} \sum\limits_{i=1}^m S_i &amp; = &amp; 219346.3972,
\end{eqnarray*}
\]</span></p>
</div>
<p>Es importante observar que si la frecuencia de reclamos es superior a <span class="math inline">\(1\)</span>, sea este por póliza,
individuo o en general por unidad asegurada, la aproximación anterior no es la correcta si no
se realiza un ajuste al valor <span class="math inline">\(n\)</span> que es el número máximo de siniestros. Sino también, se puede
considera que las variables de los reclamos es la suma total de reclamos por póliza.</p>
<p>Por otra parte, es de notar que en el cálculo hay un gasto innecesario de valores simulados de
reclamos <span class="math inline">\(X_i\)</span> ya que algunos se multiplicaran por <span class="math inline">\(B_i\)</span>, la cual solo toma valores <span class="math inline">\(\{0,1\}\)</span>.</p>
<!------------------------------------------------------------------------------------------------->
</div>
</div>
<div id="modelos-mixtos" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Modelos mixtos<a href="modelos-de-pérdida-agregada.html#modelos-mixtos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>En algunos casos en particular se considera un modelo de agregación que es una mixtura entre el
modelo individual y el modelo colectivo. Se parte de considerar un número <span class="math inline">\(n\)</span> de unidades aseguradas
donde para cada unidad <span class="math inline">\(i \in \{1, \ldots, n\}\)</span>, se considera que puede presentar una cantidad
de reclamos dados por una variable aleatoria discreta <span class="math inline">\(N_i\)</span>, y así para cada presentar un número
de reclamos <span class="math inline">\(X_{i,1}, \ldots, X_{i,N_i}\)</span>. Así el reclamo total viene dado por la expresión
<span class="math display">\[
S
= \sum\limits_{i=1}^n X_i
= \sum\limits_{i=1}^n \sum\limits_{j=1}^{N_i} X_{i,j}
\]</span></p>
<!------------------------------------------------------------------------------------------------->
</div>
<div id="modelos-con-variables-explicativas" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Modelos con variables explicativas<a href="modelos-de-pérdida-agregada.html#modelos-con-variables-explicativas" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>En algunos casos más generales, donde la población presenta heterogeneidad respecto del riesgo al
cual están expuestos, como también de las dimensiones de sus reclamos, se considera que existen
variables aleatorias adicionales <span class="math inline">\(Y_1, \ldots, Y_n\)</span> que determinan el número de reclamos <span class="math inline">\(N\)</span> y
el valor de los siniestros <span class="math inline">\(\{X_i\}\)</span>. Es decir no hay independencia entre <span class="math inline">\(\{Y_j\}\)</span> y <span class="math inline">\(N\)</span> así
como tampoco entre <span class="math inline">\(\{Y_j\}\)</span> y <span class="math inline">\(\{X_i\}\)</span>. Es así que un modelo colectivo <span class="math inline">\(S = \sum\limits_{i=1}^N X_i\)</span>
su estudio, estimación y tarificación debe ser realizada de forma condicional respecto de las
variables aleatorias explicativas <span class="math inline">\(\{Y_j\}\)</span>,
<span class="math display">\[
\mathbb{E}[ S ]
= \mathbb{E}\left[ \mathbb{E}\left[ S \middle| Y_1, \ldots, Y_n \right] \right]
\]</span>
de donde es necesario estimar cada una de las esperanzas condicionadas
<span class="math inline">\(\mathbb{E}\left[ S \middle| Y_1, \ldots, Y_n \right]\)</span>.</p>
<p>En la práctica las variables explicativas <span class="math inline">\(\{ Y_j \}\)</span> suelen ser seleccionadas para caracterizar
el perfil de riesgo de cada cliente. Para su selección se suele utilizar algunos criterios de tipo
económico, financiero, legal y estadístico.</p>
<!------------------------------------------------------------------------------------------------->
</div>
<div id="proceso-estocástico-de-reclamos-totales" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">5.6</span> Proceso estocástico de reclamos totales<a href="modelos-de-pérdida-agregada.html#proceso-estocástico-de-reclamos-totales" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Hasta el momento no hemos considerado que los reclamos se producen en el tiempo, que cada reclamo
está bien vinculado al tiempo; es más podemos identificar algunos instantes en el tiempo que le
corresponde, tenemos así el tiempo cuando se suscita el siniestro o tiempo de ocurrencia, el tiempo
de aviso cuando se comunica al asegurador el siniestro y un tiempo de pago. Los dos últimos
no son directos asociados al evento del siniestro sino están asociados a otras variables que pueden
afectar la demora para comunicar un siniestro por parte del asegurado y la demora para cancelarlo
por parte del asegurador.</p>
<p>Así por tanto si tenemos una secuencia de siniestros <span class="math inline">\(\{X_n\}_{n\in\mathbb{N}^*}\)</span>, estos los podemos
considerar ordenados en el tiempo conforme han venido presentándose en instantes
<span class="math inline">\(0= T_0 \leq T_1 \leq \cdots \leq T_n \leq \cdots\)</span>, es decir se le asocia a los reclamos <span class="math inline">\(\{X_n\}\)</span> la
secuencia de los <strong>tiempos de arribo</strong> <span class="math inline">\(\{T_n\}_{n\in\mathbb{N}}\)</span>, donde <span class="math inline">\(T_{n+1} \geq T_n\)</span>, para
cualquier <span class="math inline">\(n \in \mathbb{N}\)</span>. Ciertamente, es de esperar que los tiempos de arribo sean variables
aleatorias y están asociados a la frecuencia <span class="math inline">\(N\)</span> en un periodo dado, ya que <span class="math inline">\(N\)</span> cuenta los tiempos
de arribo hasta un instante dado <span class="math inline">\(t \geq 0\)</span>, bajo esta perspectiva transformamos a <span class="math inline">\(N\)</span> en una
variable aleatoria dependiente del tiempo, en lo que se conoce como un <strong>proceso estocástico</strong>.
<span class="math display">\[
N( t )
= \#\left\{ n \in \mathbb{N}\ \middle|\ T_n \leq t \right\}
= \sum\limits_{n=0}^{+\infty} \mathbf{1}_{(-\infty,t]}\left( T_n \right)
\]</span></p>
<p>Inmediatamente de este razonamiento, resulta que los reclamos totales también se transforman en
proceso estocástico, conforme se van considerando los arribos de los reclamos.
<span class="math display">\[
S( t ) = \sum\limits_{i=1}^{N( t )} X_i
\]</span>
donde claramente, como hemos venido haciéndolo, si <span class="math inline">\(N(t) = 0\)</span>, entonces la suma total de reclamos
es cero, <span class="math inline">\(S(t) = 0\)</span>.</p>
<p>Además, junto con lo anterior, se pueden identificar las variables aleatorias de
<strong>tiempos entre arribos</strong>, dadas por las diferencias entre tiempos de arribo contiguos
<span class="math display">\[
W_n = T_n - T_{n-1},\quad \forall n \in \mathbb{N}
\]</span></p>
<p>Un hipótesis bien común en el modelamiento de un proceso de pérdida agregada utilizando esta
aproximación es asumir que los tiempos entre arribo <span class="math inline">\(\{W_n\}\)</span> son independientes entre si, es decir,
el momento que se producen cada uno de los siniestros es de forma independiente. También se suele
suponer independencia entre los tiempos entre arribo <span class="math inline">\(\{W_n\}\)</span> y las variables que representan
la magnitud de cada uno de los reclamos <span class="math inline">\(\{X_n\}\)</span>.</p>
<p>Los resultados para el cálculo de la esperanza y la varianza se pueden obtener de forma similar
a lo que realizamos en la sección <a href="modelos-de-pérdida-agregada.html#sec:modind">5.2</a>.
<span class="math display">\[
\begin{eqnarray*}
\mathbb{E}[S(t)]
&amp; = &amp; \mathbb{E}\left[ \sum\limits_{i=1}^{N(t)} X_i \right] \\
&amp; = &amp; \sum\limits_{n=0}^{+\infty} \mathbb{E}\left[ \sum\limits_{i=1}^n X_i\ \middle|\ N(t) = n \right]P( N(t) = n )
\quad \text{utilizando la esperanza condicional} \\
&amp; = &amp; 0 P( N(t) = 0 ) + \sum\limits_{n=1}^{+\infty}
\mathbb{E}\left[ \sum\limits_{i=1}^n X_i\ \middle|\ N(t) = n \right]P( N(t) = n ) \\
&amp; = &amp; \sum\limits_{n=1}^{+\infty} \sum\limits_{i=1}^n \mathbb{E}\left[ X_i \mid N(t) = n \right]P( N(t) = n )
\quad \text{linealidad de la esperanza} \\
&amp; = &amp; \sum\limits_{n=0}^{+\infty} n \mathbb{E}\left[ X \mid N(t) = n \right]P( N(t) = n )
\quad \text{si $\{X_i\}$ son idénticamente distribuidas} \\
&amp; = &amp; \mathbb{E}\left[ X \right] \sum\limits_{n=0}^{+\infty} n P( N(t) = n )
\quad \text{si $X$ y $N(t)$ son independientes} \\
&amp; = &amp; \mathbb{E}[ N(t) ] \mathbb{E}[ X ]
\end{eqnarray*}
\]</span></p>
<p>el segundo momento de <span class="math inline">\(S(t)\)</span> se calcula de forma similar
<span class="math display">\[
\begin{eqnarray*}
\mathbb{E}[S(t)^2]
&amp; = &amp; \mathbb{E}\left[ \left( \sum\limits_{i=1}^{N(t)} X_i \right)^2 \right] \\
&amp; = &amp; \sum\limits_{n=0}^\infty \mathbb{E}\left[ \sum\limits_{i, j=1}^n X_i X_j \middle| N(t) = n \right] P( N = n )
\quad \text{propiedades de la esperanza condicional} \\
&amp; = &amp; \sum\limits_{n=0}^\infty \sum\limits_{i, j=1}^n \mathbb{E}\left[ X_i X_j \right] P( N(t) = n )
\quad \text{si $\{X_i\}$ y $N(t)$ son independientes} \\
&amp; = &amp; \sum\limits_{n=0}^\infty \left( \sum\limits_{i=1}^n \mathbb{E}\left[ X_i^2 \right]
+ \sum\limits_{i,j=1,i\neq j}^n \mathbb{E}\left[ X_i X_j \right] \right) P( N(t) = n ) \\
&amp; = &amp; \sum\limits_{n=0}^\infty \left( n \mathbb{E}\left[ X^2 \right] + n(n-1) \mathbb{E}\left[ X \right]^2 \right) P( N(t) = n )
\quad \text{si $\{X_i\}$ son i.i.d} \\
&amp; = &amp; \mathbb{E}\left[N(t)\right] \mathbb{E}\left[X^2\right] + \mathbb{E}\left[N(t)^2\right] \mathbb{E}\left[X\right]^2
- \mathbb{E}\left[N(t)\right] \mathbb{E}\left[X\right]^2 \\
&amp; = &amp; \mathbb{E}\left[N(t)\right] \mathbb{V}\left[X\right] + \mathbb{E}\left[N(t)^2\right] \mathbb{E}\left[X\right]^2
\end{eqnarray*}
\]</span></p>
<p>y finalmente la varianza de <span class="math inline">\(S(t)\)</span>
<span class="math display">\[
\begin{eqnarray*}
\mathbb{V}\left[S(t)\right]
&amp; = &amp; \mathbb{E}\left[S(t)^2\right] - \mathbb{E}\left[S(t)\right]^2 \\
&amp; = &amp; \mathbb{E}\left[N(t)\right] \mathbb{V}\left[X\right]
+ \mathbb{E}\left[N(t)^2\right] \mathbb{E}\left[X\right]^2 - \mathbb{E}\left[N(t)\right]^2 \mathbb{E}\left[X\right]^2 \\
&amp; = &amp; \mathbb{E}\left[N(t)\right] \mathbb{V}\left[X\right] + \mathbb{V}\left[N(t)\right] \mathbb{E}\left[X\right]^2
\end{eqnarray*}
\]</span>
Si trabajamos bajo la hipótesis que los tiempos entre arribos <span class="math inline">\(\{W_n\}\)</span> son i.i.d, con distribución
de probabilidad común <span class="math inline">\(F_W\)</span>. Podemos comprender y estudiar de una forma un poco más sencilla el
proceso estocástico atado a la frecuencia de los siniestros <span class="math inline">\(N\)</span>.</p>
<p>Notemos primeramente que se tienen la siguiente igualdad entre los eventos
<span class="math display">\[
\{N(t) = n\}
= \{T_n \leq \land T_{n+1} &gt; t\}
= \{T_n \leq t \} \cap \{ T_{n+1} \leq t\}^c
= \{T_n \leq t \} \setminus \{ T_{n+1} \leq t\}
\]</span>
además es de observar que <span class="math inline">\(\{ T_{n+1} \leq t\} \subset \{ T_{n} \leq t\}\)</span>. Con todo esto en
consideración para cualquier <span class="math inline">\(n &gt; 0\)</span>.
<span class="math display">\[
\begin{eqnarray*}
P( N(t) = n )
&amp; = &amp; P( T_n \leq t \land T_{n+1} &gt; t ) \\
&amp; = &amp; P( \{T_n \leq t \} \setminus \{ T_{n+1} \leq t\} ) \\
&amp; = &amp; P( T_n \leq t ) - P( T_{n+1} \leq t ) \\
&amp; = &amp; F_W^{\star n}( t ) - F_W^{\star n + 1}( t )
\end{eqnarray*}
\]</span></p>
<p>el caso <span class="math inline">\(n = 0\)</span> también es sencillo
<span class="math display">\[
\begin{eqnarray*}
P( N(t) = 0 )
&amp; = &amp; P( T_0 \leq t \land T_1 &gt; t ) \\
&amp; = &amp; P( \{T_0 \leq t \} \setminus \{ T_1 \leq t\} ) \\
&amp; = &amp; P( T_0 \leq t ) - P( T_1 \leq t ) \\
&amp; = &amp; 1 - F_W^{\star 1}( t ) \\
&amp; = &amp; F_W^{\star 0}( t ) - F_W^{\star 1}( t )
\end{eqnarray*}
\]</span></p>
<p>De lo anterior resulta que la esperanza de <span class="math inline">\(N(t)\)</span>, está dada por la siguiente serie.
<span class="math display">\[
\begin{eqnarray*}
\mathbb{E}[ N( t ) ]
&amp; = &amp; \sum\limits_{n=0}^{+\infty} n P( N(t) = n ) \\
&amp; = &amp; \sum\limits_{n=0}^{+\infty} n \left( F_W^{\star n}( t ) - F_W^{\star n + 1}( t ) \right) \\
&amp; = &amp; 0\left( F_W^{\star 0}( t ) - F_W^{\star 1}( t ) \right)
+ 1\left( F_W^{\star 1}( t ) - F_W^{\star 2}( t ) \right)
+ 2\left( F_W^{\star 2}( t ) - F_W^{\star 3}( t ) \right)
+ \cdots \\
&amp; = &amp; \sum\limits_{n=1}^{+\infty} F_W^{\star n}( t )
\end{eqnarray*}
\]</span></p>
<div id="algoritmo-de-simulación-2" class="section level3 hasAnchor" number="5.6.1">
<h3><span class="header-section-number">5.6.1</span> Algoritmo de simulación<a href="modelos-de-pérdida-agregada.html#algoritmo-de-simulación-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>Se selecciona el número adecuado de simulaciones <span class="math inline">\(m \in \mathbb{N}^*\)</span>,</p></li>
<li><p>Se selecciona el número de simulaciones de tiempos de arribo <span class="math inline">\(M \in \mathbb{N}^*\)</span>,</p></li>
<li><p>Dada la distribución de los tiempos entre arribos <span class="math inline">\(F_W\)</span> para cada simulación <span class="math inline">\(i \in \{1, \ldots, m\}\)</span>
se genera una muestra <span class="math inline">\(W_{i,1}, \ldots, W_{i,M}\)</span> de tamaño de <span class="math inline">\(M\)</span>,</p></li>
<li><p>Para cada simulación <span class="math inline">\(i \in \{1, \ldots, m\}\)</span> y cada <span class="math inline">\(n \in \{0, \ldots, M\}\)</span> calculamos los
tiempos de arribo <span class="math inline">\(T_{i,0},\ldots, T_{i,M}\)</span>
<span class="math display">\[
T_{i,0} = 0,\qquad
T_{i,n} = \sum\limits_{k=1}^n W_{i,k}
\]</span></p></li>
<li><p>Se toma una malla de discretización en el tiempo <span class="math inline">\(0 = t_0 &lt; t_1 &lt; \cdots &lt; t_p = T\)</span> y calculamos
para cada simulación <span class="math inline">\(i \in \{1,\ldots,m\}\)</span> y tiempo <span class="math inline">\(t_l\)</span>, con <span class="math inline">\(l \in \{0,\ldots,p\}\)</span>.
<span class="math display">\[
N_{i,l} = \#\left\{ n \in \mathbb{N}\ \middle|\ T_{i,n} \leq t_l \right\}
= \sum\limits_{n=0}^{M} \mathbf{1}_{(-\infty,t_l]}\left( T_n \right)
\]</span>
precisamente para cada simulación <span class="math inline">\(i\)</span>, el término <span class="math inline">\(N_{i,l}\)</span> es una aproximación al proceso
<span class="math inline">\(N( t_l )\)</span> evaluado en el tiempo <span class="math inline">\(t_l\)</span>. Así se puede tener la aproximación de la media
<span class="math display">\[
\mathbb{E}\left[ N( t_l ) \right] \approx \frac{1}{m} \sum\limits_{i=1}^m N_{i,l}
\]</span></p></li>
<li><p>Con la simulación el proceso estocástico <span class="math inline">\(N\)</span> podemos ahora proceder a simular los reclamos totales.
Para cada simulación <span class="math inline">\(i \in \{1,\ldots,m\}\)</span>, tomamos una muestra de forma independiente e igualmente
distribuida de los reclamos individuales <span class="math inline">\(X_{i,1}, \ldots, X_{i,N_{i,p}}\)</span>, la cual tiene tamaño
<span class="math inline">\(N_{i,p}\)</span>, y son tomados de la distribución de probabilidad <span class="math inline">\(F_X\)</span></p></li>
<li><p>Para cada simulación <span class="math inline">\(i \in \{1,\ldots, m\}\)</span> y cada tiempo <span class="math inline">\(t_l\)</span> con <span class="math inline">\(l \in \{0,\ldots,p\}\)</span>,
calculamos la suma
<span class="math display">\[
S_{i,l} = \sum\limits_{j=1}^{N_{i,l}} X_{i,j}
\]</span>
cada <span class="math inline">\(S_{i,l}\)</span> es una aproximación al proceso del total de reclamos <span class="math inline">\(S(t_l)\)</span> precisamente en el
tiempo <span class="math inline">\(t_l\)</span>. Así resulta la aproximación
<span class="math display">\[
\mathbb{E}\left[ S( t_l ) \right] \approx \frac{1}{m} \sum\limits_{i=1}^m S_{i,l}
\]</span></p></li>
<li><p>Además, para cada instante <span class="math inline">\(t_l\)</span>, se puede aproximar la función de distribución acumulada
<span class="math inline">\(F_{S(t_l)}\)</span> de la variable aleatoria <span class="math inline">\(S( t_l )\)</span> utilizando la distribución acumulada empírica
generada con la muestra <span class="math inline">\(S_{1,l},\ldots,S_{m,l}\)</span>. Para cualquier <span class="math inline">\(s \in \mathbb{R}\)</span>, tenemos la aproximación
<span class="math display">\[
F_{S(t_l)}( s ) \approx F_{m,l}( s )
= \frac{1}{m} \sum\limits_{i=1}^m \mathbf{1}_{(-\infty,s]}\left( S_{i,l} \right)
\]</span>
El algoritmo de simulación anterior tiene una falencia, no se sabe a priori que valor <span class="math inline">\(M\)</span> se debe
escoger para simular de forma correcta los procesos <span class="math inline">\(N\)</span> y <span class="math inline">\(S\)</span> hasta un tiempo máximo <span class="math inline">\(T\)</span> dado. Esto
implica que si <span class="math inline">\(M\)</span> no es del tamaño adecuado, las estimaciones que se realice utilizando la
simulación va a degradarse conforme avanza el tiempo.</p></li>
</ol>
<div class="example">
<p><span id="exm:l5ex5" class="example"><strong>Ejemplo 5.5  </strong></span>El siguiente ejemplo es de especial atención ya que es utilizado en muchas aplicaciones, podemos
considerar el caso donde el tiempo entre arribos <span class="math inline">\(\{W_n\}\)</span> es i.i.d y con distribución de
probabilidad común <span class="math inline">\(F_W\)</span> dada por una ley exponencial <span class="math inline">\(Exp( \lambda )\)</span>. Un resultado clásico muestra
que la suma de <span class="math inline">\(n\)</span> exponenciales sigue una ley gamma <span class="math inline">\(Gamma(n,\lambda)\)</span>, esto implica que
<span class="math inline">\(T_n = W_1 + \cdots + W_n \rightsquigarrow Gamma( n, \lambda )\)</span> o también <span class="math inline">\(F_W^{\star n}\)</span> es una
<span class="math inline">\(Gamma( n, \lambda )\)</span>. Así por tanto, el proceso estocástico de conteo
<span class="math inline">\(N(t) = \#\left\{ n \in \mathbb{N}\ \middle|\ T_n \leq t \right\}\)</span> tiene las siguientes probabilidades
<span class="math display">\[
\begin{eqnarray*}
P( N( t ) = n )
&amp; = &amp; F_W^{\star n}( t ) - F_W^{\star n + 1}( t ) \\
&amp; = &amp; \exp( -\lambda t ) \sum\limits_{k=n}^{+\infty} \frac{(\lambda t)^k}{k!}
- \exp( -\lambda t ) \sum\limits_{k={n+1}}^{+\infty} \frac{(\lambda t)^k}{k!} \\
&amp; = &amp; \exp( -\lambda t ) \frac{(\lambda t)^n}{n!}
\end{eqnarray*}
\]</span></p>
<p>En conclusión <span class="math inline">\(N(t)\)</span> tiene como distribución una ley de Poisson <span class="math inline">\(Pois( \lambda t )\)</span>, en particular
se conoce a <span class="math inline">\(N\)</span> como un proceso de Poisson.</p>
</div>
<p></p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb45"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb45-1"><a href="modelos-de-pérdida-agregada.html#cb45-1"></a>m <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb45-2"><a href="modelos-de-pérdida-agregada.html#cb45-2"></a>lambda <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb45-3"><a href="modelos-de-pérdida-agregada.html#cb45-3"></a>M <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb45-4"><a href="modelos-de-pérdida-agregada.html#cb45-4"></a>p <span class="ot">&lt;-</span> <span class="dv">365</span></span>
<span id="cb45-5"><a href="modelos-de-pérdida-agregada.html#cb45-5"></a>u <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb45-6"><a href="modelos-de-pérdida-agregada.html#cb45-6"></a>s <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb45-7"><a href="modelos-de-pérdida-agregada.html#cb45-7"></a></span>
<span id="cb45-8"><a href="modelos-de-pérdida-agregada.html#cb45-8"></a><span class="fu">set.seed</span>( <span class="dv">432147</span> )</span>
<span id="cb45-9"><a href="modelos-de-pérdida-agregada.html#cb45-9"></a>W <span class="ot">&lt;-</span> <span class="fu">lapply</span>( <span class="dv">1</span><span class="sc">:</span>m, <span class="at">FUN =</span> <span class="cf">function</span>( n ) <span class="fu">rexp</span>( M, <span class="at">rate =</span> lambda ) )</span>
<span id="cb45-10"><a href="modelos-de-pérdida-agregada.html#cb45-10"></a>Tn <span class="ot">&lt;-</span> <span class="fu">lapply</span>( W, <span class="at">FUN =</span> cumsum )</span>
<span id="cb45-11"><a href="modelos-de-pérdida-agregada.html#cb45-11"></a>Tnmax <span class="ot">&lt;-</span> <span class="fu">max</span>( <span class="fu">sapply</span>( Tn, <span class="at">FUN =</span> max ) )</span>
<span id="cb45-12"><a href="modelos-de-pérdida-agregada.html#cb45-12"></a>t <span class="ot">&lt;-</span> <span class="fu">seq</span>( <span class="dv">0</span>, Tnmax, <span class="at">length =</span> p )</span>
<span id="cb45-13"><a href="modelos-de-pérdida-agregada.html#cb45-13"></a></span>
<span id="cb45-14"><a href="modelos-de-pérdida-agregada.html#cb45-14"></a>N <span class="ot">&lt;-</span> <span class="fu">lapply</span>( Tn, <span class="at">FUN =</span> <span class="cf">function</span>( Tk ) <span class="fu">sapply</span>( t, <span class="at">FUN =</span> <span class="cf">function</span>( t ) <span class="fu">sum</span>( Tk <span class="sc">&lt;=</span> t ) ) )</span>
<span id="cb45-15"><a href="modelos-de-pérdida-agregada.html#cb45-15"></a>Nmax <span class="ot">&lt;-</span> <span class="fu">max</span>( <span class="fu">sapply</span>( N, <span class="at">FUN =</span> <span class="cf">function</span>( Ni ) <span class="fu">last</span>( Ni ) ) )</span>
<span id="cb45-16"><a href="modelos-de-pérdida-agregada.html#cb45-16"></a></span>
<span id="cb45-17"><a href="modelos-de-pérdida-agregada.html#cb45-17"></a><span class="fu">set.seed</span>( <span class="dv">7324312</span> )</span>
<span id="cb45-18"><a href="modelos-de-pérdida-agregada.html#cb45-18"></a>X <span class="ot">&lt;-</span> <span class="fu">lapply</span>( N, <span class="at">FUN =</span> <span class="cf">function</span>( Ni ) <span class="fu">rlnorm</span>( <span class="fu">last</span>( Ni ), <span class="at">meanlog =</span> u, <span class="at">sdlog =</span> s ) )</span>
<span id="cb45-19"><a href="modelos-de-pérdida-agregada.html#cb45-19"></a>S <span class="ot">&lt;-</span> <span class="fu">lapply</span>( <span class="dv">1</span><span class="sc">:</span>m, <span class="at">FUN =</span> <span class="cf">function</span>( i ) {</span>
<span id="cb45-20"><a href="modelos-de-pérdida-agregada.html#cb45-20"></a>  Si <span class="ot">&lt;-</span> <span class="fu">cumsum</span>( X[[ i ]] )</span>
<span id="cb45-21"><a href="modelos-de-pérdida-agregada.html#cb45-21"></a>  <span class="fu">return</span>( <span class="fu">sapply</span>( N[[ i ]], <span class="at">FUN =</span> <span class="cf">function</span>( Nj ) <span class="fu">ifelse</span>( Nj <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">0</span>, Si[ Nj ] ) ) )</span>
<span id="cb45-22"><a href="modelos-de-pérdida-agregada.html#cb45-22"></a>} )</span>
<span id="cb45-23"><a href="modelos-de-pérdida-agregada.html#cb45-23"></a>Smax <span class="ot">&lt;-</span> <span class="fu">max</span>( <span class="fu">sapply</span>( S, <span class="at">FUN =</span> <span class="cf">function</span>( Si ) <span class="fu">last</span>( Si ) ) )</span>
<span id="cb45-24"><a href="modelos-de-pérdida-agregada.html#cb45-24"></a></span>
<span id="cb45-25"><a href="modelos-de-pérdida-agregada.html#cb45-25"></a>EN <span class="ot">&lt;-</span> lambda <span class="sc">*</span> t</span>
<span id="cb45-26"><a href="modelos-de-pérdida-agregada.html#cb45-26"></a>EeN <span class="ot">&lt;-</span> <span class="fu">sapply</span>( <span class="dv">1</span><span class="sc">:</span>p, <span class="at">FUN =</span> <span class="cf">function</span>( l ) <span class="fu">mean</span>( <span class="fu">sapply</span>( <span class="dv">1</span><span class="sc">:</span>m, <span class="cf">function</span>( i ) N[[ i ]][ l ] ) ) )</span>
<span id="cb45-27"><a href="modelos-de-pérdida-agregada.html#cb45-27"></a></span>
<span id="cb45-28"><a href="modelos-de-pérdida-agregada.html#cb45-28"></a>ES <span class="ot">&lt;-</span> EN <span class="sc">*</span> <span class="fu">exp</span>( u <span class="sc">+</span> <span class="fl">0.5</span> <span class="sc">*</span> s<span class="sc">^</span><span class="dv">2</span> )</span>
<span id="cb45-29"><a href="modelos-de-pérdida-agregada.html#cb45-29"></a>EeS <span class="ot">&lt;-</span> <span class="fu">sapply</span>( <span class="dv">1</span><span class="sc">:</span>p, <span class="at">FUN =</span> <span class="cf">function</span>( l ) <span class="fu">mean</span>( <span class="fu">sapply</span>( <span class="dv">1</span><span class="sc">:</span>m, <span class="cf">function</span>( i ) S[[ i ]][ l ] ) ) )</span></code></pre></div>
</details>
<p></p>
<p>En el gráfico a continuación presentamos todos los procesos de conteo <span class="math inline">\(N_{i}\)</span> simulados, como es de
esperarse son funciones de escalera, siempre crecientes, que toma solo valores positivos.</p>
<p></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb46"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb46-1"><a href="modelos-de-pérdida-agregada.html#cb46-1" tabindex="-1"></a>Ndat <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb46-2"><a href="modelos-de-pérdida-agregada.html#cb46-2" tabindex="-1"></a><span class="cf">for</span> ( j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>m ) {</span>
<span id="cb46-3"><a href="modelos-de-pérdida-agregada.html#cb46-3" tabindex="-1"></a>  Ndat <span class="ot">&lt;-</span> <span class="fu">rbindlist</span>( <span class="fu">list</span>( Ndat, <span class="fu">data.table</span>( <span class="at">t =</span> t, <span class="at">m =</span> <span class="fu">as.factor</span>( j ), <span class="at">N =</span> N[[ j ]], <span class="at">S =</span> S[[ j ]] ) ) )</span>
<span id="cb46-4"><a href="modelos-de-pérdida-agregada.html#cb46-4" tabindex="-1"></a>}</span>
<span id="cb46-5"><a href="modelos-de-pérdida-agregada.html#cb46-5" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="fu">wes_palette</span>( m, <span class="at">name =</span> <span class="st">&quot;GrandBudapest2&quot;</span>, <span class="at">type =</span> <span class="st">&quot;continuous&quot;</span>)</span>
<span id="cb46-6"><a href="modelos-de-pérdida-agregada.html#cb46-6" tabindex="-1"></a></span>
<span id="cb46-7"><a href="modelos-de-pérdida-agregada.html#cb46-7" tabindex="-1"></a>time <span class="ot">&lt;-</span> t </span>
<span id="cb46-8"><a href="modelos-de-pérdida-agregada.html#cb46-8" tabindex="-1"></a></span>
<span id="cb46-9"><a href="modelos-de-pérdida-agregada.html#cb46-9" tabindex="-1"></a>plt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>( ) <span class="sc">+</span></span>
<span id="cb46-10"><a href="modelos-de-pérdida-agregada.html#cb46-10" tabindex="-1"></a>  <span class="fu">geom_step</span>( <span class="at">data =</span> Ndat, <span class="fu">aes</span>( <span class="at">x =</span> t, <span class="at">y =</span> N, <span class="at">group =</span> m, <span class="at">colour =</span> m ), <span class="at">size =</span> <span class="fl">0.2</span> ) <span class="sc">+</span></span>
<span id="cb46-11"><a href="modelos-de-pérdida-agregada.html#cb46-11" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="fu">aes</span>( <span class="at">x =</span> time, <span class="at">y =</span> EN, <span class="at">colour =</span> <span class="st">&#39;olivedrab2&#39;</span> ), <span class="at">size =</span> <span class="dv">1</span> ) <span class="sc">+</span></span>
<span id="cb46-12"><a href="modelos-de-pérdida-agregada.html#cb46-12" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="fu">aes</span>( <span class="at">x =</span> time, <span class="at">y =</span> EeN, <span class="at">colour =</span> <span class="st">&#39;red&#39;</span> ), <span class="at">size =</span> <span class="dv">1</span> ) <span class="sc">+</span></span>
<span id="cb46-13"><a href="modelos-de-pérdida-agregada.html#cb46-13" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>( <span class="at">values =</span> <span class="fu">c</span>( cols, <span class="st">&#39;olivedrab2&#39;</span>, <span class="st">&#39;red&#39;</span> ) ) <span class="sc">+</span></span>
<span id="cb46-14"><a href="modelos-de-pérdida-agregada.html#cb46-14" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>( <span class="at">breaks =</span> <span class="fu">seq</span>( <span class="dv">0</span>, Tnmax, <span class="at">length =</span> <span class="dv">11</span> ),</span>
<span id="cb46-15"><a href="modelos-de-pérdida-agregada.html#cb46-15" tabindex="-1"></a>                      <span class="at">labels =</span> <span class="fu">formatC</span>( <span class="fu">seq</span>( <span class="dv">0</span>, Tnmax, <span class="at">length =</span> <span class="dv">11</span> ), <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">format =</span> <span class="st">&#39;f&#39;</span> ), </span>
<span id="cb46-16"><a href="modelos-de-pérdida-agregada.html#cb46-16" tabindex="-1"></a>                      <span class="at">limits =</span> <span class="fu">c</span>( <span class="dv">0</span>, Tnmax ), <span class="at">expand =</span> <span class="fu">c</span>( <span class="dv">0</span>, <span class="dv">0</span> ) ) <span class="sc">+</span></span>
<span id="cb46-17"><a href="modelos-de-pérdida-agregada.html#cb46-17" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>( <span class="at">breaks =</span> <span class="fu">seq</span>( <span class="dv">0</span>, Nmax, <span class="at">length =</span> <span class="dv">11</span> ), </span>
<span id="cb46-18"><a href="modelos-de-pérdida-agregada.html#cb46-18" tabindex="-1"></a>                      <span class="at">labels =</span> <span class="fu">formatC</span>( <span class="fu">seq</span>( <span class="dv">0</span>, Nmax, <span class="at">length =</span> <span class="dv">11</span> ), <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">format =</span> <span class="st">&#39;f&#39;</span> ), </span>
<span id="cb46-19"><a href="modelos-de-pérdida-agregada.html#cb46-19" tabindex="-1"></a>                      <span class="at">limits =</span> <span class="fu">c</span>( <span class="dv">0</span>, Nmax ), <span class="at">expand =</span> <span class="fu">c</span>( <span class="dv">0</span>, <span class="dv">0</span> ) ) <span class="sc">+</span></span>
<span id="cb46-20"><a href="modelos-de-pérdida-agregada.html#cb46-20" tabindex="-1"></a>  <span class="fu">xlab</span>( <span class="fu">TeX</span>( <span class="st">&quot;$t$&quot;</span> ) ) <span class="sc">+</span> </span>
<span id="cb46-21"><a href="modelos-de-pérdida-agregada.html#cb46-21" tabindex="-1"></a>  <span class="fu">ylab</span>( <span class="fu">TeX</span>( <span class="st">&quot;$N(t)$&quot;</span> ) ) <span class="sc">+</span> </span>
<span id="cb46-22"><a href="modelos-de-pérdida-agregada.html#cb46-22" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb46-23"><a href="modelos-de-pérdida-agregada.html#cb46-23" tabindex="-1"></a>  <span class="fu">theme</span>( <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span> )</span>
<span id="cb46-24"><a href="modelos-de-pérdida-agregada.html#cb46-24" tabindex="-1"></a><span class="fu">plot</span>( plt )</span></code></pre></div>
</details>
<p><img src="seguros_generales_files/figure-html/l5g2-1.png" width="80%" height="500px" style="display: block; margin: auto;" /></p>
<p></p>
<p>El gráfico a continuación presenta la simulación de los procesos correspondientes al total de
reclamos, conforme avanza el tiempo. De igual manera los procesos <span class="math inline">\(S_i\)</span> son funciones de escalera,
siempre crecientes, con saltos correspondientes a los reclamos individuales.</p>
<p></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb47"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb47-1"><a href="modelos-de-pérdida-agregada.html#cb47-1" tabindex="-1"></a>Sqmax <span class="ot">&lt;-</span> <span class="fu">quantile</span>( <span class="fu">sapply</span>( S, <span class="at">FUN =</span> <span class="cf">function</span>( Si ) <span class="fu">last</span>( Si ) ), <span class="at">probs =</span> <span class="fl">0.99</span> )</span>
<span id="cb47-2"><a href="modelos-de-pérdida-agregada.html#cb47-2" tabindex="-1"></a></span>
<span id="cb47-3"><a href="modelos-de-pérdida-agregada.html#cb47-3" tabindex="-1"></a>plt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>( ) <span class="sc">+</span></span>
<span id="cb47-4"><a href="modelos-de-pérdida-agregada.html#cb47-4" tabindex="-1"></a>  <span class="fu">geom_step</span>( <span class="at">data =</span> Ndat, <span class="fu">aes</span>( <span class="at">x =</span> t, <span class="at">y =</span> S, <span class="at">group =</span> m, <span class="at">colour =</span> m ), <span class="at">size =</span> <span class="fl">0.2</span> ) <span class="sc">+</span></span>
<span id="cb47-5"><a href="modelos-de-pérdida-agregada.html#cb47-5" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="fu">aes</span>( <span class="at">x =</span> time, <span class="at">y =</span> ES, <span class="at">colour =</span> <span class="st">&#39;olivedrab2&#39;</span> ), <span class="at">size =</span> <span class="dv">1</span> ) <span class="sc">+</span></span>
<span id="cb47-6"><a href="modelos-de-pérdida-agregada.html#cb47-6" tabindex="-1"></a>  <span class="fu">geom_line</span>( <span class="fu">aes</span>( <span class="at">x =</span> time, <span class="at">y =</span> EeS, <span class="at">colour =</span> <span class="st">&#39;red&#39;</span> ), <span class="at">size =</span> <span class="dv">1</span> ) <span class="sc">+</span></span>
<span id="cb47-7"><a href="modelos-de-pérdida-agregada.html#cb47-7" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>( <span class="at">values =</span> <span class="fu">c</span>( cols, <span class="st">&#39;olivedrab2&#39;</span>, <span class="st">&#39;red&#39;</span> ) ) <span class="sc">+</span></span>
<span id="cb47-8"><a href="modelos-de-pérdida-agregada.html#cb47-8" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>( <span class="at">breaks =</span> <span class="fu">seq</span>( <span class="dv">0</span>, Tnmax, <span class="at">length =</span> <span class="dv">11</span> ),</span>
<span id="cb47-9"><a href="modelos-de-pérdida-agregada.html#cb47-9" tabindex="-1"></a>                      <span class="at">labels =</span> <span class="fu">formatC</span>( <span class="fu">seq</span>( <span class="dv">0</span>, Tnmax, <span class="at">length =</span> <span class="dv">11</span> ), <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">format =</span> <span class="st">&#39;f&#39;</span> ), </span>
<span id="cb47-10"><a href="modelos-de-pérdida-agregada.html#cb47-10" tabindex="-1"></a>                      <span class="at">limits =</span> <span class="fu">c</span>( <span class="dv">0</span>, Tnmax ), <span class="at">expand =</span> <span class="fu">c</span>( <span class="dv">0</span>, <span class="dv">0</span> ) ) <span class="sc">+</span></span>
<span id="cb47-11"><a href="modelos-de-pérdida-agregada.html#cb47-11" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>( <span class="at">breaks =</span> <span class="fu">seq</span>( <span class="dv">0</span>, Sqmax, <span class="at">length =</span> <span class="dv">11</span> ),</span>
<span id="cb47-12"><a href="modelos-de-pérdida-agregada.html#cb47-12" tabindex="-1"></a>                      <span class="at">labels =</span> <span class="fu">formatC</span>( <span class="fu">seq</span>( <span class="dv">0</span>, Sqmax, <span class="at">length =</span> <span class="dv">11</span> ), <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">format =</span> <span class="st">&#39;f&#39;</span> ), </span>
<span id="cb47-13"><a href="modelos-de-pérdida-agregada.html#cb47-13" tabindex="-1"></a>                      <span class="at">limits =</span> <span class="fu">c</span>( <span class="dv">0</span>, Sqmax ), <span class="at">expand =</span> <span class="fu">c</span>( <span class="dv">0</span>, <span class="dv">0</span> ) ) <span class="sc">+</span></span>
<span id="cb47-14"><a href="modelos-de-pérdida-agregada.html#cb47-14" tabindex="-1"></a>  <span class="fu">xlab</span>( <span class="fu">TeX</span>( <span class="st">&quot;$t$&quot;</span> ) ) <span class="sc">+</span> </span>
<span id="cb47-15"><a href="modelos-de-pérdida-agregada.html#cb47-15" tabindex="-1"></a>  <span class="fu">ylab</span>( <span class="fu">TeX</span>( <span class="st">&quot;$S(t)$&quot;</span> ) ) <span class="sc">+</span> </span>
<span id="cb47-16"><a href="modelos-de-pérdida-agregada.html#cb47-16" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb47-17"><a href="modelos-de-pérdida-agregada.html#cb47-17" tabindex="-1"></a>  <span class="fu">theme</span>( <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span> )</span>
<span id="cb47-18"><a href="modelos-de-pérdida-agregada.html#cb47-18" tabindex="-1"></a><span class="fu">plot</span>( plt )</span></code></pre></div>
</details>
<p><img src="seguros_generales_files/figure-html/l5g3-1.png" width="80%" height="500px" style="display: block; margin: auto;" /></p>
<p></p>
<p>Como se describe en el paso 8 del algoritmo de simulación, para cada tiempo <span class="math inline">\(t_l\)</span> se puede estimar
la distribución de probabilidad de la variable aleatoria <span class="math inline">\(S(t_l)\)</span>.</p>
<p></p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb48"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb48-1"><a href="modelos-de-pérdida-agregada.html#cb48-1"></a>FeS <span class="ot">&lt;-</span> <span class="fu">lapply</span>( <span class="dv">1</span><span class="sc">:</span>p, <span class="at">FUN =</span> <span class="cf">function</span>( l ) <span class="fu">ecdf</span>( <span class="fu">sapply</span>( S, <span class="at">FUN =</span> <span class="cf">function</span>( Si ) Si[ l ] ) ) )</span>
<span id="cb48-2"><a href="modelos-de-pérdida-agregada.html#cb48-2"></a>ns <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb48-3"><a href="modelos-de-pérdida-agregada.html#cb48-3"></a>s <span class="ot">&lt;-</span> <span class="fu">seq</span>( <span class="dv">0</span>, Smax, <span class="at">length =</span> ns )</span>
<span id="cb48-4"><a href="modelos-de-pérdida-agregada.html#cb48-4"></a>Fes <span class="ot">&lt;-</span> <span class="fu">lapply</span>( FeS, <span class="at">FUN =</span> <span class="cf">function</span>( FeSl ) <span class="fu">sapply</span>( s, <span class="at">FUN =</span> FeSl ) )</span></code></pre></div>
</details>
<p></p>
<p>La figura a continuación muestra cada una de las distribuciones de probabilidad empíricas estimadas
<span class="math inline">\(F_{m,l}\)</span>. Se puede observar que conforme avanza el tiempo, aumenta la probabilidad de observar
valores mayores del proceso <span class="math inline">\(S\)</span> correspondiente al total de reclamos.</p>
<p></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb49"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb49-1"><a href="modelos-de-pérdida-agregada.html#cb49-1" tabindex="-1"></a>FeSdat <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb49-2"><a href="modelos-de-pérdida-agregada.html#cb49-2" tabindex="-1"></a><span class="cf">for</span> ( j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>p ) {</span>
<span id="cb49-3"><a href="modelos-de-pérdida-agregada.html#cb49-3" tabindex="-1"></a>  FeSdat <span class="ot">&lt;-</span> <span class="fu">rbindlist</span>( <span class="fu">list</span>( FeSdat, <span class="fu">data.table</span>( <span class="at">s =</span> s, <span class="at">m =</span> <span class="fu">as.factor</span>( j ), <span class="at">Fes =</span> Fes[[ j ]] ) ) )</span>
<span id="cb49-4"><a href="modelos-de-pérdida-agregada.html#cb49-4" tabindex="-1"></a>}</span>
<span id="cb49-5"><a href="modelos-de-pérdida-agregada.html#cb49-5" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="fu">wes_palette</span>( p, <span class="at">name =</span> <span class="st">&quot;GrandBudapest2&quot;</span>, <span class="at">type =</span> <span class="st">&quot;continuous&quot;</span>)</span>
<span id="cb49-6"><a href="modelos-de-pérdida-agregada.html#cb49-6" tabindex="-1"></a></span>
<span id="cb49-7"><a href="modelos-de-pérdida-agregada.html#cb49-7" tabindex="-1"></a>plt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>( ) <span class="sc">+</span></span>
<span id="cb49-8"><a href="modelos-de-pérdida-agregada.html#cb49-8" tabindex="-1"></a>  <span class="fu">geom_step</span>( <span class="at">data =</span> FeSdat, <span class="fu">aes</span>( <span class="at">x =</span> s, <span class="at">y =</span> Fes, <span class="at">group =</span> m, <span class="at">colour =</span> m ), <span class="at">size =</span> <span class="fl">0.1</span> ) <span class="sc">+</span></span>
<span id="cb49-9"><a href="modelos-de-pérdida-agregada.html#cb49-9" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>( <span class="at">values =</span> <span class="fu">c</span>( cols ) ) <span class="sc">+</span></span>
<span id="cb49-10"><a href="modelos-de-pérdida-agregada.html#cb49-10" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>( <span class="at">breaks =</span> <span class="fu">seq</span>( <span class="dv">0</span>, Smax, <span class="at">length =</span> <span class="dv">5</span> ),</span>
<span id="cb49-11"><a href="modelos-de-pérdida-agregada.html#cb49-11" tabindex="-1"></a>                      <span class="at">labels =</span> <span class="fu">formatC</span>( <span class="fu">seq</span>( <span class="dv">0</span>, Smax, <span class="at">length =</span> <span class="dv">5</span> ), <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">format =</span> <span class="st">&#39;f&#39;</span> ), </span>
<span id="cb49-12"><a href="modelos-de-pérdida-agregada.html#cb49-12" tabindex="-1"></a>                      <span class="at">limits =</span> <span class="fu">c</span>( <span class="dv">0</span>, Smax ), <span class="at">expand =</span> <span class="fu">c</span>( <span class="dv">0</span>, <span class="dv">0</span> ) ) <span class="sc">+</span></span>
<span id="cb49-13"><a href="modelos-de-pérdida-agregada.html#cb49-13" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>( <span class="at">breaks =</span> <span class="fu">seq</span>( <span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length =</span> <span class="dv">11</span> ),</span>
<span id="cb49-14"><a href="modelos-de-pérdida-agregada.html#cb49-14" tabindex="-1"></a>                      <span class="at">labels =</span> <span class="fu">formatC</span>( <span class="fu">seq</span>( <span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length =</span> <span class="dv">11</span> ), <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">format =</span> <span class="st">&#39;f&#39;</span> ), </span>
<span id="cb49-15"><a href="modelos-de-pérdida-agregada.html#cb49-15" tabindex="-1"></a>                      <span class="at">limits =</span> <span class="fu">c</span>( <span class="dv">0</span>, <span class="dv">1</span> ), <span class="at">expand =</span> <span class="fu">c</span>( <span class="dv">0</span>, <span class="dv">0</span> ) ) <span class="sc">+</span></span>
<span id="cb49-16"><a href="modelos-de-pérdida-agregada.html#cb49-16" tabindex="-1"></a>  <span class="fu">xlab</span>( <span class="fu">TeX</span>( <span class="st">&quot;$S$&quot;</span> ) ) <span class="sc">+</span> </span>
<span id="cb49-17"><a href="modelos-de-pérdida-agregada.html#cb49-17" tabindex="-1"></a>  <span class="fu">ylab</span>( <span class="fu">TeX</span>( <span class="st">&quot;$F_{m,l}$&quot;</span> ) ) <span class="sc">+</span> </span>
<span id="cb49-18"><a href="modelos-de-pérdida-agregada.html#cb49-18" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb49-19"><a href="modelos-de-pérdida-agregada.html#cb49-19" tabindex="-1"></a>  <span class="fu">theme</span>( <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span> )</span>
<span id="cb49-20"><a href="modelos-de-pérdida-agregada.html#cb49-20" tabindex="-1"></a></span>
<span id="cb49-21"><a href="modelos-de-pérdida-agregada.html#cb49-21" tabindex="-1"></a><span class="fu">plot</span>( plt )</span></code></pre></div>
</details>
<p><img src="seguros_generales_files/figure-html/l5g4-1.png" width="80%" height="500px" style="display: block; margin: auto;" /></p>
<p></p>
<!------------------------------------------------------------------------------------------------->
</div>
</div>
<div id="aplicación-del-deducible" class="section level2 hasAnchor" number="5.7">
<h2><span class="header-section-number">5.7</span> Aplicación del deducible<a href="modelos-de-pérdida-agregada.html#aplicación-del-deducible" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>En muchas ocasiones según las condiciones de los contratos de seguro y el apetito de riesgo del
asegurador, se configura funciones deducibles sobre los reclamos. El objetivo de aplicar un
deducible es evitar valores de reclamo en determinados rangos que no están acorde a las
configuraciones y estructuración de productos de seguro. Por ejemplo: se puede colocar un deducible
para evitar el pago de valores muy pequeños de reclamos, cuya atención incluso puede implicar
costos operativos o administrativos mayores al valor mismo de los reclamos, ante esta situación
se coloca una cota mínima para que de esta forma el asegurado se haga cargo por su cuenta por
estos valores menores.</p>
<p>Es usual colocar mínimos en las colas de la distribución de reclamos, evitando así valores muy
pequeños o valores muy grandes, pero no sería sustentable, ni financieramente o económicamente, el
colocar un deducible justo donde se presenta la mayor parte de los valores de reclamos. Desde
la perspectiva de un asegurado, ¿De qué serviría adquirir una póliza que no cubre precisamente los
siniestros más usuales?, esta no sería una póliza apetecible en el mercado y por otra parte un
producto difícil de comercializar.</p>
<p>De forma algo más puntual, un <strong>deducible</strong> es una función <span class="math inline">\(D : \mathbb{R}\longrightarrow \mathbb{R}_+\)</span>, tal que
para toda variable aleatoria <span class="math inline">\(X\)</span>, se satisface la siguiente desigualdad <span class="math inline">\(D( X ) \leq X\)</span>.</p>
<ol style="list-style-type: decimal">
<li><p>Para evitar pérdidas pequeñas se suele configurar la función deducible <span class="math inline">\(D( X ) = \max( X - d, 0 )\)</span>,
en este caso si <span class="math inline">\(X \rightsquigarrow F_X\)</span>, entonces <span class="math inline">\(Z = D( X ) \rightsquigarrow F_Z( z )\)</span>, donde
<span class="math inline">\(F_Z( z ) = \mathbf{1}_{[d,+\infty)}( z ) F_X( z + d )\)</span>.</p></li>
<li><p>Para prevenir los excesos de pérdida (stop loss) <span class="math inline">\(D( X ) = \min( X, M )\)</span>, en este caso si
<span class="math inline">\(X \rightsquigarrow F_X\)</span>, entonces <span class="math inline">\(Z = D( X ) \rightsquigarrow F_Z( z )\)</span>, donde
<span class="math inline">\(F_Z( z ) = \mathbf{1}_{(-\infty,M)}( z ) F_X( z ) + \mathbf{1}_{[M,+\infty)}( z )\)</span>.</p></li>
<li><p>Caso mixto para evitar pérdidas pequeñas y exceso de pérdida <span class="math inline">\(D( X ) = \min( \max( X - d, 0 ), M )\)</span>,
en este caso si <span class="math inline">\(X \rightsquigarrow F_X\)</span>, entonces <span class="math inline">\(Z = D( X ) \rightsquigarrow F_Z( z )\)</span>, donde
<span class="math inline">\(F_Z( z ) = \mathbf{1}_{[a,M)}( z ) F_X( z + d ) + \mathbf{1}_{[M,+\infty)}( z )\)</span>.</p></li>
<li><p>En otros casos más elaborados se segmenta el riesgo cubierto, al existir variables explicativas
de la naturaleza del riesgo <span class="math inline">\(Y_1, \ldots, Y_m\)</span>, las cuales pueden tomar valores en un conjunto <span class="math inline">\(E\)</span>
solo se toma un subconjunto de valores posibles <span class="math inline">\(A\subset E\)</span>, para los cuales es válida la cobertura.
Así si un reclamo <span class="math inline">\(X\)</span> se explica o caracteriza por las variables anteriores se configura el
deducibles <span class="math inline">\(D( X ) = \mathbf{1}_{A}\left( Y_1, \ldots, Y_m \right) X\)</span>.</p></li>
</ol>
<p>Un ejemplo del anterior deducible se suele dar en el caso de seguros de salud, donde se cubre
ciertos tipos de enfermedades, usualmente se suele evitar las enfermedades de tipo catastrófico
que estén ya presentes, en otros productos se evita los gastos odontológicos, etc.</p>
<p>Los deducibles, pueden ser configurados de forma genérica para todos los asegurados o incluso
de forma personalizada por asegurado, según los productos que estos han adquirido. En general, al
emplear deducibles para cada uno de los reclamos individuales, el reclamo total <span class="math inline">\(S\)</span> se ve modificado,
y toma la forma:
<span class="math display">\[
S = \sum\limits_{i=1}^{N} D_i\left( X_i \right)
\]</span>
Hay casos donde se aplica el deducible al grupo de siniestros que presenta una póliza o grupo de
pólizas. Esto precisamente se lo puede ver cuando se utiliza un modelo mixto de pérdida.
<span class="math display">\[
S = \sum\limits_{i=1}^n D_i\left( \sum\limits_{n=1}^{N_i} X_{i,j} \right)
\]</span></p>
<p>Este caso se suele presentar en los productos que partir de una suma parcial de reclamos individuales,
el deducible comienza a regir.</p>
<!------------------------------------------------------------------------------------------------->
<div id="algoritmo-de-simulación-3" class="section level3 hasAnchor" number="5.7.1">
<h3><span class="header-section-number">5.7.1</span> Algoritmo de simulación<a href="modelos-de-pérdida-agregada.html#algoritmo-de-simulación-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Presentamos una adaptación sencilla de los algoritmos de simulación anterior, incluyendo el caso
que se tenga un deducible aplicado de forma uniforme a todas las pólizas.</p>
<ol style="list-style-type: decimal">
<li><p>Seleccionar el número de simulaciones <span class="math inline">\(m\)</span>,</p></li>
<li><p>Se genera una muestra de tamaño <span class="math inline">\(m\)</span> de variables <span class="math inline">\(N_1, \ldots, N_m\)</span> con ley <span class="math inline">\(f_N\)</span>,</p></li>
<li><p>Se genera para cada <span class="math inline">\(i \in \{1,\ldots,m\}\)</span> una muestra de tamaño <span class="math inline">\(N_i\)</span> de variables aleatorias
<span class="math inline">\(X_{i,1}, \ldots X_{i,N_i}\)</span> con ley <span class="math inline">\(f_X\)</span>,</p></li>
<li><p>Se estable ce el deducible a aplicar <span class="math inline">\(D : \mathbb{R}\longrightarrow \mathbb{R}\)</span></p></li>
<li><p>Se calcula los reclamos totales utilizando el deducible <span class="math inline">\(S_1, \ldots, S_m\)</span> para cada simulación
<span class="math inline">\(i = \{1, \ldots, m\}\)</span>, mediante la siguiente suma <span class="math inline">\(S_i = \sum\limits_{j=1}^{N_i} D\left( X_{i,j} \right)\)</span>.</p></li>
<li><p>Para la determinación de varios estadísticos se puede utilizar la simulación generada <span class="math inline">\(\{S_i\}\)</span>
y generar la distribución de probabilidad empírica <span class="math inline">\(F_m\)</span>.</p></li>
</ol>
<div class="example">
<p><span id="exm:l5ex6" class="example"><strong>Ejemplo 5.6  </strong></span>Consideremos el caso de un modelo colectivo de pérdida donde el proceso de conteo
<span class="math inline">\(N \rightsquigarrow Pois( \lambda )\)</span> y la sucesión <span class="math inline">\(\{X_i\}\)</span> de reclamos individuales se considera
conformada por variables i.i.d, con distribución de probabilidad <span class="math inline">\(LN( \mu, \sigma )\)</span>. El deducible
a aplicar será una función mixta de la forma <span class="math inline">\(D( X ) = \min( \max( X - d, 0 ), M )\)</span>.</p>
<p></p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb50"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb50-1"><a href="modelos-de-pérdida-agregada.html#cb50-1"></a><span class="co"># 1. selección de simulaciones</span></span>
<span id="cb50-2"><a href="modelos-de-pérdida-agregada.html#cb50-2"></a>m <span class="ot">&lt;-</span> <span class="fl">1e4</span></span>
<span id="cb50-3"><a href="modelos-de-pérdida-agregada.html#cb50-3"></a></span>
<span id="cb50-4"><a href="modelos-de-pérdida-agregada.html#cb50-4"></a><span class="co"># 2. especificación de los parámetros para las distribuciones</span></span>
<span id="cb50-5"><a href="modelos-de-pérdida-agregada.html#cb50-5"></a>u <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb50-6"><a href="modelos-de-pérdida-agregada.html#cb50-6"></a>s <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb50-7"><a href="modelos-de-pérdida-agregada.html#cb50-7"></a>l <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb50-8"><a href="modelos-de-pérdida-agregada.html#cb50-8"></a></span>
<span id="cb50-9"><a href="modelos-de-pérdida-agregada.html#cb50-9"></a><span class="co"># 3. se especifica la función deducible</span></span>
<span id="cb50-10"><a href="modelos-de-pérdida-agregada.html#cb50-10"></a>D <span class="ot">&lt;-</span> <span class="cf">function</span>( x, d, M ) {</span>
<span id="cb50-11"><a href="modelos-de-pérdida-agregada.html#cb50-11"></a>  <span class="fu">return</span>( <span class="fu">min</span>( <span class="fu">max</span>( x <span class="sc">-</span> d, <span class="dv">0</span> ), M ) )</span>
<span id="cb50-12"><a href="modelos-de-pérdida-agregada.html#cb50-12"></a>}</span>
<span id="cb50-13"><a href="modelos-de-pérdida-agregada.html#cb50-13"></a></span>
<span id="cb50-14"><a href="modelos-de-pérdida-agregada.html#cb50-14"></a><span class="co"># 4. simulación del conteo de siniestros</span></span>
<span id="cb50-15"><a href="modelos-de-pérdida-agregada.html#cb50-15"></a>N <span class="ot">&lt;-</span> <span class="fu">rpois</span>( <span class="at">n =</span> m, <span class="at">lambda =</span> l )</span>
<span id="cb50-16"><a href="modelos-de-pérdida-agregada.html#cb50-16"></a></span>
<span id="cb50-17"><a href="modelos-de-pérdida-agregada.html#cb50-17"></a><span class="co"># 5. simulación de la severidad de los reclamos</span></span>
<span id="cb50-18"><a href="modelos-de-pérdida-agregada.html#cb50-18"></a>X <span class="ot">&lt;-</span> <span class="fu">lapply</span>( N, <span class="at">FUN =</span> <span class="cf">function</span>( n ) <span class="fu">rlnorm</span>( n, <span class="at">meanlog =</span> u, <span class="at">sdlog =</span> s ) )</span>
<span id="cb50-19"><a href="modelos-de-pérdida-agregada.html#cb50-19"></a></span>
<span id="cb50-20"><a href="modelos-de-pérdida-agregada.html#cb50-20"></a><span class="co"># 6. se aplica el deducible a los reclamos</span></span>
<span id="cb50-21"><a href="modelos-de-pérdida-agregada.html#cb50-21"></a>d <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb50-22"><a href="modelos-de-pérdida-agregada.html#cb50-22"></a>M <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb50-23"><a href="modelos-de-pérdida-agregada.html#cb50-23"></a>DX <span class="ot">&lt;-</span> <span class="fu">lapply</span>( X, <span class="at">FUN =</span> <span class="cf">function</span>( x ) <span class="fu">sapply</span>( x, <span class="at">FUN =</span> <span class="cf">function</span>( y ) <span class="fu">D</span>( y, d, M ) ) )</span>
<span id="cb50-24"><a href="modelos-de-pérdida-agregada.html#cb50-24"></a></span>
<span id="cb50-25"><a href="modelos-de-pérdida-agregada.html#cb50-25"></a><span class="co"># 7. reclamo total, agregación por cada simulación</span></span>
<span id="cb50-26"><a href="modelos-de-pérdida-agregada.html#cb50-26"></a>S <span class="ot">&lt;-</span> <span class="fu">sapply</span>( DX, <span class="at">FUN =</span> <span class="cf">function</span>( x ) <span class="fu">ifelse</span>( <span class="fu">length</span>( x ) <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">0</span>, <span class="fu">sum</span>( x, <span class="at">na.rm =</span> <span class="cn">TRUE</span> ) ) )</span></code></pre></div>
</details>
<p></p>
<p>Como ya se lo mencionó, utilizando la simulación <span class="math inline">\(\{S_i\}\)</span> podemos determinar la distribución de
probabilidad empírica <span class="math inline">\(F_m\)</span> que aproxima la distribución de <span class="math inline">\(F_S\)</span>.</p>
<p></p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb51"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb51-1"><a href="modelos-de-pérdida-agregada.html#cb51-1"></a>FeS <span class="ot">&lt;-</span> <span class="fu">ecdf</span>( S )</span>
<span id="cb51-2"><a href="modelos-de-pérdida-agregada.html#cb51-2"></a>s <span class="ot">&lt;-</span> <span class="fu">seq</span>( <span class="dv">0</span>, <span class="fu">max</span>( S ), <span class="at">length =</span> <span class="dv">100</span> )</span>
<span id="cb51-3"><a href="modelos-de-pérdida-agregada.html#cb51-3"></a>Fes <span class="ot">&lt;-</span> <span class="fu">sapply</span>( s, <span class="at">FUN =</span> FeS )</span></code></pre></div>
</details>
<p></p>
<p></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb52"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb52-1"><a href="modelos-de-pérdida-agregada.html#cb52-1" tabindex="-1"></a>Smax <span class="ot">&lt;-</span> <span class="fu">max</span>( S )</span>
<span id="cb52-2"><a href="modelos-de-pérdida-agregada.html#cb52-2" tabindex="-1"></a></span>
<span id="cb52-3"><a href="modelos-de-pérdida-agregada.html#cb52-3" tabindex="-1"></a>plt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>( ) <span class="sc">+</span></span>
<span id="cb52-4"><a href="modelos-de-pérdida-agregada.html#cb52-4" tabindex="-1"></a>  <span class="fu">geom_step</span>( <span class="fu">aes</span>( <span class="at">x =</span> s, <span class="at">y =</span> Fes, <span class="at">group =</span> m, <span class="at">colour =</span> <span class="st">&#39;red&#39;</span> ), <span class="at">linewidth =</span> <span class="dv">1</span> ) <span class="sc">+</span></span>
<span id="cb52-5"><a href="modelos-de-pérdida-agregada.html#cb52-5" tabindex="-1"></a>  <span class="fu">geom_vline</span>( <span class="at">xintercept =</span> <span class="fu">c</span>( d, M ), <span class="at">colour =</span> <span class="st">&#39;olivedrab3&#39;</span> ) <span class="sc">+</span></span>
<span id="cb52-6"><a href="modelos-de-pérdida-agregada.html#cb52-6" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>( <span class="at">breaks =</span> <span class="fu">seq</span>( <span class="dv">0</span>, Smax, <span class="at">length =</span> <span class="dv">11</span> ),</span>
<span id="cb52-7"><a href="modelos-de-pérdida-agregada.html#cb52-7" tabindex="-1"></a>                      <span class="at">labels =</span> <span class="fu">formatC</span>( <span class="fu">seq</span>( <span class="dv">0</span>, Smax, <span class="at">length =</span> <span class="dv">11</span> ), <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">format =</span> <span class="st">&#39;f&#39;</span> ), </span>
<span id="cb52-8"><a href="modelos-de-pérdida-agregada.html#cb52-8" tabindex="-1"></a>                      <span class="at">limits =</span> <span class="fu">c</span>( <span class="dv">0</span>, Smax ), </span>
<span id="cb52-9"><a href="modelos-de-pérdida-agregada.html#cb52-9" tabindex="-1"></a>                      <span class="at">expand =</span> <span class="fu">c</span>( <span class="dv">0</span>, <span class="dv">0</span> ) ) <span class="sc">+</span></span>
<span id="cb52-10"><a href="modelos-de-pérdida-agregada.html#cb52-10" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>( <span class="at">breaks =</span> <span class="fu">seq</span>( <span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length =</span> <span class="dv">11</span> ),</span>
<span id="cb52-11"><a href="modelos-de-pérdida-agregada.html#cb52-11" tabindex="-1"></a>                      <span class="at">labels =</span> <span class="fu">formatC</span>( <span class="fu">seq</span>( <span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length =</span> <span class="dv">11</span> ), <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">format =</span> <span class="st">&#39;f&#39;</span> ), </span>
<span id="cb52-12"><a href="modelos-de-pérdida-agregada.html#cb52-12" tabindex="-1"></a>                      <span class="at">limits =</span> <span class="fu">c</span>( <span class="dv">0</span>, <span class="dv">1</span> ), </span>
<span id="cb52-13"><a href="modelos-de-pérdida-agregada.html#cb52-13" tabindex="-1"></a>                      <span class="at">expand =</span> <span class="fu">c</span>( <span class="dv">0</span>, <span class="dv">0</span> ) ) <span class="sc">+</span></span>
<span id="cb52-14"><a href="modelos-de-pérdida-agregada.html#cb52-14" tabindex="-1"></a>  <span class="fu">xlab</span>( <span class="fu">TeX</span>( <span class="st">&quot;$s$&quot;</span> ) ) <span class="sc">+</span> </span>
<span id="cb52-15"><a href="modelos-de-pérdida-agregada.html#cb52-15" tabindex="-1"></a>  <span class="fu">ylab</span>( <span class="fu">TeX</span>( <span class="st">&quot;$F_m( s )$&quot;</span> ) ) <span class="sc">+</span> </span>
<span id="cb52-16"><a href="modelos-de-pérdida-agregada.html#cb52-16" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb52-17"><a href="modelos-de-pérdida-agregada.html#cb52-17" tabindex="-1"></a>  <span class="fu">theme</span>( <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span> )</span>
<span id="cb52-18"><a href="modelos-de-pérdida-agregada.html#cb52-18" tabindex="-1"></a><span class="fu">plot</span>( plt )</span></code></pre></div>
</details>
<p><img src="seguros_generales_files/figure-html/l5g5-1.png" width="80%" height="500px" style="display: block; margin: auto;" /></p>
<p></p>
</div>
<!------------------------------------------------------------------------------------------------->
</div>
</div>
<div id="algoritmo-de-panjer" class="section level2 hasAnchor" number="5.8">
<h2><span class="header-section-number">5.8</span> Algoritmo de Panjer<a href="modelos-de-pérdida-agregada.html#algoritmo-de-panjer" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p></p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb53"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb53-1"><a href="modelos-de-pérdida-agregada.html#cb53-1"></a>n <span class="ot">&lt;-</span> <span class="dv">5000</span></span>
<span id="cb53-2"><a href="modelos-de-pérdida-agregada.html#cb53-2"></a>a <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb53-3"><a href="modelos-de-pérdida-agregada.html#cb53-3"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb53-4"><a href="modelos-de-pérdida-agregada.html#cb53-4"></a>p0 <span class="ot">&lt;-</span> <span class="fl">0.01</span></span>
<span id="cb53-5"><a href="modelos-de-pérdida-agregada.html#cb53-5"></a>epsilon <span class="ot">&lt;-</span> <span class="fl">1e-10</span></span>
<span id="cb53-6"><a href="modelos-de-pérdida-agregada.html#cb53-6"></a>alpha <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb53-7"><a href="modelos-de-pérdida-agregada.html#cb53-7"></a>theta <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb53-8"><a href="modelos-de-pérdida-agregada.html#cb53-8"></a>xmax <span class="ot">&lt;-</span> <span class="fl">5e2</span></span>
<span id="cb53-9"><a href="modelos-de-pérdida-agregada.html#cb53-9"></a>dist <span class="ot">&lt;-</span> dgamma</span>
<span id="cb53-10"><a href="modelos-de-pérdida-agregada.html#cb53-10"></a></span>
<span id="cb53-11"><a href="modelos-de-pérdida-agregada.html#cb53-11"></a>pardist <span class="ot">&lt;-</span> <span class="fu">list</span>( <span class="at">shape =</span> alpha, <span class="at">scale =</span> theta )</span>
<span id="cb53-12"><a href="modelos-de-pérdida-agregada.html#cb53-12"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>( <span class="dv">0</span>, xmax, <span class="at">length =</span> n )</span>
<span id="cb53-13"><a href="modelos-de-pérdida-agregada.html#cb53-13"></a>N <span class="ot">&lt;-</span> n <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb53-14"><a href="modelos-de-pérdida-agregada.html#cb53-14"></a>dx <span class="ot">&lt;-</span> <span class="fu">diff</span>( x )</span>
<span id="cb53-15"><a href="modelos-de-pérdida-agregada.html#cb53-15"></a>fX <span class="ot">&lt;-</span> <span class="fu">sapply</span>( x[<span class="dv">1</span><span class="sc">:</span>N], <span class="at">FUN =</span> <span class="cf">function</span>( y ) <span class="fu">do.call</span>( dist, <span class="fu">c</span>( y, pardist ) ) )</span>
<span id="cb53-16"><a href="modelos-de-pérdida-agregada.html#cb53-16"></a></span>
<span id="cb53-17"><a href="modelos-de-pérdida-agregada.html#cb53-17"></a>fS <span class="ot">&lt;-</span> p0</span>
<span id="cb53-18"><a href="modelos-de-pérdida-agregada.html#cb53-18"></a>A <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">/</span> ( <span class="dv">1</span> <span class="sc">-</span> a <span class="sc">*</span> fX[ <span class="dv">1</span> ] )</span>
<span id="cb53-19"><a href="modelos-de-pérdida-agregada.html#cb53-19"></a><span class="cf">for</span> ( k <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span>n ) {</span>
<span id="cb53-20"><a href="modelos-de-pérdida-agregada.html#cb53-20"></a>  fS <span class="ot">&lt;-</span> <span class="fu">c</span>( fS, A <span class="sc">*</span> <span class="fu">sum</span>( ( a <span class="sc">+</span> b <span class="sc">*</span> x[<span class="dv">1</span><span class="sc">:</span>(k<span class="dv">-1</span>)] <span class="sc">/</span> x[ k ] ) <span class="sc">*</span> fX[<span class="dv">1</span><span class="sc">:</span>(k<span class="dv">-1</span>)] <span class="sc">*</span> fS[(k<span class="dv">-1</span>)<span class="sc">:</span><span class="dv">1</span>] ) )</span>
<span id="cb53-21"><a href="modelos-de-pérdida-agregada.html#cb53-21"></a>}</span></code></pre></div>
</details>
<p></p>
<p></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb54"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb54-1"><a href="modelos-de-pérdida-agregada.html#cb54-1" tabindex="-1"></a>plt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>( ) <span class="sc">+</span></span>
<span id="cb54-2"><a href="modelos-de-pérdida-agregada.html#cb54-2" tabindex="-1"></a>  <span class="fu">geom_step</span>( <span class="fu">aes</span>( <span class="at">x =</span> x, <span class="at">y =</span> fS, <span class="at">colour =</span> <span class="st">&#39;purple3&#39;</span> ), <span class="at">linewidth =</span> <span class="dv">1</span> ) <span class="sc">+</span></span>
<span id="cb54-3"><a href="modelos-de-pérdida-agregada.html#cb54-3" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>( <span class="at">breaks =</span> <span class="fu">seq</span>( <span class="dv">0</span>, xmax, <span class="at">length =</span> <span class="dv">11</span> ),</span>
<span id="cb54-4"><a href="modelos-de-pérdida-agregada.html#cb54-4" tabindex="-1"></a>                      <span class="at">labels =</span> <span class="fu">formatC</span>( <span class="fu">seq</span>( <span class="dv">0</span>, xmax, <span class="at">length =</span> <span class="dv">11</span> ), <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">format =</span> <span class="st">&#39;f&#39;</span> ), </span>
<span id="cb54-5"><a href="modelos-de-pérdida-agregada.html#cb54-5" tabindex="-1"></a>                      <span class="at">limits =</span> <span class="fu">c</span>( <span class="dv">0</span>, xmax ), </span>
<span id="cb54-6"><a href="modelos-de-pérdida-agregada.html#cb54-6" tabindex="-1"></a>                      <span class="at">expand =</span> <span class="fu">c</span>( <span class="dv">0</span>, <span class="dv">0</span> ) ) <span class="sc">+</span></span>
<span id="cb54-7"><a href="modelos-de-pérdida-agregada.html#cb54-7" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>( <span class="at">breaks =</span> <span class="fu">seq</span>( <span class="dv">0</span>, <span class="fl">4e3</span>, <span class="at">length =</span> <span class="dv">11</span> ),</span>
<span id="cb54-8"><a href="modelos-de-pérdida-agregada.html#cb54-8" tabindex="-1"></a>                      <span class="at">labels =</span> <span class="fu">formatC</span>( <span class="fu">seq</span>( <span class="dv">0</span>, <span class="fl">4e3</span>, <span class="at">length =</span> <span class="dv">11</span> ), <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">format =</span> <span class="st">&#39;f&#39;</span> ), </span>
<span id="cb54-9"><a href="modelos-de-pérdida-agregada.html#cb54-9" tabindex="-1"></a>                      <span class="at">limits =</span> <span class="fu">c</span>( <span class="dv">0</span>, <span class="fl">4e3</span> ), </span>
<span id="cb54-10"><a href="modelos-de-pérdida-agregada.html#cb54-10" tabindex="-1"></a>                      <span class="at">expand =</span> <span class="fu">c</span>( <span class="dv">0</span>, <span class="dv">0</span> ) ) <span class="sc">+</span></span>
<span id="cb54-11"><a href="modelos-de-pérdida-agregada.html#cb54-11" tabindex="-1"></a>  <span class="fu">xlab</span>( <span class="fu">TeX</span>( <span class="st">&quot;$s$&quot;</span> ) ) <span class="sc">+</span> </span>
<span id="cb54-12"><a href="modelos-de-pérdida-agregada.html#cb54-12" tabindex="-1"></a>  <span class="fu">ylab</span>( <span class="fu">TeX</span>( <span class="st">&quot;$f_S$&quot;</span> ) ) <span class="sc">+</span> </span>
<span id="cb54-13"><a href="modelos-de-pérdida-agregada.html#cb54-13" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb54-14"><a href="modelos-de-pérdida-agregada.html#cb54-14" tabindex="-1"></a>  <span class="fu">theme</span>( <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span> )</span>
<span id="cb54-15"><a href="modelos-de-pérdida-agregada.html#cb54-15" tabindex="-1"></a><span class="fu">plot</span>( plt )</span></code></pre></div>
</details>
<p><img src="seguros_generales_files/figure-html/l5g6-1.png" width="80%" height="500px" style="display: block; margin: auto;" /></p>
<p></p>
<!------------------------------------------------------------------------------------------------->
</div>
<div id="estimación-usando-la-transformada-de-fourier" class="section level2 hasAnchor" number="5.9">
<h2><span class="header-section-number">5.9</span> Estimación usando la transformada de Fourier<a href="modelos-de-pérdida-agregada.html#estimación-usando-la-transformada-de-fourier" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Para el caso del modelo individual de riesgos podemos hacer uso de la siguiente estimación de la
densidad de probabilidad de los reclamos totales <span class="math inline">\(S\)</span>, utilizando la transformada de Fourier. En la
implementación numérica se utiliza la transformada de Fourier rápida (FFT).
<span class="math display">\[
\mathscr{F}\left( f_S \right)
= \mathscr{F}\left( f^{\star n}_X \right)
= \mathscr{F}\left( f_X \right)^{n}
\]</span></p>
<p>Por tanto de esta relación como la transformada de Fourier es invertible, existe <span class="math inline">\(\mathscr{F}^{-1}\)</span>.
Resulta el siguiente método para calcular la densidad de <span class="math inline">\(S\)</span>
<span class="math display">\[
f_S = \mathscr{F}^{-1}\left( \mathscr{F}\left( f_S \right) \right)
= \mathscr{F}^{-1}\left(\mathscr{F}\left( f_X \right)^{n} \right)
\]</span></p>
<p>En conclusión para determinar la densidad de probabilidad de <span class="math inline">\(S\)</span> basta conocer la transformada de
Fourier de la distribución de los reclamos individuales, multiplicarla por si misma <span class="math inline">\(n\)</span> veces y
tomar la transformada de Fourier inversa.
<span class="math display">\[
\begin{eqnarray*}
\mathscr{F}\left( f_S \right)
&amp; = &amp; \mathscr{F}\left( \sum\limits_{n=0}^{+\infty} p_n f_X^{\star n} \right) \\
&amp; = &amp; \sum\limits_{n=0}^{+\infty} p_n \mathscr{F}\left( f_X^{\star n} \right) \\
&amp; = &amp; \sum\limits_{n=0}^{+\infty} p_n \mathscr{F}\left( f_X \right)^{n}
\end{eqnarray*}
\]</span>
como consecuencia
<span class="math display">\[
\begin{eqnarray*}
f_S
&amp; = &amp; \mathscr{F}^{-1}\left( \mathscr{F}\left( f_S \right) \right)\\
&amp; = &amp; \mathscr{F}^{-1}\left( \sum\limits_{n=0}^{+\infty} p_n \mathscr{F}\left( f_X \right)^{n} \right)\quad
\text{Una sola inversión} \\
&amp; = &amp; \sum\limits_{n=0}^{+\infty} p_n \mathscr{F}^{-1}\left( \mathscr{F}\left( f_X \right)^{n} \right)\quad
\text{Una inversión por cada término en la suma}
\end{eqnarray*}
\]</span></p>
<p><span class="math display">\[
W_n = \frac{S_n}{n}
\]</span></p>
<p><span class="math display">\[
\mathbb{E}\left[ W_n \right]
= \mathbb{E}\left[ \frac{S_n}{n} \right]
= \frac{1}{n} \mathbb{E}\left[ S_n \right]
\]</span></p>
<p><span class="math display">\[
\mathbb{V}\left[ W_n \right]
= \mathbb{V}\left[ \frac{S_n}{n} \right]
= \frac{1}{n^2} \mathbb{V}\left[ S_n \right]
\]</span></p>
<p></p>
<p></p>

<!------------------------------------------------------------------------------------------------->
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="distribuciones.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tarificación.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["seguros_generales.pdf", "seguros_generales.epub"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section"
  },
  "split_by": "chapter"
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
